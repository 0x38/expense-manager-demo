<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <script src="../../web-component-tester/browser.js"></script>

  <link rel="import" href="../vaadin-combo-box.html">
  <script src="common.js"></script>

  
  <script src="../node_modules/es6-shim/es6-shim.min.js"></script>
  <script src="../node_modules/systemjs/dist/system.src.js"></script>
  <script src="../node_modules/reflect-metadata/Reflect.js"></script>
  <script src="../node_modules/zone.js/dist/zone.js"></script>
  <script src="../node_modules/rxjs/bundles/Rx.js"></script>

  
  <script>document.addEventListener("WebComponentsReady",function(){var o=["core","common","compiler","platform-browser","platform-browser-dynamic"],n={};o.forEach(function(o){n["@angular/"+o]={main:"index.js"}}),n.app={format:"register",defaultExtension:"js"},n["vaadin-combo-box"]={defaultExtension:"js",main:"vaadin-combo-box.js"},System.config({map:{"vaadin-combo-box":"../directives","@angular":"../node_modules/@angular"},packages:n}),System["import"]("angular2/main.js").then(function(){window._testAppImported=!0})});</script>
</head>

<body>

  <test-fixture id="testapp">
    <template>
      <test-app>Loading...</test-app>
    </template>
  </test-fixture>

  <script>describe("Angular 2",function(){var e,t;before(function(e){function t(){window._testAppImported?e():setTimeout(t,10)}t()}),beforeEach(function(n){t=fixture("testapp"),t.addEventListener("readyForTests",function(t){e=t.detail,setTimeout(n,0)}),document.body.dispatchEvent(new CustomEvent("bootstrap"))}),describe("Data binding",function(){var n;beforeEach(function(){n=t.querySelector("vaadin-combo-box.bound")}),it("should have initial bound value",function(){expect(n.value).to.equal("foo")}),it("should change value on bound value change",function(){e.selection="bar",e.detectChanges(),expect(n.value).to.equal("bar")}),it("should change bound value on value change",function(){n.value="bar",expect(e.selection).to.equal("bar")})}),describe("Form field",function(){var n;beforeEach(function(){n=t.querySelector("form vaadin-combo-box")}),it("should be initially pristine",function(){expect(n.classList.contains("ng-pristine")).to.be["true"]}),it("should be dirty on value change",function(){n.value="bar",e.detectChanges(),expect(n.classList.contains("ng-dirty")).to.be["true"]}),it("should be initially untouched",function(){expect(n.classList.contains("ng-untouched")).to.be["true"]}),it("should get touched on input blur",function(){Polymer.Base.fire("blur",{},{bubbles:!0,node:n.$.input}),expect(n.classList.contains("ng-touched")).to.be["true"]}),it("should be invalid",function(){expect(n.classList.contains("ng-invalid")).to.be["true"]}),it("should be an invalid form",function(){expect(n._form.valid).to.be["false"]}),it("should be a valid form",function(){n.value="bar",expect(n._form.valid).to.be["true"]}),it("should have correct selection value",function(){n.value="bar",expect(n._form.value.selection).to.equal("bar")}),it("should not reflect invalid state to combobox initially",function(){expect(n.invalid).to.be["false"]}),it("should reflect invalid state to combobox when value changed",function(e){n.value="bar",n.value="",setTimeout(function(){expect(n.invalid).to.be["true"],e()},0)}),it("should be valid",function(){n.value="bar",expect(n.classList.contains("ng-valid")).to.be["true"]})})});</script>




</body></html>