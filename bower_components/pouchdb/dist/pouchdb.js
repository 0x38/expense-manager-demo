var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};(function(E){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var w;w="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,w.PouchDB=E()}})(function(){var E;return function L(C,I,D){function O(P,F){if(!I[P]){if(!C[P]){var M="function"==typeof require&&require;if(!F&&M)return M(P,!0);if(N)return N(P,!0);var B=new Error("Cannot find module '"+P+"'");throw B.code="MODULE_NOT_FOUND",B}var U=I[P]={exports:{}};C[P][0].call(U.exports,function(H){var W=C[P][1][H];return O(W?W:H)},U,U.exports,L,C,I,D)}return I[P].exports}for(var N="function"==typeof require&&require,R=0;R<D.length;R++)O(D[R]);return O}({1:[function(L,C){function D(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function O(F){return"function"==typeof F}function N(F){return"number"==typeof F}function R(F){return"object"===("undefined"==typeof F?"undefined":_typeof(F))&&null!==F}function P(F){return void 0===F}C.exports=D,D.EventEmitter=D,D.prototype._events=void 0,D.prototype._maxListeners=void 0,D.defaultMaxListeners=10,D.prototype.setMaxListeners=function(F){if(!N(F)||0>F||isNaN(F))throw TypeError("n must be a positive number");return this._maxListeners=F,this},D.prototype.emit=function(F){var M,B,U,H,W,z;if(this._events||(this._events={}),"error"===F&&(!this._events.error||R(this._events.error)&&!this._events.error.length))if(M=arguments[1],M instanceof Error)throw M;else{var K=new Error("Uncaught, unspecified \"error\" event. ("+M+")");throw K.context=M,K}if(B=this._events[F],P(B))return!1;if(O(B))switch(arguments.length){case 1:B.call(this);break;case 2:B.call(this,arguments[1]);break;case 3:B.call(this,arguments[1],arguments[2]);break;default:H=Array.prototype.slice.call(arguments,1),B.apply(this,H);}else if(R(B))for(H=Array.prototype.slice.call(arguments,1),z=B.slice(),U=z.length,W=0;W<U;W++)z[W].apply(this,H);return!0},D.prototype.addListener=function(F,M){var B;if(!O(M))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",F,O(M.listener)?M.listener:M),this._events[F]?R(this._events[F])?this._events[F].push(M):this._events[F]=[this._events[F],M]:this._events[F]=M,R(this._events[F])&&!this._events[F].warned&&(B=P(this._maxListeners)?D.defaultMaxListeners:this._maxListeners,B&&0<B&&this._events[F].length>B&&(this._events[F].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[F].length),"function"==typeof console.trace&&console.trace())),this},D.prototype.on=D.prototype.addListener,D.prototype.once=function(F,M){function B(){this.removeListener(F,B),U||(U=!0,M.apply(this,arguments))}if(!O(M))throw TypeError("listener must be a function");var U=!1;return B.listener=M,this.on(F,B),this},D.prototype.removeListener=function(F,M){var B,U,H,W;if(!O(M))throw TypeError("listener must be a function");if(!this._events||!this._events[F])return this;if(B=this._events[F],H=B.length,U=-1,B===M||O(B.listener)&&B.listener===M)delete this._events[F],this._events.removeListener&&this.emit("removeListener",F,M);else if(R(B)){for(W=H;0<W--;)if(B[W]===M||B[W].listener&&B[W].listener===M){U=W;break}if(0>U)return this;1===B.length?(B.length=0,delete this._events[F]):B.splice(U,1),this._events.removeListener&&this.emit("removeListener",F,M)}return this},D.prototype.removeAllListeners=function(F){var M,B;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[F]&&delete this._events[F],this;if(0===arguments.length){for(M in this._events)"removeListener"!==M&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events={},this}if(B=this._events[F],O(B))this.removeListener(F,B);else if(B)for(;B.length;)this.removeListener(F,B[B.length-1]);return delete this._events[F],this},D.prototype.listeners=function(F){var M;return M=this._events&&this._events[F]?O(this._events[F])?[this._events[F]]:this._events[F].slice():[],M},D.prototype.listenerCount=function(F){if(this._events){var M=this._events[F];if(O(M))return 1;if(M)return M.length}return 0},D.listenerCount=function(F,M){return F.listenerCount(M)}},{}],2:[function(L,C){function D(){U&&H&&(U=!1,H.length?B=H.concat(B):W=-1,B.length&&O())}function O(){if(!U){var z=F(D);U=!0;for(var K=B.length;K;){for(H=B,B=[];++W<K;)H&&H[W].run();W=-1,K=B.length}H=null,U=!1,M(z)}}function N(z,K){this.fun=z,this.array=K}function R(){}var P=C.exports={},F,M;(function(){try{F=setTimeout}catch(z){F=function(){throw new Error("setTimeout is not defined")}}try{M=clearTimeout}catch(z){M=function(){throw new Error("clearTimeout is not defined")}}})();var B=[],U=!1,H,W=-1;P.nextTick=function(z){var K=Array(arguments.length-1);if(1<arguments.length)for(var X=1;X<arguments.length;X++)K[X-1]=arguments[X];B.push(new N(z,K)),1!==B.length||U||F(O,0)},N.prototype.run=function(){this.fun.apply(null,this.array)},P.title="browser",P.browser=!0,P.env={},P.argv=[],P.version="",P.versions={},P.on=R,P.addListener=R,P.once=R,P.off=R,P.removeListener=R,P.removeAllListeners=R,P.emit=R,P.binding=function(){throw new Error("process.binding is not supported")},P.cwd=function(){return"/"},P.chdir=function(){throw new Error("process.chdir is not supported")},P.umask=function(){return 0}},{}],3:[function(L,C){(function(D,O){"use strict";function N(ao){return ao&&"object"===("undefined"==typeof ao?"undefined":_typeof(ao))&&"default"in ao?ao["default"]:ao}function R(ao){return ao instanceof ArrayBuffer||"undefined"!=typeof Blob&&ao instanceof Blob}function P(ao){if("function"==typeof ao.slice)return ao.slice(0);var oo=new ArrayBuffer(ao.byteLength),io=new Uint8Array(oo),co=new Uint8Array(ao);return io.set(co),oo}function F(ao){if(ao instanceof ArrayBuffer)return P(ao);var oo=ao.size,io=ao.type;return"function"==typeof ao.slice?ao.slice(0,oo,io):ao.webkitSlice(0,oo,io)}function M(ao){var oo=Object.getPrototypeOf(ao);if(null===oo)return!0;var io=oo.constructor;return"function"==typeof io&&io instanceof io&&hr.call(io)==_r}function B(ao){var oo,io,co;if(!ao||"object"!==("undefined"==typeof ao?"undefined":_typeof(ao)))return ao;if(Array.isArray(ao)){for(oo=[],io=0,co=ao.length;io<co;io++)oo[io]=B(ao[io]);return oo}if(ao instanceof Date)return ao.toISOString();if(R(ao))return F(ao);if(!M(ao))return ao;for(io in oo={},ao)if(Object.prototype.hasOwnProperty.call(ao,io)){var uo=B(ao[io]);"undefined"!=typeof uo&&(oo[io]=uo)}return oo}function U(ao){var oo=!1;return ar(function(io){if(oo)throw new Error("once called more than once");else oo=!0,ao.apply(this,io)})}function H(ao){return ar(function(oo){oo=B(oo);var io=this,co="function"==typeof oo[oo.length-1]&&oo.pop(),uo;co&&(uo=function(_o,fo){D.nextTick(function(){co(_o,fo)})});var po=new pr(function(ho,_o){var fo;try{var mo=U(function(go,yo){go?_o(go):ho(yo)});oo.push(mo),fo=ao.apply(io,oo),fo&&"function"==typeof fo.then&&ho(fo)}catch(go){_o(go)}});return uo&&po.then(function(ho){uo(null,ho)},uo),po})}function W(ao,oo){function io(co,uo,po){if(fr.enabled){for(var ho=[co._db_name,uo],_o=0;_o<po.length-1;_o++)ho.push(po[_o]);fr.apply(null,ho);var fo=po[po.length-1];po[po.length-1]=function(mo,go){var yo=[co._db_name,uo];yo=yo.concat(mo?["error",mo]:["success",go]),fr.apply(null,yo),fo(mo,go)}}}return H(ar(function(co){if(this._closed)return pr.reject(new Error("database is closed"));if(this._destroyed)return pr.reject(new Error("database is destroyed"));var uo=this;return io(uo,ao,co),this.taskqueue.isReady?oo.apply(this,co):new pr(function(po,ho){uo.taskqueue.addTask(function(_o){_o?ho(_o):po(uo[ao].apply(uo,co))})})}))}function z(ao,oo){for(var io={},co=0,uo=oo.length,po;co<uo;co++)po=oo[co],po in ao&&(io[po]=ao[po]);return io}function K(ao){return ao}function X(ao){return[{ok:ao}]}function G(ao,oo,io){function co(){var ko=[];vo.forEach(function(So){So.docs.forEach(function(qo){ko.push({id:So.id,docs:[qo]})})}),io(null,{results:ko})}function uo(){++yo===go&&co()}function po(ko,So,qo){vo[ko]={id:So,docs:qo},uo()}function ho(){if(!(Eo>=bo.length)){var ko=Math.min(Eo+mr,bo.length),So=bo.slice(Eo,ko);_o(So,Eo),Eo+=So.length}}function _o(ko,So){ko.forEach(function(qo,xo){var To=mo[qo],Ao=z(To[0],["atts_since","attachments"]);Ao.open_revs=To.map(function(Co){return Co.rev}),Ao.open_revs=Ao.open_revs.filter(K);var Lo=K;0===Ao.open_revs.length&&(delete Ao.open_revs,Lo=X),["revs","attachments","binary","ajax"].forEach(function(Co){Co in oo&&(Ao[Co]=oo[Co])}),ao.get(qo,Ao,function(Co,jo){var Io;Io=Co?[{error:Co}]:Lo(jo),po(So+xo,qo,Io),ho()})})}var fo=oo.docs,mo={};fo.forEach(function(ko){ko.id in mo?mo[ko.id].push(ko):mo[ko.id]=[ko]});var go=Object.keys(mo).length,yo=0,vo=Array(go),bo=Object.keys(mo),Eo=0;ho()}function V(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function Q(){return gr}function Y(ao){V()?chrome.storage.onChanged.addListener(function(oo){null!=oo.db_name&&ao.emit(oo.dbName.newValue)}):Q()&&("undefined"==typeof addEventListener?window.attachEvent("storage",function(oo){ao.emit(oo.key)}):addEventListener("storage",function(oo){ao.emit(oo.key)}))}function J(){or.EventEmitter.call(this),this._listeners={},Y(this)}function $(ao){if("undefined"!==console&&ao in console){var oo=Array.prototype.slice.call(arguments,1);console[ao].apply(console,oo)}}function Z(ao,oo){var io=6e5;ao=parseInt(ao,10)||0,oo=parseInt(oo,10),oo!==oo||oo<=ao?oo=(ao||1)<<1:++oo,oo>io&&(ao=io>>1,oo=io);var co=Math.random(),uo=oo-ao;return~~(uo*co+ao)}function te(ao){var oo=0;return ao||(oo=2e3),Z(ao,oo)}function ne(ao,oo){$("info","The above "+ao+" is totally normal. "+oo)}function se(ao){Error.call(this,ao.reason),this.status=ao.status,this.name=ao.error,this.message=ao.reason,this.error=!0}function re(ao,oo){function io(co){for(var uo in ao)"function"!=typeof ao[uo]&&(this[uo]=ao[uo]);void 0!==co&&(this.reason=co)}return io.prototype=se.prototype,new io(oo)}function ae(ao){if("object"!==("undefined"==typeof ao?"undefined":_typeof(ao))){var oo=ao;ao=wr,ao.data=oo}return"error"in ao&&"conflict"===ao.error&&(ao.name="conflict",ao.status=409),"name"in ao||(ao.name=ao.error||"unknown"),"status"in ao||(ao.status=500),"message"in ao||(ao.message=ao.message||ao.reason),ao}function oe(ao,oo,io){try{return!ao(oo,io)}catch(uo){var co="Filter function threw: "+uo.toString();return re(jr,co)}}function ie(ao){var oo={},io=ao.filter&&"function"==typeof ao.filter;return oo.query=ao.query_params,function(uo){uo.doc||(uo.doc={});var po=io&&oe(ao.filter,uo.doc,oo);if("object"===("undefined"==typeof po?"undefined":_typeof(po)))return po;if(po)return!1;if(!ao.include_docs)delete uo.doc;else if(!ao.attachments)for(var ho in uo.doc._attachments)uo.doc._attachments.hasOwnProperty(ho)&&(uo.doc._attachments[ho].stub=!0);return!0}}function de(ao){for(var oo=[],io=0,co=ao.length;io<co;io++)oo=oo.concat(ao[io]);return oo}function ce(ao){var oo;if(ao?"string"==typeof ao?/^_/.test(ao)&&!/^_(design|local)/.test(ao)&&(oo=re(qr)):oo=re(kr):oo=re(Sr),oo)throw oo}function le(ao,oo){return"listenerCount"in ao?ao.listenerCount(oo):or.EventEmitter.listenerCount(ao,oo)}function ue(ao){if(!ao)return null;var oo=ao.split("/");return 2===oo.length?oo:1===oo.length?[ao,ao]:null}function pe(ao){var oo=ue(ao);return oo?oo.join("/"):null}function he(ao){for(var oo=Kr.exec(ao),io={},co=14;co--;){var uo=Hr[co],po=oo[co]||"",ho=-1!==["user","password"].indexOf(uo);io[uo]=ho?decodeURIComponent(po):po}return io[Wr]={},io[Hr[12]].replace(zr,function(_o,fo,mo){fo&&(io[Wr][fo]=mo)}),io}function _e(ao,oo,io){return new pr(function(co,uo){ao.get(oo,function(po,ho){if(po){if(404!==po.status)return uo(po);ho={}}var _o=ho._rev,fo=io(ho);return fo?void(fo._id=oo,fo._rev=_o,co(fe(ao,fo,io))):co({updated:!1,rev:_o})})})}function fe(ao,oo,io){return ao.put(oo).then(function(co){return{updated:!0,rev:co.rev}},function(co){if(409!==co.status)throw co;return _e(ao,oo._id,io)})}function me(ao){return 0|Math.random()*ao}function ge(ao,oo){oo=oo||Xr.length;var io="",co=-1;if(ao){for(;++co<ao;)io+=Xr[me(oo)];return io}for(;36>++co;)io+=8==co||13==co||18==co||23==co?"-":19==co?Xr[8|3&me(16)]:Xr[me(16)];return io}function ye(ao){for(var uo=ao.rev_tree.slice(),oo,io,co,po;po=uo.pop();){var ho=po.ids,_o=ho[2],fo=po.pos;if(_o.length){for(var mo=0,go=_o.length;mo<go;mo++)uo.push({pos:fo+1,ids:_o[mo]});continue}var yo=!!ho[1].deleted,vo=ho[0];(!oo||(co===yo?io===fo?oo<vo:io<fo:co))&&(oo=vo,io=fo,co=yo)}return io+"-"+oo}function ve(ao,oo){for(var io=ao.slice(),co;co=io.pop();)for(var uo=co.pos,po=co.ids,ho=po[2],_o=oo(0===ho.length,uo,po[0],co.ctx,po[1]),fo=0,mo=ho.length;fo<mo;fo++)io.push({pos:uo+1,ids:ho[fo],ctx:_o})}function be(ao,oo){return ao.pos-oo.pos}function Ee(ao){var oo=[];ve(ao,function(uo,po,ho,_o,fo){uo&&oo.push({rev:po+"-"+ho,pos:po,opts:fo})}),oo.sort(be).reverse();for(var io=0,co=oo.length;io<co;io++)delete oo[io].pos;return oo}function ke(ao){for(var oo=ye(ao),io=Ee(ao.rev_tree),co=[],uo=0,po=io.length,ho;uo<po;uo++)ho=io[uo],ho.rev===oo||ho.opts.deleted||co.push(ho.rev);return co}function Se(ao){var oo=[];return ve(ao.rev_tree,function(io,co,uo,po,ho){"available"!==ho.status||io||(oo.push(co+"-"+uo),ho.status="missing")}),oo}function qe(ao){for(var oo=[],io=ao.slice(),co;co=io.pop();){var uo=co.pos,po=co.ids,ho=po[0],_o=po[1],fo=po[2],mo=0===fo.length,go=co.history?co.history.slice():[];go.push({id:ho,opts:_o}),mo&&oo.push({pos:uo+1-go.length,ids:go});for(var yo=0,vo=fo.length;yo<vo;yo++)io.push({pos:uo+1,ids:fo[yo],history:go})}return oo.reverse()}function xe(ao,oo){return ao.pos-oo.pos}function we(ao,oo,io){for(var co=0,uo=ao.length,po;co<uo;)po=co+uo>>>1,0>io(ao[po],oo)?co=po+1:uo=po;return co}function Te(ao,oo,io){var co=we(ao,oo,io);ao.splice(co,0,oo)}function Ae(ao,oo){for(var uo=oo,po=ao.length,io,co;uo<po;uo++){var ho=ao[uo],_o=[ho.id,ho.opts,[]];co?(co[2].push(_o),co=_o):io=co=_o}return io}function Le(ao,oo){return ao[0]<oo[0]?-1:1}function Ce(ao,oo){for(var io=[{tree1:ao,tree2:oo}],co=!1;0<io.length;){var uo=io.pop(),po=uo.tree1,ho=uo.tree2;(po[1].status||ho[1].status)&&(po[1].status="available"===po[1].status||"available"===ho[1].status?"available":"missing");for(var _o=0;_o<ho[2].length;_o++){if(!po[2][0]){co="new_leaf",po[2][0]=ho[2][_o];continue}for(var fo=!1,mo=0;mo<po[2].length;mo++)po[2][mo][0]===ho[2][_o][0]&&(io.push({tree1:po[2][mo],tree2:ho[2][_o]}),fo=!0);fo||(co="new_branch",Te(po[2],ho[2][_o],Le))}}return{conflicts:co,tree:ao}}function je(ao,oo,io){var co=[],uo=!1,po=!1,ho;if(!ao.length)return{tree:[oo],conflicts:"new_leaf"};for(var _o=0,fo=ao.length,mo;_o<fo;_o++)if(mo=ao[_o],mo.pos===oo.pos&&mo.ids[0]===oo.ids[0])ho=Ce(mo.ids,oo.ids),co.push({pos:mo.pos,ids:ho.tree}),uo=uo||ho.conflicts,po=!0;else if(!0!==io){var go=mo.pos<oo.pos?mo:oo,yo=mo.pos<oo.pos?oo:mo,vo=yo.pos-go.pos,bo=[],Eo=[];for(Eo.push({ids:go.ids,diff:vo,parent:null,parentIdx:null});0<Eo.length;){var ko=Eo.pop();if(0===ko.diff){ko.ids[0]===yo.ids[0]&&bo.push(ko);continue}for(var So=ko.ids[2],qo=0,xo=So.length;qo<xo;qo++)Eo.push({ids:So[qo],diff:ko.diff-1,parent:ko.ids,parentIdx:qo})}var wo=bo[0];wo?(ho=Ce(wo.ids,yo.ids),wo.parent[2][wo.parentIdx]=ho.tree,co.push({pos:go.pos,ids:go.ids}),uo=uo||ho.conflicts,po=!0):co.push(mo)}else co.push(mo);return po||co.push(oo),co.sort(xe),{tree:co,conflicts:uo||"internal_node"}}function Ie(ao,oo){for(var io=qe(ao),co={},po=0,ho=io.length,uo;po<ho;po++){for(var _o=io[po],fo=_o.ids,mo=Math.max(0,fo.length-oo),go={pos:_o.pos+mo,ids:Ae(fo,mo)},yo=0,vo;yo<mo;yo++)vo=_o.pos+yo+"-"+fo[yo].id,co[vo]=!0;uo=uo?je(uo,go,!0).tree:[go]}return ve(uo,function(bo,Eo,ko){delete co[Eo+"-"+ko]}),{tree:uo,revs:Object.keys(co)}}function De(ao,oo,io){var co=je(ao,oo),uo=Ie(co.tree,io);return{tree:uo.tree,stemmedRevs:uo.revs,conflicts:co.conflicts}}function Oe(ao,oo){for(var io=ao.slice(),co=oo.split("-"),uo=parseInt(co[0],10),po=co[1],ho;ho=io.pop();){if(ho.pos===uo&&ho.ids[0]===po)return!0;for(var _o=ho.ids[2],fo=0,mo=_o.length;fo<mo;fo++)io.push({pos:ho.pos+1,ids:_o[fo]})}return!1}function Ne(ao){return ao.ids}function Re(ao,oo){oo||(oo=ye(ao));for(var io=oo.substring(oo.indexOf("-")+1),co=ao.rev_tree.map(Ne),uo;uo=co.pop();){if(uo[0]===io)return!!uo[1].deleted;co=co.concat(uo[2])}}function Pe(ao){return /^_local/.test(ao)}function Fe(ao){return ir("return "+ao+";",{})}function Me(ao){return new Function("doc",["var emitted = false;","var emit = function (a, b) {","  emitted = true;","};","var view = "+ao+";","view(doc);","if (emitted) {","  return true;","}"].join("\n"))}function Be(ao,oo){try{ao.emit("change",oo)}catch(io){$("error","Error in .on(\"change\", function):",io)}}function Ue(ao,oo,io){function co(){uo.cancel()}or.EventEmitter.call(this);var uo=this;this.db=ao,oo=oo?B(oo):{};var po=oo.complete=U(function(_o,fo){_o?0<le(uo,"error")&&uo.emit("error",_o):uo.emit("complete",fo),uo.removeAllListeners(),ao.removeListener("destroyed",co)});io&&(uo.on("complete",function(_o){io(null,_o)}),uo.on("error",io)),ao.once("destroyed",co),oo.onChange=function(_o){oo.isCancelled||(Be(uo,_o),uo.startSeq&&uo.startSeq<=_o.seq&&(uo.startSeq=!1))};var ho=new pr(function(_o,fo){oo.complete=function(mo,go){mo?fo(mo):_o(go)}});uo.once("cancel",function(){ao.removeListener("destroyed",co),oo.complete(null,{status:"cancelled"})}),this.then=ho.then.bind(ho),this["catch"]=ho["catch"].bind(ho),this.then(function(_o){po(null,_o)},po),ao.taskqueue.isReady?uo.doChanges(oo):ao.taskqueue.addTask(function(){uo.isCancelled?uo.emit("cancel"):uo.doChanges(oo)})}function He(ao,oo,io){var co=[{rev:ao._rev}];"all_docs"===io.style&&(co=Ee(oo.rev_tree).map(function(po){return{rev:po.rev}}));var uo={id:oo.id,changes:co,doc:ao};return Re(oo,ao._rev)&&(uo.deleted=!0),io.conflicts&&(uo.doc._conflicts=ke(oo),!uo.doc._conflicts.length&&delete uo.doc._conflicts),uo}function We(ao,oo){return ao<oo?-1:ao>oo?1:0}function ze(ao,oo){for(var io=0;io<ao.length;io++)if(!0===oo(ao[io],io))return ao[io]}function Ke(ao){return function(oo,io){oo||io[0]&&io[0].error?ao(oo||io[0]):ao(null,io.length?io[0]:io)}}function Xe(ao){for(var oo=0,io;oo<ao.length;oo++)if(io=ao[oo],io._deleted)delete io._attachments;else if(io._attachments)for(var co=Object.keys(io._attachments),uo=0,po;uo<co.length;uo++)po=co[uo],io._attachments[po]=z(io._attachments[po],["data","digest","content_type","length","revpos","stub"])}function Ge(ao,oo){var io=We(ao._id,oo._id);if(0!==io)return io;var co=ao._revisions?ao._revisions.start:0,uo=oo._revisions?oo._revisions.start:0;return We(co,uo)}function Ve(ao){var oo={},io=[];return ve(ao,function(co,uo,po,ho){var _o=uo+"-"+po;return co&&(oo[_o]=0),void 0!==ho&&io.push({from:ho,to:_o}),_o}),io.reverse(),io.forEach(function(co){oo[co.from]=void 0===oo[co.from]?1+oo[co.to]:Math.min(oo[co.from],1+oo[co.to])}),oo}function Qe(ao,oo,io){var co="limit"in oo?oo.keys.slice(oo.skip,oo.limit+oo.skip):0<oo.skip?oo.keys.slice(oo.skip):oo.keys;if(oo.descending&&co.reverse(),!co.length)return ao._allDocs({limit:0},io);var uo={offset:oo.skip};return pr.all(co.map(function(po){var ho=Zs.extend({key:po,deleted:"ok"},oo);return["limit","skip","keys"].forEach(function(_o){delete ho[_o]}),new pr(function(_o,fo){ao._allDocs(ho,function(mo,go){return mo?fo(mo):void(uo.total_rows=go.total_rows,_o(go.rows[0]||{key:po,error:"not_found"}))})})})).then(function(po){return uo.rows=po,uo})}function Ye(ao){var oo=ao._compactionQueue[0],io=oo.opts,co=oo.callback;ao.get("_local/compaction")["catch"](function(){return!1}).then(function(uo){uo&&uo.last_seq&&(io.last_seq=uo.last_seq),ao._compact(io,function(po,ho){po?co(po):co(null,ho),D.nextTick(function(){ao._compactionQueue.shift(),ao._compactionQueue.length&&Ye(ao)})})})}function Je(ao){return!("_"!==ao.charAt(0))&&ao+"is not a valid attachment name, attachment names cannot start with '_'"}function $e(){or.EventEmitter.call(this)}function Ze(){this.isReady=!1,this.failed=!1,this.queue=[]}function et(ao){ao&&O.debug&&$("error",ao)}function tt(ao,oo){function io(){po.emit("destroyed",uo)}var uo=oo.originalName,po=ao.constructor,ho=po._destructionListeners;ao.once("destroyed",io),ho.has(uo)||ho.set(uo,[]),ho.get(uo).push(function(){ao.removeListener("destroyed",io),ao.emit("destroyed",ao)})}function nt(ao,oo,io){if(!(this instanceof nt))return new nt(ao,oo,io);var co=this;if(("function"==typeof oo||"undefined"==typeof oo)&&(io=oo,oo={}),ao&&"object"===("undefined"==typeof ao?"undefined":_typeof(ao))&&(oo=ao,ao=void 0),"undefined"==typeof io)io=et;else{var uo=io;io=function(){return $("warn","Using a callback for new PouchDB()is deprecated."),uo.apply(null,arguments)}}ao=ao||oo.name,oo=B(oo),delete oo.name,this.__opts=oo;var po=io;co.auto_compaction=oo.auto_compaction,co.prefix=nt.prefix,$e.call(co),co.taskqueue=new Ze;var ho=new pr(function(_o,fo){io=function(vo,bo){return vo?fo(vo):void(delete bo.then,_o(bo))},oo=B(oo);var mo,go;return function(){try{if("string"!=typeof ao)throw go=new Error("Missing/invalid DB name"),go.code=400,go;var yo=(oo.prefix||"")+ao;if(mo=nt.parseAdapter(yo,oo),oo.originalName=ao,oo.name=mo.name,oo.adapter=oo.adapter||mo.adapter,co._adapter=oo.adapter,tr("pouchdb:adapter")("Picked adapter: "+oo.adapter),co._db_name=ao,!nt.adapters[oo.adapter])throw go=new Error("Adapter is missing"),go.code=404,go;if(!nt.adapters[oo.adapter].valid())throw go=new Error("Invalid Adapter"),go.code=404,go}catch(vo){co.taskqueue.fail(vo)}}(),go?fo(go):void(co.adapter=oo.adapter,co.replicate={},co.replicate.from=function(yo,vo,bo){return co.constructor.replicate(yo,co,vo,bo)},co.replicate.to=function(yo,vo,bo){return co.constructor.replicate(co,yo,vo,bo)},co.sync=function(yo,vo,bo){return co.constructor.sync(co,yo,vo,bo)},co.replicate.sync=co.sync,nt.adapters[oo.adapter].call(co,oo,function(yo){return yo?(co.taskqueue.fail(yo),void io(yo)):void(tt(co,oo),co.emit("created",co),nt.emit("created",oo.originalName),co.taskqueue.ready(co),io(null,co))}))});ho.then(function(_o){po(null,_o)},po),co.then=ho.then.bind(ho),co["catch"]=ho["catch"].bind(ho)}function rt(ao){return ao.reduce(function(oo,io){return oo[io]=!0,oo},{})}function at(ao){if(!/^\d+\-./.test(ao))return re(Fr);var oo=ao.indexOf("-"),io=ao.substring(0,oo),co=ao.substring(oo+1);return{prefix:parseInt(io,10),id:co}}function ot(ao,oo){for(var io=ao.start-ao.ids.length+1,co=ao.ids,uo=[co[0],oo,[]],po=1,ho=co.length;po<ho;po++)uo=[co[po],{status:"missing"},[uo]];return[{pos:io,ids:uo}]}function it(ao,oo){var po={status:"available"},io,co,uo;if(ao._deleted&&(po.deleted=!0),oo){if(ao._id||(ao._id=ge()),co=ge(32,16).toLowerCase(),ao._rev){if(uo=at(ao._rev),uo.error)return uo;ao._rev_tree=[{pos:uo.prefix,ids:[uo.id,{status:"missing"},[[co,po,[]]]]}],io=uo.prefix+1}else ao._rev_tree=[{pos:1,ids:[co,po,[]]}],io=1;}else if(ao._revisions&&(ao._rev_tree=ot(ao._revisions,po),io=ao._revisions.start,co=ao._revisions.ids[0]),!ao._rev_tree){if(uo=at(ao._rev),uo.error)return uo;io=uo.prefix,co=uo.id,ao._rev_tree=[{pos:io,ids:[co,po,[]]}]}ce(ao._id),ao._rev=io+"-"+co;var ho={metadata:{},data:{}};for(var _o in ao)if(Object.prototype.hasOwnProperty.call(ao,_o)){var fo="_"===_o[0];if(fo&&!Qr[_o]){var mo=re(Cr,_o);throw mo.message=Cr.message+": "+_o,mo}else fo&&!Yr[_o]?ho.metadata[_o.slice(1)]=ao[_o]:ho.data[_o]=ao[_o]}return ho}function dt(ao,oo){ao=ao||[],oo=oo||{};try{return new Blob(ao,oo)}catch(po){if("TypeError"!==po.name)throw po;for(var io="undefined"==typeof BlobBuilder?"undefined"==typeof MSBlobBuilder?"undefined"==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,co=new io,uo=0;uo<ao.length;uo+=1)co.append(ao[uo]);return co.getBlob(oo.type)}}function ct(ao){for(var oo=ao.length,io=new ArrayBuffer(oo),co=new Uint8Array(io),uo=0;uo<oo;uo++)co[uo]=ao.charCodeAt(uo);return io}function lt(ao,oo){return dt([ct(ao)],{type:oo})}function ut(ao,oo){return lt(Jr(ao),oo)}function pt(ao){for(var oo="",io=new Uint8Array(ao),co=io.byteLength,uo=0;uo<co;uo++)oo+=String.fromCharCode(io[uo]);return oo}function ht(ao,oo){if("undefined"==typeof FileReader)return oo(pt(new FileReaderSync().readAsArrayBuffer(ao)));var io=new FileReader,co="function"==typeof io.readAsBinaryString;io.onloadend=function(uo){var po=uo.target.result||"";return co?oo(po):void oo(pt(po))},co?io.readAsBinaryString(ao):io.readAsArrayBuffer(ao)}function _t(ao,oo){ht(ao,function(io){oo(io)})}function ft(ao,oo){_t(ao,function(io){oo($r(io))})}function mt(ao,oo){if("undefined"==typeof FileReader)return oo(new FileReaderSync().readAsArrayBuffer(ao));var io=new FileReader;io.onloadend=function(co){var uo=co.target.result||new ArrayBuffer(0);oo(uo)},io.readAsArrayBuffer(ao)}function gt(ao){return $r(ao)}function yt(ao,oo,io){return ao.webkitSlice?ao.webkitSlice(oo,io):ao.slice(oo,io)}function vt(ao,oo,io,co,uo){(0<io||co<oo.size)&&(oo=yt(oo,io,co)),mt(oo,function(po){ao.append(po),uo()})}function bt(ao,oo,io,co,uo){(0<io||co<oo.length)&&(oo=oo.substring(io,co)),ao.appendBinary(oo),uo()}function Et(ao,oo){function io(){Zr(uo)}function co(){var vo=go.end(!0),bo=gt(vo);oo(bo),go.destroy()}function uo(){var vo=mo*_o,bo=vo+_o;mo++,mo<fo?yo(go,ao,vo,bo,io):yo(go,ao,vo,bo,co)}var po="string"==typeof ao,ho=po?ao.length:ao.size,_o=Math.min(ea,ho),fo=Math.ceil(ho/_o),mo=0,go=po?new dr:new dr.ArrayBuffer,yo=po?bt:vt;uo()}function kt(ao){return dr.hash(ao)}function St(ao){try{return Jr(ao)}catch(io){var oo=re(Tr,"Attachment is not a valid base64 string");return{error:oo}}}function qt(ao,oo,io){var co=St(ao.data);return co.error?io(co.error):void(ao.length=co.length,ao.data="blob"===oo?lt(co,ao.content_type):"base64"===oo?$r(co):co,Et(co,function(uo){ao.digest="md5-"+uo,io()}))}function xt(ao,oo,io){Et(ao.data,function(co){ao.digest="md5-"+co,ao.length=ao.data.size||ao.data.length||0,"binary"===oo?_t(ao.data,function(uo){ao.data=uo,io()}):"base64"===oo?ft(ao.data,function(uo){ao.data=uo,io()}):io()})}function wt(ao,oo,io){return ao.stub?io():void("string"==typeof ao.data?qt(ao,oo,io):xt(ao,oo,io))}function Tt(ao,oo,io){function co(){uo++,ao.length===uo&&(po?io(po):io())}if(!ao.length)return io();var uo=0,po;ao.forEach(function(ho){function _o(yo){po=yo,mo++,mo===fo.length&&co()}var fo=ho.data&&ho.data._attachments?Object.keys(ho.data._attachments):[],mo=0;if(!fo.length)return co();for(var go in ho.data._attachments)ho.data._attachments.hasOwnProperty(go)&&wt(ho.data._attachments[go],oo,_o)})}function At(ao,oo,io,co,uo,po,ho,_o){if(Oe(oo.rev_tree,io.metadata.rev))return co[uo]=io,po();var fo=oo.winningRev||ye(oo),mo="deleted"in oo?oo.deleted:Re(oo,fo),go="deleted"in io.metadata?io.metadata.deleted:Re(io.metadata),yo=/^1-/.test(io.metadata.rev);if(mo&&!go&&_o&&yo){var vo=io.data;vo._rev=fo,vo._id=io.metadata.id,io=it(vo,_o)}var bo=De(oo.rev_tree,io.metadata.rev_tree[0],ao),Eo=_o&&(mo&&go||!mo&&"new_leaf"!==bo.conflicts||mo&&!go&&"new_branch"===bo.conflicts);if(Eo){var ko=re(Er);return co[uo]=ko,po()}var So=io.metadata.rev;io.metadata.rev_tree=bo.tree,io.stemmedRevs=bo.stemmedRevs||[],oo.rev_map&&(io.metadata.rev_map=oo.rev_map);var qo=ye(io.metadata),xo=Re(io.metadata,qo),wo=mo===xo?0:mo<xo?-1:1,To;To=So===qo?xo:Re(io.metadata,So),ho(io,qo,xo,To,!0,wo,uo,po)}function Lt(ao){return"missing"===ao.metadata.rev_tree[0].ids[1].status}function Ct(ao,oo,io,co,uo,po,ho,_o,fo){function mo(ko,So,qo){var xo=ye(ko.metadata),wo=Re(ko.metadata,xo);if("was_delete"in _o&&wo)return po[So]=re(br,"deleted"),qo();var To=yo&&Lt(ko);if(To){var Ao=re(Er);return po[So]=Ao,qo()}var Lo=wo?0:1;ho(ko,xo,wo,wo,!1,Lo,So,qo)}function go(){++bo===Eo&&fo&&fo()}ao=ao||1e3;var yo=_o.new_edits,vo=new rr.Map,bo=0,Eo=oo.length;oo.forEach(function(ko,So){if(ko._id&&Pe(ko._id)){var qo=ko._deleted?"_removeLocal":"_putLocal";return void io[qo](ko,{ctx:uo},function(wo,To){po[So]=wo||To,go()})}var xo=ko.metadata.id;vo.has(xo)?(Eo--,vo.get(xo).push([ko,So])):vo.set(xo,[[ko,So]])}),vo.forEach(function(ko,So){function qo(){++wo<ko.length?xo():go()}function xo(){var To=ko[wo],Ao=To[0],Lo=To[1];if(co.has(So))At(ao,co.get(So),Ao,po,Lo,qo,ho,yo);else{var Co=De([],Ao.metadata.rev_tree[0],ao);Ao.metadata.rev_tree=Co.tree,Ao.stemmedRevs=Co.stemmedRevs||[],mo(Ao,Lo,qo)}}var wo=0;xo()})}function jt(ao){try{return JSON.parse(ao)}catch(oo){return cr.parse(ao)}}function It(ao){return 5e4>ao.length?JSON.parse(ao):jt(ao)}function Dt(ao){try{return JSON.stringify(ao)}catch(oo){return cr.stringify(ao)}}function Ot(ao,oo,io,co){try{ao.apply(oo,io)}catch(uo){co.emit("error",uo)}}function Nt(ao){if(!ca.running&&ca.queue.length){ca.running=!0;var oo=ca.queue.shift();oo.action(function(io,co){Ot(oo.callback,this,[io,co],ao),ca.running=!1,D.nextTick(function(){Nt(ao)})})}}function Rt(ao){return function(oo){var io="unknown_error";oo.target&&oo.target.error&&(io=oo.target.error.name||oo.target.error.message),ao(re(Or,io,oo.type))}}function Pt(ao,oo,io){return{data:Dt(ao),winningRev:oo,deletedOrLocal:io?"1":"0",seq:ao.seq,id:ao.id}}function Ft(ao){if(!ao)return null;var oo=It(ao.data);return oo.winningRev=ao.winningRev,oo.deleted="1"===ao.deletedOrLocal,oo.seq=ao.seq,oo}function Mt(ao){if(!ao)return ao;var oo=ao._doc_id_rev.lastIndexOf(":");return ao._id=ao._doc_id_rev.substring(0,oo-1),ao._rev=ao._doc_id_rev.substring(oo+1),delete ao._doc_id_rev,ao}function Bt(ao,oo,io,co){io?ao?"string"==typeof ao?co(ut(ao,oo)):co(ao):co(dt([""],{type:oo})):ao?"string"==typeof ao?co(ao):ht(ao,function(uo){co($r(uo))}):co("")}function Ut(ao,oo,io,co){function uo(){++_o===ho.length&&co&&co()}function po(fo,mo){var go=fo._attachments[mo],yo=go.digest,vo=io.objectStore(ra).get(yo);vo.onsuccess=function(bo){go.body=bo.target.result.body,uo()}}var ho=Object.keys(ao._attachments||{});if(!ho.length)return co&&co();var _o=0;ho.forEach(function(fo){oo.attachments&&oo.include_docs?po(ao,fo):(ao._attachments[fo].stub=!0,uo())})}function Ht(ao,oo){return pr.all(ao.map(function(io){if(io.doc&&io.doc._attachments){var co=Object.keys(io.doc._attachments);return pr.all(co.map(function(uo){var po=io.doc._attachments[uo];if("body"in po){var ho=po.body,_o=po.content_type;return new pr(function(fo){Bt(ho,_o,oo,function(mo){io.doc._attachments[uo]=Zs.extend(z(po,["digest","content_type"]),{data:mo}),fo()})})}}))}}))}function Wt(ao,oo,io){function co(){mo--,mo||uo()}function uo(){po.length&&po.forEach(function(go){var yo=fo.index("digestSeq").count(IDBKeyRange.bound(go+"::",go+"::\uFFFF",!1,!1));yo.onsuccess=function(vo){var bo=vo.target.result;bo||_o["delete"](go)}})}var po=[],ho=io.objectStore(sa),_o=io.objectStore(ra),fo=io.objectStore(aa),mo=ao.length;ao.forEach(function(go){var yo=ho.index("_doc_id_rev");yo.getKey(oo+"::"+go).onsuccess=function(bo){var Eo=bo.target.result;if("number"!=typeof Eo)return co();ho["delete"](Eo);var ko=fo.index("seq").openCursor(IDBKeyRange.only(Eo));ko.onsuccess=function(So){var qo=So.target.result;if(qo){var xo=qo.value.digestSeq.split("::")[0];po.push(xo),fo["delete"](qo.primaryKey),qo["continue"]()}else co()}}})}function zt(ao,oo,io){try{return{txn:ao.transaction(oo,io)}}catch(co){return{error:co}}}function Kt(ao,oo,io,co,uo,po,ho){function _o(){var Uo=zt(uo,[na,sa,ra,ia,aa],"readwrite");return Uo.error?ho(Uo.error):void(wo=Uo.txn,wo.onabort=Rt(ho),wo.ontimeout=Rt(ho),wo.oncomplete=go,To=wo.objectStore(na),Ao=wo.objectStore(sa),Lo=wo.objectStore(ra),Co=wo.objectStore(aa),vo(function(Ho){return Ho?(Fo=!0,ho(Ho)):void mo()}))}function fo(){Ct(ao.revs_limit,xo,co,Po,wo,Ro,bo,io)}function mo(){function Bo(){++Ho===xo.length&&fo()}function Uo(Go){var Vo=Ft(Go.target.result);Vo&&Po.set(Vo.id,Vo),Bo()}if(xo.length)for(var Ho=0,Wo=0,zo=xo.length,Ko;Wo<zo;Wo++){if(Ko=xo[Wo],Ko._id&&Pe(Ko._id)){Bo();continue}var Xo=To.get(Ko.metadata.id);Xo.onsuccess=Uo}}function go(){Fo||(po.notify(co._meta.name),co._meta.docCount+=Io,ho(null,Ro))}function yo(Bo,Uo){var Ho=Lo.get(Bo);Ho.onsuccess=function(Wo){if(!Wo.target.result){var zo=re(Br,"unknown stub attachment with digest "+Bo);zo.status=412,Uo(zo)}else Uo()}}function vo(Bo){function Uo(){++Wo===Ho.length&&Bo(zo)}var Ho=[];if(xo.forEach(function(Ko){Ko.data&&Ko.data._attachments&&Object.keys(Ko.data._attachments).forEach(function(Xo){var Go=Ko.data._attachments[Xo];Go.stub&&Ho.push(Go.digest)})}),!Ho.length)return Bo();var Wo=0,zo;Ho.forEach(function(Ko){yo(Ko,function(Xo){Xo&&!zo&&(zo=Xo),Uo()})})}function bo(Bo,Uo,Ho,Wo,zo,Ko,Xo,Go){Io+=Ko,Bo.metadata.winningRev=Uo,Bo.metadata.deleted=Ho;var Vo=Bo.data;Vo._id=Bo.metadata.id,Vo._rev=Bo.metadata.rev,Wo&&(Vo._deleted=!0);var Qo=Vo._attachments&&Object.keys(Vo._attachments).length;return Qo?ko(Bo,Uo,Ho,zo,Xo,Go):void Eo(Bo,Uo,Ho,zo,Xo,Go)}function Eo(Bo,Uo,Ho,Wo,zo,Ko){function Xo($o){var Zo=Bo.stemmedRevs||[];Wo&&co.auto_compaction&&(Zo=Zo.concat(Se(Bo.metadata))),Zo&&Zo.length&&Wt(Zo,Bo.metadata.id,wo),Yo.seq=$o.target.result,delete Yo.rev;var ei=Pt(Yo,Uo,Ho),ti=To.put(ei);ti.onsuccess=Vo}function Vo(){Ro[zo]={ok:!0,id:Yo.id,rev:Uo},Po.set(Bo.metadata.id,Bo.metadata),So(Bo,Yo.seq,Ko)}var Qo=Bo.data,Yo=Bo.metadata;Qo._doc_id_rev=Yo.id+"::"+Yo.rev,delete Qo._id,delete Qo._rev;var Jo=Ao.put(Qo);Jo.onsuccess=Xo,Jo.onerror=function($o){$o.preventDefault(),$o.stopPropagation();var Zo=Ao.index("_doc_id_rev"),ei=Zo.getKey(Qo._doc_id_rev);ei.onsuccess=function(ti){var ni=Ao.put(Qo,ti.target.result);ni.onsuccess=Xo}}}function ko(Bo,Uo,Ho,Wo,zo,Ko){function Xo(){Qo===Yo.length&&Eo(Bo,Uo,Ho,Wo,zo,Ko)}function Go(){Qo++,Xo()}var Vo=Bo.data,Qo=0,Yo=Object.keys(Vo._attachments);Yo.forEach(function(Jo){var $o=Bo.data._attachments[Jo];if(!$o.stub){var Zo=$o.data;delete $o.data,$o.revpos=parseInt(Uo,10);var ei=$o.digest;qo(ei,Zo,Go)}else Qo++,Xo()})}function So(Bo,Uo,Ho){function Wo(){++Ko===Xo.length&&Ho()}function zo(Vo){var Qo=Bo.data._attachments[Vo].digest,Yo=Co.put({seq:Uo,digestSeq:Qo+"::"+Uo});Yo.onsuccess=Wo,Yo.onerror=function(Jo){Jo.preventDefault(),Jo.stopPropagation(),Wo()}}var Ko=0,Xo=Object.keys(Bo.data._attachments||{});if(!Xo.length)return Ho();for(var Go=0;Go<Xo.length;Go++)zo(Xo[Go])}function qo(Bo,Uo,Ho){var Wo=Lo.count(Bo);Wo.onsuccess=function(zo){var Ko=zo.target.result;if(Ko)return Ho();var Go=Lo.put({digest:Bo,body:Uo});Go.onsuccess=Ho}}for(var xo=oo.docs,Io=0,Do=0,Oo=xo.length,wo,To,Ao,Lo,Co,jo,No;Do<Oo;Do++)(No=xo[Do],!(No._id&&Pe(No._id)))&&(No=xo[Do]=it(No,io.new_edits),No.error&&!jo&&(jo=No));if(jo)return ho(jo);var Ro=Array(xo.length),Po=new rr.Map,Fo=!1,Mo=co._meta.blobSupport?"blob":"base64";Tt(xo,Mo,function(Bo){return Bo?ho(Bo):void _o()})}function Xt(ao,oo,io,co,uo){try{if(ao&&oo)return uo?IDBKeyRange.bound(oo,ao,!io,!1):IDBKeyRange.bound(ao,oo,!1,!io);if(ao)return uo?IDBKeyRange.upperBound(ao):IDBKeyRange.lowerBound(ao);if(oo)return uo?IDBKeyRange.lowerBound(oo,!io):IDBKeyRange.upperBound(oo,!io);if(co)return IDBKeyRange.only(co)}catch(po){return{error:po}}return null}function Gt(ao,oo,io,co){return"DataError"===io.name&&0===io.code?co(null,{total_rows:ao._meta.docCount,offset:oo.skip,rows:[]}):void co(re(Or,io.name,io.message))}function Vt(ao,oo,io,co){function uo(ho,_o){function fo(Po,Fo,Mo){var Bo=Po.id+"::"+Mo;Oo.get(Bo).onsuccess=function(Ho){Fo.doc=Mt(Ho.target.result),ho.conflicts&&(Fo.doc._conflicts=ke(Po)),Ut(Fo.doc,ho,Co)}}function mo(Po,Fo,Mo){var Bo={id:Mo.id,key:Mo.id,value:{rev:Fo}},Uo=Mo.deleted;if("ok"===ho.deleted)No.push(Bo),Uo?(Bo.value.deleted=!0,Bo.doc=null):ho.include_docs&&fo(Mo,Bo,Fo);else if(!Uo&&0>=So--&&(No.push(Bo),ho.include_docs&&fo(Mo,Bo,Fo),0==--qo))return;Po["continue"]()}function yo(){_o(null,{total_rows:Ro,offset:ho.skip,rows:No})}var bo=!!("startkey"in ho)&&ho.startkey,Eo=!!("endkey"in ho)&&ho.endkey,ko=!!("key"in ho)&&ho.key,So=ho.skip||0,qo="number"==typeof ho.limit?ho.limit:-1,xo=!1!==ho.inclusive_end,wo="descending"in ho&&ho.descending?"prev":null,To=Xt(bo,Eo,xo,ko,wo);if(To&&To.error)return Gt(oo,ho,To.error,_o);var Ao=[na,sa];ho.attachments&&Ao.push(ra);var Lo=zt(io,Ao,"readonly");if(Lo.error)return _o(Lo.error);var Co=Lo.txn,jo=Co.objectStore(na),Io=Co.objectStore(sa),Do=wo?jo.openCursor(To,wo):jo.openCursor(To),Oo=Io.index("_doc_id_rev"),No=[],Ro=0;Co.oncomplete=function(){ho.attachments?Ht(No,ho.binary).then(yo):yo()},Do.onsuccess=function(Po){Ro=oo._meta.docCount;var Fo=Po.target.result;if(Fo){var Mo=Ft(Fo.value),Bo=Mo.winningRev;mo(Fo,Bo,Mo)}}}(function(ho,_o){return 0===ho.limit?_o(null,{total_rows:oo._meta.docCount,offset:ho.skip,rows:[]}):void uo(ho,_o)})(ao,co)}function Qt(ao){return new pr(function(oo){var io=dt([""]);ao.objectStore(da).put(io,"key"),ao.onabort=function(co){co.preventDefault(),co.stopPropagation(),oo(!1)},ao.oncomplete=function(){var co=navigator.userAgent.match(/Chrome\/(\d+)/),uo=navigator.userAgent.match(/Edge\//);oo(uo||!co||43<=parseInt(co[1],10))}})["catch"](function(){return!1})}function Yt(ao,oo){var io=this;ca.queue.push({action:function(uo){Jt(io,ao,uo)},callback:oo}),Nt(io.constructor)}function Jt(ao,oo,io){function co(Eo){var ko=Eo.createObjectStore(na,{keyPath:"id"});Eo.createObjectStore(sa,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),Eo.createObjectStore(ra,{keyPath:"digest"}),Eo.createObjectStore(oa,{keyPath:"id",autoIncrement:!1}),Eo.createObjectStore(da),ko.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),Eo.createObjectStore(ia,{keyPath:"_id"});var So=Eo.createObjectStore(aa,{autoIncrement:!0});So.createIndex("seq","seq"),So.createIndex("digestSeq","digestSeq",{unique:!0})}function uo(Eo,ko){var So=Eo.objectStore(na);So.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),So.openCursor().onsuccess=function(qo){var xo=qo.target.result;if(xo){var wo=xo.value,To=Re(wo);wo.deletedOrLocal=To?"1":"0",So.put(wo),xo["continue"]()}else ko()}}function po(Eo){Eo.createObjectStore(ia,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function ho(Eo,ko){var So=Eo.objectStore(ia),qo=Eo.objectStore(na),xo=Eo.objectStore(sa),wo=qo.openCursor();wo.onsuccess=function(To){var Ao=To.target.result;if(Ao){var Lo=Ao.value,Co=Lo.id,jo=Pe(Co),Io=ye(Lo);if(jo){var Ro=xo.index("_doc_id_rev"),Po=IDBKeyRange.bound(Co+"::",Co+"::~",!1,!1),Fo=Ro.openCursor(Po);Fo.onsuccess=function(Mo){if(Fo=Mo.target.result,!Fo)qo["delete"](Ao.primaryKey),Ao["continue"]();else{var Bo=Fo.value;Bo._doc_id_rev===Co+"::"+Io&&So.put(Bo),xo["delete"](Fo.primaryKey),Fo["continue"]()}}}else Ao["continue"]()}else ko&&ko()}}function _o(Eo){var ko=Eo.createObjectStore(aa,{autoIncrement:!0});ko.createIndex("seq","seq"),ko.createIndex("digestSeq","digestSeq",{unique:!0})}function fo(Eo,ko){var So=Eo.objectStore(sa),qo=Eo.objectStore(ra),xo=Eo.objectStore(aa),wo=qo.count();wo.onsuccess=function(To){var Ao=To.target.result;return Ao?void(So.openCursor().onsuccess=function(Lo){var Co=Lo.target.result;if(!Co)return ko();for(var jo=Co.value,Io=Co.primaryKey,Do=Object.keys(jo._attachments||{}),Oo={},No=0,Ro;No<Do.length;No++)Ro=jo._attachments[Do[No]],Oo[Ro.digest]=!0;var Po=Object.keys(Oo);for(No=0;No<Po.length;No++){var Fo=Po[No];xo.put({seq:Io,digestSeq:Fo+"::"+Io})}Co["continue"]()}):ko()}}function mo(Eo){function ko(wo){return wo.data?Ft(wo):(wo.deleted="1"===wo.deletedOrLocal,wo)}var So=Eo.objectStore(sa),qo=Eo.objectStore(na),xo=qo.openCursor();xo.onsuccess=function(wo){function To(){var jo=Co.id+"::",Io=Co.id+"::\uFFFF",Do=So.index("_doc_id_rev").openCursor(IDBKeyRange.bound(jo,Io)),Oo=0;Do.onsuccess=function(No){var Ro=No.target.result;if(!Ro)return Co.seq=Oo,Ao();var Po=Ro.primaryKey;Po>Oo&&(Oo=Po),Ro["continue"]()}}function Ao(){var jo=Pt(Co,Co.winningRev,Co.deleted),Io=qo.put(jo);Io.onsuccess=function(){Lo["continue"]()}}var Lo=wo.target.result;if(Lo){var Co=ko(Lo.value);return Co.winningRev=Co.winningRev||ye(Co),Co.seq?Ao():void To()}}}var go=oo.name,yo=null;ao._meta=null,ao.type=function(){return"idb"},ao._id=H(function(Eo){Eo(null,ao._meta.instanceId)}),ao._bulkDocs=function(ko,So,qo){Kt(oo,ko,So,ao,yo,ha,qo)},ao._get=function(ko,So,qo){function xo(){qo(Ao,{doc:wo,metadata:To,ctx:Lo})}var wo,To,Ao,Lo=So.ctx;if(!Lo){var Co=zt(yo,[na,sa,ra],"readonly");if(Co.error)return qo(Co.error);Lo=Co.txn}Lo.objectStore(na).get(ko).onsuccess=function(jo){if(To=Ft(jo.target.result),!To)return Ao=re(br,"missing"),xo();if(Re(To)&&!So.rev)return Ao=re(br,"deleted"),xo();var Io=Lo.objectStore(sa),Do=So.rev||To.winningRev,Oo=To.id+"::"+Do;Io.index("_doc_id_rev").get(Oo).onsuccess=function(No){return wo=No.target.result,wo&&(wo=Mt(wo)),wo?void xo():(Ao=re(br,"missing"),xo())}}},ao._getAttachment=function(Eo,ko,So,qo,xo){var wo;if(qo.ctx)wo=qo.ctx;else{var To=zt(yo,[na,sa,ra],"readonly");if(To.error)return xo(To.error);wo=To.txn}var Ao=So.digest,Lo=So.content_type;wo.objectStore(ra).get(Ao).onsuccess=function(Co){var jo=Co.target.result.body;Bt(jo,Lo,qo.binary,function(Io){xo(null,Io)})}},ao._info=function(ko){if(null==yo||!la.has(go)){var So=new Error("db isn't open");return So.id="idbNull",ko(So)}var qo,xo,wo=zt(yo,[sa],"readonly");if(wo.error)return ko(wo.error);var To=wo.txn,Ao=To.objectStore(sa).openCursor(null,"prev");Ao.onsuccess=function(Lo){var Co=Lo.target.result;qo=Co?Co.key:0,xo=ao._meta.docCount},To.oncomplete=function(){ko(null,{doc_count:xo,update_seq:qo,idb_attachment_format:ao._meta.blobSupport?"binary":"base64"})}},ao._allDocs=function(ko,So){Vt(ko,ao,yo,So)},ao._changes=function(Eo){function ko(Mo){function Bo(){return Ko.seq===zo?(Ao=zo,Ko.winningRev===Wo._rev?Ho(Wo):void Uo()):Mo["continue"]()}function Uo(){var Xo=Wo._id+"::"+Ko.winningRev,Go=Fo.get(Xo);Go.onsuccess=function(Vo){Ho(Mt(Vo.target.result))}}function Ho(Xo){var Go=Eo.processChange(Xo,Ko,Eo);Go.seq=Ko.seq;var Vo=Do(Go);return"object"===("undefined"==typeof Vo?"undefined":_typeof(Vo))?Eo.complete(Vo):void(Vo&&(Io++,Co&&jo.push(Go),Eo.attachments&&Eo.include_docs?Ut(Xo,Eo,No,function(){Ht([Go],Eo.binary).then(function(){Eo.onChange(Go)})}):Eo.onChange(Go)),Io!==Lo&&Mo["continue"]())}var Wo=Mt(Mo.value),zo=Mo.key;if(To&&!To.has(Wo._id))return Mo["continue"]();var Ko;return Ko=Oo.get(Wo._id),Ko?Bo():void(Po.get(Wo._id).onsuccess=function(Xo){Ko=Ft(Xo.target.result),Oo.set(Wo._id,Ko),Bo()})}function So(Mo){var Bo=Mo.target.result;Bo&&ko(Bo)}function xo(){function Mo(){Eo.complete(null,{results:jo,last_seq:Ao})}!Eo.continuous&&Eo.attachments?Ht(jo).then(Mo):Mo()}if(Eo=B(Eo),Eo.continuous){var wo=go+":"+ge();return ha.addListener(go,wo,ao,Eo),ha.notify(go),{cancel:function(){ha.removeListener(go,wo)}}}var To=Eo.doc_ids&&new rr.Set(Eo.doc_ids);Eo.since=Eo.since||0;var Ao=Eo.since,Lo="limit"in Eo?Eo.limit:-1;0===Lo&&(Lo=1);var Co="return_docs"in Eo?Eo.return_docs:!("returnDocs"in Eo)||Eo.returnDocs;var jo=[],Io=0,Do=ie(Eo),Oo=new rr.Map,No,Ro,Po,Fo;(function(){var Mo=[na,sa];Eo.attachments&&Mo.push(ra);var Bo=zt(yo,Mo,"readonly");if(Bo.error)return Eo.complete(Bo.error);No=Bo.txn,No.onabort=Rt(Eo.complete),No.oncomplete=xo,Ro=No.objectStore(sa),Po=No.objectStore(na),Fo=Ro.index("_doc_id_rev");var Uo;Uo=Eo.descending?Ro.openCursor(null,"prev"):Ro.openCursor(IDBKeyRange.lowerBound(Eo.since,!0)),Uo.onsuccess=So})()},ao._close=function(Eo){return null==yo?Eo(re(xr)):void(yo.close(),la["delete"](go),yo=null,Eo())},ao._getRevisionTree=function(Eo,ko){var So=zt(yo,[na],"readonly");if(So.error)return ko(So.error);var qo=So.txn,xo=qo.objectStore(na).get(Eo);xo.onsuccess=function(wo){var To=Ft(wo.target.result);To?ko(null,To.rev_tree):ko(re(br))}},ao._doCompaction=function(Eo,ko,So){var xo=zt(yo,[na,sa,ra,aa],"readwrite");if(xo.error)return So(xo.error);var wo=xo.txn,To=wo.objectStore(na);To.get(Eo).onsuccess=function(Ao){var Lo=Ft(Ao.target.result);ve(Lo.rev_tree,function(Io,Do,Oo,No,Ro){-1!==ko.indexOf(Do+"-"+Oo)&&(Ro.status="missing")}),Wt(ko,Eo,wo);var Co=Lo.winningRev,jo=Lo.deleted;wo.objectStore(na).put(Pt(Lo,Co,jo))},wo.onabort=Rt(So),wo.oncomplete=function(){So()}},ao._getLocal=function(Eo,ko){var So=zt(yo,[ia],"readonly");if(So.error)return ko(So.error);var qo=So.txn,xo=qo.objectStore(ia).get(Eo);xo.onerror=Rt(ko),xo.onsuccess=function(wo){var To=wo.target.result;To?(delete To._doc_id_rev,ko(null,To)):ko(re(br))}},ao._putLocal=function(Eo,ko,So){"function"==typeof ko&&(So=ko,ko={}),delete Eo._revisions;var qo=Eo._rev,xo=Eo._id;Eo._rev=qo?"0-"+(parseInt(qo.split("-")[1],10)+1):"0-1";var wo=ko.ctx,To;if(!wo){var Ao=zt(yo,[ia],"readwrite");if(Ao.error)return So(Ao.error);wo=Ao.txn,wo.onerror=Rt(So),wo.oncomplete=function(){To&&So(null,To)}}var Lo=wo.objectStore(ia),Co;qo?(Co=Lo.get(xo),Co.onsuccess=function(jo){var Io=jo.target.result;if(!Io||Io._rev!==qo)So(re(Er));else{var Do=Lo.put(Eo);Do.onsuccess=function(){To={ok:!0,id:Eo._id,rev:Eo._rev},ko.ctx&&So(null,To)}}}):(Co=Lo.add(Eo),Co.onerror=function(jo){So(re(Er)),jo.preventDefault(),jo.stopPropagation()},Co.onsuccess=function(){To={ok:!0,id:Eo._id,rev:Eo._rev},ko.ctx&&So(null,To)})},ao._removeLocal=function(Eo,ko,So){"function"==typeof ko&&(So=ko,ko={});var qo=ko.ctx;if(!qo){var xo=zt(yo,[ia],"readwrite");if(xo.error)return So(xo.error);qo=xo.txn,qo.oncomplete=function(){wo&&So(null,wo)}}var wo,To=Eo._id,Ao=qo.objectStore(ia),Lo=Ao.get(To);Lo.onerror=Rt(So),Lo.onsuccess=function(Co){var jo=Co.target.result;jo&&jo._rev===Eo._rev?(Ao["delete"](To),wo={ok:!0,id:To,rev:"0-0"},ko.ctx&&So(null,wo)):So(re(br))}},ao._destroy=function(Eo,ko){ha.removeAllListeners(go);var So=_a.get(go);So&&So.result&&(So.result.close(),la["delete"](go));var qo=indexedDB.deleteDatabase(go);qo.onsuccess=function(){_a["delete"](go),Q()&&go in localStorage&&delete localStorage[go],ko(null,{ok:!0})},qo.onerror=Rt(ko)};var vo=la.get(go);if(vo)return yo=vo.idb,ao._meta=vo.global,void D.nextTick(function(){io(null,ao)});var bo;bo=oo.storage?$t(go,oo.storage):indexedDB.open(go,ta),_a.set(go,bo),bo.onupgradeneeded=function(Eo){function ko(){var To=xo[wo-1];wo++,To&&To(qo,ko)}var So=Eo.target.result;if(1>Eo.oldVersion)return co(So);var qo=Eo.currentTarget.transaction;3>Eo.oldVersion&&po(So),4>Eo.oldVersion&&_o(So);var xo=[uo,ho,fo,mo],wo=Eo.oldVersion;ko()},bo.onsuccess=function(Eo){yo=Eo.target.result,yo.onversionchange=function(){yo.close(),la["delete"](go)},yo.onabort=function(To){$("error","Database has a global failure",To.target.error),yo.close(),la["delete"](go)};var ko=yo.transaction([oa,da,na],"readwrite"),So=ko.objectStore(oa).get(oa),qo=null,xo=null,wo=null;So.onsuccess=function(To){var Ao=function(){null==qo||null==xo||null==wo||(ao._meta={name:go,instanceId:wo,blobSupport:qo,docCount:xo},la.set(go,{idb:yo,global:ao._meta}),io(null,ao))},Lo=To.target.result||{id:oa};go+"_id"in Lo?(wo=Lo[go+"_id"],Ao()):(wo=ge(),Lo[go+"_id"]=wo,ko.objectStore(oa).put(Lo).onsuccess=function(){Ao()}),pa||(pa=Qt(ko)),pa.then(function(jo){qo=jo,Ao()});var Co=ko.objectStore(na).index("deletedOrLocal");Co.count(IDBKeyRange.only("0")).onsuccess=function(jo){xo=jo.target.result,Ao()}}},bo.onerror=function(){var Eo="Failed to open indexedDB, are you in private browsing mode?";$("error",Eo),io(re(Or,Eo))}}function $t(ao,oo){try{return indexedDB.open(ao,{version:ta,storage:oo})}catch(io){return indexedDB.open(ao,ta)}}function en(ao){return decodeURIComponent(escape(ao))}function tn(ao){return 65>ao?ao-48:ao-55}function nn(ao,oo,io){for(var co="";oo<io;)co+=String.fromCharCode(tn(ao.charCodeAt(oo++))<<4|tn(ao.charCodeAt(oo++)));return co}function sn(ao,oo,io){for(var co="";oo<io;)co+=String.fromCharCode(tn(ao.charCodeAt(oo+2))<<12|tn(ao.charCodeAt(oo+3))<<8|tn(ao.charCodeAt(oo))<<4|tn(ao.charCodeAt(oo+1))),oo+=4;return co}function rn(ao,oo){return"UTF-8"===oo?en(nn(ao,0,ao.length)):sn(ao,0,ao.length)}function an(ao){return"'"+ao+"'"}function on(ao){return ao.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01")}function dn(ao){return ao.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02")}function cn(ao){return delete ao._id,delete ao._rev,JSON.stringify(ao)}function ln(ao,oo,io){return ao=JSON.parse(ao),ao._id=oo,ao._rev=io,ao}function un(ao){for(var oo="(";ao--;)oo+="?",ao&&(oo+=",");return oo+")"}function pn(ao,oo,io,co,uo){return"SELECT "+ao+" FROM "+("string"==typeof oo?oo:oo.join(" JOIN "))+(io?" ON "+io:"")+(co?" WHERE "+("string"==typeof co?co:co.join(" AND ")):"")+(uo?" ORDER BY "+uo:"")}function hn(ao,oo,io){function co(){++po===ao.length&&uo()}function uo(){if(ho.length){var _o="SELECT DISTINCT digest AS digest FROM "+Ea+" WHERE seq IN "+un(ho.length);io.executeSql(_o,ho,function(fo,mo){for(var go=[],yo=0;yo<mo.rows.length;yo++)go.push(mo.rows.item(yo).digest);if(go.length){var vo="DELETE FROM "+Ea+" WHERE seq IN ("+ho.map(function(){return"?"}).join(",")+")";fo.executeSql(vo,ho,function(bo){var Eo="SELECT digest FROM "+Ea+" WHERE digest IN ("+go.map(function(){return"?"}).join(",")+")";bo.executeSql(Eo,go,function(ko,So){for(var qo=new rr.Set,xo=0;xo<So.rows.length;xo++)qo.add(So.rows.item(xo).digest);go.forEach(function(wo){qo.has(wo)||(ko.executeSql("DELETE FROM "+Ea+" WHERE digest=?",[wo]),ko.executeSql("DELETE FROM "+ya+" WHERE digest=?",[wo]))})})})}})}}if(ao.length){var po=0,ho=[];ao.forEach(function(_o){io.executeSql("SELECT seq FROM "+ga+" WHERE doc_id=? AND rev=?",[oo,_o],function(mo,go){if(!go.rows.length)return co();var yo=go.rows.item(0).seq;ho.push(yo),mo.executeSql("DELETE FROM "+ga+" WHERE seq=?",[yo],co)})})}}function _n(ao){return function(oo){$("error","WebSQL threw an error",oo);var io=oo&&oo.constructor.toString().match(/function ([^\(]+)/),co=io&&io[1]||oo.type,uo=oo.target||oo.message;ao(re(Nr,uo,co))}}function mn(ao){if("size"in ao)return 1e6*ao.size;var oo="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return oo?5e6:1}function gn(ao,oo,io,co,uo,po,ho){function _o(){return Ao?ho(Ao):void(po.notify(co._name),co._docCount=-1,ho(null,wo))}function fo(Lo,Co){xo.executeSql("SELECT count(*) as cnt FROM "+ya+" WHERE digest=?",[Lo],function(Io,Do){if(0===Do.rows.item(0).cnt){var Oo=re(Br,"unknown stub attachment with digest "+Lo);Co(Oo)}else Co()})}function mo(Lo){function Co(){++Io===jo.length&&Lo(Do)}var jo=[];if(So.forEach(function(Oo){Oo.data&&Oo.data._attachments&&Object.keys(Oo.data._attachments).forEach(function(No){var Ro=Oo.data._attachments[No];Ro.stub&&jo.push(Ro.digest)})}),!jo.length)return Lo();var Io=0,Do;jo.forEach(function(Oo){fo(Oo,function(No){No&&!Do&&(Do=No),Co()})})}function go(Lo,Co,jo,Io,Do,Oo,No,Ro){function Po(){function zo($o,Zo){function ei(){return++ni===si.length&&Zo(),!1}function ti(oi){var ci=[Ko._attachments[oi].digest,$o];xo.executeSql("INSERT INTO "+Ea+" (digest, seq) VALUES (?,?)",ci,ei,ei)}var ni=0,si=Object.keys(Ko._attachments||{});if(!si.length)return Zo();for(var ri=0;ri<si.length;ri++)ti(si[ri])}var Ko=Lo.data,Xo=Io?1:0,Go=Ko._id,Vo=Ko._rev,Qo=cn(Ko);xo.executeSql("INSERT INTO "+ga+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",[Go,Vo,Qo,Xo],function($o,Zo){var ei=Zo.insertId;zo(ei,function(){Bo($o,ei)})},function(){var $o=pn("seq",ga,null,"doc_id=? AND rev=?");return xo.executeSql($o,[Go,Vo],function(Zo,ei){var ti=ei.rows.item(0).seq;Zo.executeSql("UPDATE "+ga+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",[Qo,Xo,Go,Vo],function(ri){zo(ti,function(){Bo(ri,ti)})})}),!1})}function Fo(zo){Uo||(zo?(Uo=zo,Ro(Uo)):Ho===Wo.length&&Po())}function Mo(zo){Ho++,Fo(zo)}function Bo(zo,Ko){var Xo=Lo.metadata.id,Go=Lo.stemmedRevs||[];Do&&co.auto_compaction&&(Go=Se(Lo.metadata).concat(Go)),Go.length&&hn(Go,Xo,zo),Lo.metadata.seq=Ko,delete Lo.metadata.rev;var Vo=Do?"UPDATE "+ma+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+ga+" WHERE doc_id="+ma+".id AND rev=?) WHERE id=?":"INSERT INTO "+ma+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",Qo=Dt(Lo.metadata),Yo=Do?[Qo,Ko,Co,Xo]:[Xo,Ko,Ko,Qo];zo.executeSql(Vo,Yo,function(){wo[No]={ok:!0,id:Lo.metadata.id,rev:Co},To.set(Xo,Lo.metadata),Ro()})}var Uo=null,Ho=0;Lo.data._id=Lo.metadata.id,Lo.data._rev=Lo.metadata.rev;var Wo=Object.keys(Lo.data._attachments||{});Io&&(Lo.data._deleted=!0),Wo.forEach(function(zo){var Ko=Lo.data._attachments[zo];if(!Ko.stub){var Xo=Ko.data;delete Ko.data,Ko.revpos=parseInt(Co,10);var Go=Ko.digest;bo(Go,Xo,Mo)}else Ho++,Fo()}),Wo.length||Po()}function yo(){Ct(ao.revs_limit,So,co,To,xo,wo,go,io)}function vo(Lo){function Co(){++jo===So.length&&Lo()}if(!So.length)return Lo();var jo=0;So.forEach(function(Io){if(Io._id&&Pe(Io._id))return Co();var Do=Io.metadata.id;xo.executeSql("SELECT json FROM "+ma+" WHERE id = ?",[Do],function(Oo,No){if(No.rows.length){var Ro=It(No.rows.item(0).json);To.set(Do,Ro)}Co()})})}function bo(Lo,Co,jo){var Io="SELECT digest FROM "+ya+" WHERE digest=?";xo.executeSql(Io,[Lo],function(Do,Oo){return Oo.rows.length?jo():void(Io="INSERT INTO "+ya+" (digest, body, escaped) VALUES (?,?,1)",Do.executeSql(Io,[Lo,on(Co)],function(){jo()},function(){return jo(),!1}))})}var Eo=io.new_edits,ko=oo.docs,So=ko.map(function(Lo){if(Lo._id&&Pe(Lo._id))return Lo;var Co=it(Lo,Eo);return Co}),qo=So.filter(function(Lo){return Lo.error});if(qo.length)return ho(qo[0]);var xo,wo=Array(So.length),To=new rr.Map,Ao;Tt(So,"binary",function(Lo){return Lo?ho(Lo):void uo.transaction(function(Co){xo=Co,mo(function(jo){jo?Ao=jo:vo(yo)})},_n(ho),_o)})}function yn(ao){return ao.websql(ao.name,ao.version,ao.description,ao.size)}function vn(ao){try{return{db:yn(ao)}}catch(oo){return{error:oo}}}function bn(ao){var oo=ka.get(ao.name);return oo||(oo=vn(ao),ka.set(ao.name,oo),oo.db&&(oo.db._sqlitePlugin="undefined"!=typeof sqlitePlugin)),oo}function En(ao,oo,io,co,uo){function po(){++fo===_o.length&&uo&&uo()}function ho(mo,go){var yo=mo._attachments[go],vo={binary:oo.binary,ctx:co};io._getAttachment(mo._id,go,yo,vo,function(bo,Eo){mo._attachments[go]=Zs.extend(z(yo,["digest","content_type"]),{data:Eo}),po()})}var _o=Object.keys(ao._attachments||{});if(!_o.length)return uo&&uo();var fo=0;_o.forEach(function(mo){oo.attachments&&oo.include_docs?ho(ao,mo):(ao._attachments[mo].stub=!0,po())})}function kn(ao,oo){function io(){Q()&&(window.localStorage["_pouch__websqldb_"+ko._name]=!0),oo(null,ko)}function co(Co,jo){Co.executeSql(Ta),Co.executeSql("ALTER TABLE "+ga+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){Co.executeSql(xa),Co.executeSql("ALTER TABLE "+ma+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){Co.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+ma+" (local, id)");Co.executeSql("SELECT "+ma+".winningseq AS seq, "+ma+".json AS metadata FROM "+ga+" JOIN "+ma+" ON "+ga+".seq = "+ma+".winningseq",[],function(Do,Oo){for(var No=[],Ro=[],Po=0;Po<Oo.rows.length;Po++){var Fo=Oo.rows.item(Po),Mo=Fo.seq,Bo=JSON.parse(Fo.metadata);Re(Bo)&&No.push(Mo),Pe(Bo.id)&&Ro.push(Bo.id)}Do.executeSql("UPDATE "+ma+"SET local = 1 WHERE id IN "+un(Ro.length),Ro,function(){Do.executeSql("UPDATE "+ga+" SET deleted = 1 WHERE seq IN "+un(No.length),No,jo)})})})})}function uo(Co,jo){Co.executeSql("CREATE TABLE IF NOT EXISTS "+va+" (id UNIQUE, rev, json)",[],function(){Co.executeSql("SELECT "+ma+".id AS id, "+ga+".json AS data FROM "+ga+" JOIN "+ma+" ON "+ga+".seq = "+ma+".winningseq WHERE local = 1",[],function(Oo,No){function Ro(){if(!Po.length)return jo(Oo);var Mo=Po.shift(),Bo=JSON.parse(Mo.data)._rev;Oo.executeSql("INSERT INTO "+va+" (id, rev, json) VALUES (?,?,?)",[Mo.id,Bo,Mo.data],function(Uo){Uo.executeSql("DELETE FROM "+ma+" WHERE id=?",[Mo.id],function(Ho){Ho.executeSql("DELETE FROM "+ga+" WHERE seq=?",[Mo.seq],function(){Ro()})})})}for(var Po=[],Fo=0;Fo<No.rows.length;Fo++)Po.push(No.rows.item(Fo));Ro()})})}function po(Co,jo){function Io(Oo){function No(){if(!Oo.length)return jo(Co);var Ro=Oo.shift(),Po=rn(Ro.hex,wo),Fo=Po.lastIndexOf("::"),Mo=Po.substring(0,Fo),Bo=Po.substring(Fo+2);Co.executeSql("UPDATE "+ga+" SET doc_id=?, rev=? WHERE doc_id_rev=?",[Mo,Bo,Po],function(){No()})}No()}Co.executeSql("ALTER TABLE "+ga+" ADD COLUMN doc_id",[],function(Oo){Oo.executeSql("ALTER TABLE "+ga+" ADD COLUMN rev",[],function(Ro){Ro.executeSql(wa,[],function(Po){Po.executeSql("SELECT hex(doc_id_rev) as hex FROM "+ga,[],function(Mo,Bo){for(var Uo=[],Ho=0;Ho<Bo.rows.length;Ho++)Uo.push(Bo.rows.item(Ho));Io(Uo)})})})})}function ho(Co,jo){function Io(Oo){Oo.executeSql("SELECT COUNT(*) AS cnt FROM "+ya,[],function(Ro,Po){function Fo(){var Ho=pn(ja+", "+ma+".id AS id",[ma,ga],Ca,null,ma+".id ");Ho+=" LIMIT "+Uo+" OFFSET "+Bo,Bo+=Uo,Ro.executeSql(Ho,[],function(Wo,zo){function Ko(ti,ni){var si=Xo[ti]=Xo[ti]||[];-1===si.indexOf(ni)&&si.push(ni)}if(!zo.rows.length)return jo(Wo);for(var Xo={},Go=0;Go<zo.rows.length;Go++)for(var Vo=zo.rows.item(Go),Qo=ln(Vo.data,Vo.id,Vo.rev),Yo=Object.keys(Qo._attachments||{}),Jo=0,$o;Jo<Yo.length;Jo++)$o=Qo._attachments[Yo[Jo]],Ko($o.digest,Vo.seq);var Zo=[];if(Object.keys(Xo).forEach(function(ti){var ni=Xo[ti];ni.forEach(function(si){Zo.push([ti,si])})}),!Zo.length)return Fo();var ei=0;Zo.forEach(function(ti){Wo.executeSql("INSERT INTO "+Ea+" (digest, seq) VALUES (?,?)",ti,function(){++ei===Zo.length&&Fo()})})})}var Mo=Po.rows.item(0).cnt;if(!Mo)return jo(Ro);var Bo=0,Uo=10;Fo()})}Co.executeSql("CREATE TABLE IF NOT EXISTS "+Ea+" (digest, seq INTEGER)",[],function(Oo){Oo.executeSql(La,[],function(No){No.executeSql(Aa,[],Io)})})}function _o(Co,jo){Co.executeSql("ALTER TABLE "+ya+" ADD COLUMN escaped TINYINT(1) DEFAULT 0",[],jo)}function fo(Co,jo){Co.executeSql("ALTER TABLE "+ma+" ADD COLUMN max_seq INTEGER",[],function(Do){Do.executeSql("UPDATE "+ma+" SET max_seq=(SELECT MAX(seq) FROM "+ga+" WHERE doc_id=id)",[],function(No){No.executeSql("CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+ma+" (max_seq)",[],jo)})})}function mo(Co,jo){Co.executeSql("SELECT HEX(\"a\") AS hex",[],function(Io,Do){var Oo=Do.rows.item(0).hex;wo=2===Oo.length?"UTF-8":"UTF-16",jo()})}function go(){for(;0<xo.length;){var Co=xo.pop();Co(null,So)}}function yo(Co,jo){if(0===jo){Co.executeSql("CREATE TABLE IF NOT EXISTS "+ya+" (digest UNIQUE, escaped TINYINT(1), body BLOB)"),Co.executeSql("CREATE TABLE IF NOT EXISTS "+va+" (id UNIQUE, rev, json)"),Co.executeSql("CREATE TABLE IF NOT EXISTS "+Ea+" (digest, seq INTEGER)",[],function(){Co.executeSql(Aa),Co.executeSql(La)}),Co.executeSql("CREATE TABLE IF NOT EXISTS "+ma+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",[],function(){Co.executeSql(Ta),Co.executeSql("CREATE TABLE IF NOT EXISTS "+ga+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",[],function(){Co.executeSql(xa),Co.executeSql(wa),Co.executeSql("CREATE TABLE IF NOT EXISTS "+ba+" (dbid, db_version INTEGER)",[],function(){So=ge();var Wo=[fa,So];Co.executeSql("INSERT INTO "+ba+" (db_version, dbid) VALUES (?,?)",Wo,function(){go()})})})})}else{var Fo=function(){jo<fa&&Co.executeSql("UPDATE "+ba+" SET db_version = "+fa);Co.executeSql("SELECT dbid FROM "+ba,[],function(Ko,Xo){So=Xo.rows.item(0).dbid,go()})},Mo=[co,uo,po,ho,_o,fo,Fo],Bo=jo,Uo=function Ho(Wo){Mo[Bo-1](Wo,Ho),Bo++};Uo(Co)}}function bo(Co){Co.executeSql("SELECT sql FROM sqlite_master WHERE tbl_name = "+ba,[],function(Io,Do){Do.rows.length?/db_version/.test(Do.rows.item(0).sql)?Io.executeSql("SELECT db_version FROM "+ba,[],function(Oo,No){var Ro=No.rows.item(0).db_version;yo(Oo,Ro)}):Io.executeSql("ALTER TABLE "+ba+" ADD COLUMN db_version INTEGER",[],function(){yo(Io,1)}):yo(Io,0)})}function Eo(Co,jo){if(-1!==ko._docCount)return jo(ko._docCount);var Io=pn("COUNT("+ma+".id) AS 'num'",[ma,ga],Ca,ga+".deleted=0");Co.executeSql(Io,[],function(Do,Oo){ko._docCount=Oo.rows.item(0).num,jo(ko._docCount)})}var ko=this,So=null,qo=mn(ao),xo=[],wo;ko._docCount=-1,ko._name=ao.name;var To=Zs.extend({},ao,{version:qa,description:ao.name,size:qo}),Ao=bn(To);if(Ao.error)return _n(oo)(Ao.error);var Lo=Ao.db;"function"!=typeof Lo.readTransaction&&(Lo.readTransaction=Lo.transaction),function(){Lo.transaction(function(Co){mo(Co,function(){bo(Co)})},_n(oo),io)}(),ko.type=function(){return"websql"},ko._id=H(function(Co){Co(null,So)}),ko._info=function(Co){Lo.readTransaction(function(jo){Eo(jo,function(Io){jo.executeSql("SELECT MAX(seq) AS seq FROM "+ga,[],function(Oo,No){var Ro=No.rows.item(0).seq||0;Co(null,{doc_count:Io,update_seq:Ro,sqlite_plugin:Lo._sqlitePlugin,websql_encoding:wo})})})},_n(Co))},ko._bulkDocs=function(Co,jo,Io){gn(ao,Co,jo,ko,Lo,Sa,Io)},ko._get=function(Co,jo,Io){function Do(){Io(Ro,{doc:Oo,metadata:No,ctx:Po})}var Oo,No,Ro,Po=jo.ctx;if(!Po)return Lo.readTransaction(function(Bo){ko._get(Co,Zs.extend({ctx:Bo},jo),Io)});var Fo,Mo;jo.rev?(Fo=pn(ja,[ma,ga],ma+".id="+ga+".doc_id",[ga+".doc_id=?",ga+".rev=?"]),Mo=[Co,jo.rev]):(Fo=pn(ja,[ma,ga],Ca,ma+".id=?"),Mo=[Co]),Po.executeSql(Fo,Mo,function(Bo,Uo){if(!Uo.rows.length)return Ro=re(br,"missing"),Do();var Ho=Uo.rows.item(0);return No=It(Ho.metadata),Ho.deleted&&!jo.rev?(Ro=re(br,"deleted"),Do()):void(Oo=ln(Ho.data,No.id,Ho.rev),Do())})},ko._allDocs=function(Co,jo){var Io=[],Do,Oo=!!("startkey"in Co)&&Co.startkey,No=!!("endkey"in Co)&&Co.endkey,Ro=!!("key"in Co)&&Co.key,Po=!!("descending"in Co)&&Co.descending,Fo="limit"in Co?Co.limit:-1,Mo="skip"in Co?Co.skip:0,Bo=!1!==Co.inclusive_end,Uo=[],Ho=[];if(!1!==Ro)Ho.push(ma+".id = ?"),Uo.push(Ro);else if(!1!==Oo||!1!==No){if(!1!==Oo&&(Ho.push(ma+".id "+(Po?"<=":">=")+" ?"),Uo.push(Oo)),!1!==No){var Wo=Po?">":"<";Bo&&(Wo+="="),Ho.push(ma+".id "+Wo+" ?"),Uo.push(No)}!1!==Ro&&(Ho.push(ma+".id = ?"),Uo.push(Ro))}"ok"!==Co.deleted&&Ho.push(ga+".deleted = 0"),Lo.readTransaction(function(zo){Eo(zo,function(Ko){if(Do=Ko,0!==Fo){var Xo=pn(ja,[ma,ga],Ca,Ho,ma+".id "+(Po?"DESC":"ASC"));Xo+=" LIMIT "+Fo+" OFFSET "+Mo,zo.executeSql(Xo,Uo,function(Go,Vo){for(var Qo=0,Yo=Vo.rows.length;Qo<Yo;Qo++){var Jo=Vo.rows.item(Qo),$o=It(Jo.metadata),Zo=$o.id,ei=ln(Jo.data,Zo,Jo.rev),ti=ei._rev,ni={id:Zo,key:Zo,value:{rev:ti}};if(Co.include_docs&&(ni.doc=ei,ni.doc._rev=ti,Co.conflicts&&(ni.doc._conflicts=ke($o)),En(ni.doc,Co,ko,Go)),Jo.deleted)if("ok"===Co.deleted)ni.value.deleted=!0,ni.doc=null;else continue;Io.push(ni)}})}})},_n(jo),function(){jo(null,{total_rows:Do,offset:Co.skip,rows:Io})})},ko._changes=function(Co){if(Co=B(Co),Co.continuous){var Io=ko._name+":"+ge();return Sa.addListener(ko._name,Io,ko,Co),Sa.notify(ko._name),{cancel:function(){Sa.removeListener(ko._name,Io)}}}var Do=Co.descending;Co.since=Co.since&&!Do?Co.since:0;var Oo="limit"in Co?Co.limit:-1;0===Oo&&(Oo=1);var No="return_docs"in Co?Co.return_docs:!("returnDocs"in Co)||Co.returnDocs;var Ro=[],Po=0;(function(){var Uo=["maxSeq > ?"],Ho=[Co.since];Co.doc_ids&&(Uo.push(ma+".id IN "+un(Co.doc_ids.length)),Ho=Ho.concat(Co.doc_ids));var Wo="maxSeq "+(Do?"DESC":"ASC"),zo=pn(ma+".json AS metadata, "+ma+".max_seq AS maxSeq, "+ga+".json AS winningDoc, "+ga+".rev AS winningRev ",ma+" JOIN "+ga,ma+".id="+ga+".doc_id AND "+ma+".winningseq="+ga+".seq",Uo,Wo),Ko=ie(Co);Co.view||Co.filter||(zo+=" LIMIT "+Oo);var Xo=Co.since||0;Lo.readTransaction(function(Go){Go.executeSql(zo,Ho,function(Vo,Qo){function Yo(ri){return function(){Co.onChange(ri)}}for(var Jo=0,$o=Qo.rows.length;Jo<$o;Jo++){var Zo=Qo.rows.item(Jo),ei=It(Zo.metadata);Xo=Zo.maxSeq;var ti=ln(Zo.winningDoc,ei.id,Zo.winningRev),ni=Co.processChange(ti,ei,Co);ni.seq=Zo.maxSeq;var si=Ko(ni);if("object"===("undefined"==typeof si?"undefined":_typeof(si)))return Co.complete(si);if(si&&(Po++,No&&Ro.push(ni),Co.attachments&&Co.include_docs?En(ti,Co,ko,Vo,Yo(ni)):Yo(ni)()),Po===Oo)break}})},_n(Co.complete),function(){Co.continuous||Co.complete(null,{results:Ro,last_seq:Xo})})})()},ko._close=function(Co){Co()},ko._getAttachment=function(Co,jo,Io,Do,Oo){var No,Ro=Do.ctx,Po=Io.digest,Fo=Io.content_type;Ro.executeSql("SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+ya+" WHERE digest=?",[Po],function(Bo,Uo){var Ho=Uo.rows.item(0),Wo=Ho.escaped?dn(Ho.body):rn(Ho.body,wo);No=Do.binary?lt(Wo,Fo):$r(Wo),Oo(null,No)})},ko._getRevisionTree=function(Co,jo){Lo.readTransaction(function(Io){Io.executeSql("SELECT json AS metadata FROM "+ma+" WHERE id = ?",[Co],function(Oo,No){if(!No.rows.length)jo(re(br));else{var Ro=It(No.rows.item(0).metadata);jo(null,Ro.rev_tree)}})})},ko._doCompaction=function(Co,jo,Io){return jo.length?void Lo.transaction(function(Do){Do.executeSql("SELECT json AS metadata FROM "+ma+" WHERE id = ?",[Co],function(No,Ro){var Po=It(Ro.rows.item(0).metadata);ve(Po.rev_tree,function(Mo,Bo,Uo,Ho,Wo){-1!==jo.indexOf(Bo+"-"+Uo)&&(Wo.status="missing")});No.executeSql("UPDATE "+ma+" SET json = ? WHERE id = ?",[Dt(Po),Co])}),hn(jo,Co,Do)},_n(Io),function(){Io()}):Io()},ko._getLocal=function(Co,jo){Lo.readTransaction(function(Io){Io.executeSql("SELECT json, rev FROM "+va+" WHERE id=?",[Co],function(Oo,No){if(No.rows.length){var Ro=No.rows.item(0),Po=ln(Ro.json,Co,Ro.rev);jo(null,Po)}else jo(re(br))})})},ko._putLocal=function(Co,jo,Io){function Do(Mo){var Bo,Uo;Oo?(Bo="UPDATE "+va+" SET rev=?, json=? WHERE id=? AND rev=?",Uo=[Ro,Po,No,Oo]):(Bo="INSERT INTO "+va+" (id, rev, json) VALUES (?,?,?)",Uo=[No,Ro,Po]),Mo.executeSql(Bo,Uo,function(Ho,Wo){Wo.rowsAffected?(Fo={ok:!0,id:No,rev:Ro},jo.ctx&&Io(null,Fo)):Io(re(Er))},function(){return Io(re(Er)),!1})}"function"==typeof jo&&(Io=jo,jo={}),delete Co._revisions;var Oo=Co._rev,No=Co._id,Ro;Ro=Oo?Co._rev="0-"+(parseInt(Oo.split("-")[1],10)+1):Co._rev="0-1";var Po=cn(Co),Fo;jo.ctx?Do(jo.ctx):Lo.transaction(Do,_n(Io),function(){Fo&&Io(null,Fo)})},ko._removeLocal=function(Co,jo,Io){function Do(No){var Po=[Co._id,Co._rev];No.executeSql("DELETE FROM "+va+" WHERE id=? AND rev=?",Po,function(Fo,Mo){return Mo.rowsAffected?void(Oo={ok:!0,id:Co._id,rev:"0-0"},jo.ctx&&Io(null,Oo)):Io(re(br))})}"function"==typeof jo&&(Io=jo,jo={});var Oo;jo.ctx?Do(jo.ctx):Lo.transaction(Do,_n(Io),function(){Oo&&Io(null,Oo)})},ko._destroy=function(Co,jo){Sa.removeAllListeners(ko._name),Lo.transaction(function(Io){[ma,ga,ya,ba,va,Ea].forEach(function(Oo){Io.executeSql("DROP TABLE IF EXISTS "+Oo,[])})},_n(jo),function(){Q()&&(delete window.localStorage["_pouch__websqldb_"+ko._name],delete window.localStorage[ko._name]),jo(null,{ok:!0})})}}function Sn(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(ao){return!1}}function qn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var ao=Q(),oo="_pouch__websqldb_valid_"+navigator.userAgent;if(ao&&localStorage[oo])return"1"===localStorage[oo];var io=Sn();return ao&&(localStorage[oo]=io?"1":"0"),io}function xn(){return"undefined"!=typeof openDatabase&&("undefined"!=typeof sqlitePlugin||qn())}function Tn(ao){return function(oo,io,co,uo){if("undefined"!=typeof sqlitePlugin){var po=Zs.extend({},ao,{name:oo,version:io,description:co,size:uo});return sqlitePlugin.openDatabase(po)}return openDatabase(oo,io,co,uo)}}function An(ao,oo){var io=Tn(ao),co=Zs.extend({websql:io},ao);"undefined"==typeof cordova||xn()||$("error","PouchDB error: you must install a SQLite plugin in order for PouchDB to work on this platform. Options:\n - https://github.com/nolanlawson/cordova-plugin-sqlite-2\n - https://github.com/litehelpers/Cordova-sqlite-storage\n - https://github.com/Microsoft/cordova-plugin-websql"),kn.call(this,co,oo)}function Cn(){for(var ao={},oo=new pr(function(uo,po){ao.resolve=uo,ao.reject=po}),io=Array(arguments.length),co=0;co<io.length;co++)io[co]=arguments[co];return ao.promise=oo,pr.resolve().then(function(){return fetch.apply(null,io)}).then(function(uo){ao.resolve(uo)})["catch"](function(uo){ao.reject(uo)}),ao}function jn(ao,oo){var po=new Headers,ho={method:ao.method,credentials:"include",headers:po},io,co,uo;return ao.json&&(po.set("Accept","application/json"),po.set("Content-Type",ao.headers["Content-Type"]||"application/json")),ao.body&&ao.body instanceof Blob?mt(ao.body,function(_o){ho.body=_o}):ao.body&&ao.processData&&"string"!=typeof ao.body?ho.body=JSON.stringify(ao.body):"body"in ao?ho.body=ao.body:ho.body=null,Object.keys(ao.headers).forEach(function(_o){ao.headers.hasOwnProperty(_o)&&po.set(_o,ao.headers[_o])}),io=Cn(ao.url,ho),0<ao.timeout&&(co=setTimeout(function(){io.reject(new Error("Load timeout for resource: "+ao.url))},ao.timeout)),io.promise.then(function(_o){return uo={statusCode:_o.status},0<ao.timeout&&clearTimeout(co),200<=uo.statusCode&&300>uo.statusCode?ao.binary?_o.blob():_o.text():_o.json()}).then(function(_o){200<=uo.statusCode&&300>uo.statusCode?oo(null,uo,_o):oo(_o,uo)})["catch"](function(_o){oo(_o,uo)}),{abort:io.reject}}function In(ao,oo){var uo=!1,ho=function(){uo=!0,io.abort()},io,co;io=ao.xhr?new ao.xhr:new XMLHttpRequest;try{io.open(ao.method,ao.url)}catch(fo){return oo(new Error(fo.name||"Url is invalid"))}for(var _o in io.withCredentials=!("withCredentials"in ao)||ao.withCredentials,"GET"===ao.method?delete ao.headers["Content-Type"]:ao.json&&(ao.headers.Accept="application/json",ao.headers["Content-Type"]=ao.headers["Content-Type"]||"application/json",ao.body&&ao.processData&&"string"!=typeof ao.body&&(ao.body=JSON.stringify(ao.body))),ao.binary&&(io.responseType="arraybuffer"),"body"in ao||(ao.body=null),ao.headers)ao.headers.hasOwnProperty(_o)&&io.setRequestHeader(_o,ao.headers[_o]);return 0<ao.timeout&&(co=setTimeout(ho,ao.timeout),io.onprogress=function(){clearTimeout(co),4!==io.readyState&&(co=setTimeout(ho,ao.timeout))},"undefined"!=typeof io.upload&&(io.upload.onprogress=io.onprogress)),io.onreadystatechange=function(){if(4===io.readyState){var fo={statusCode:io.status};if(200<=io.status&&300>io.status){var mo;mo=ao.binary?dt([io.response||""],{type:io.getResponseHeader("Content-Type")}):io.responseText,oo(null,fo,mo)}else{var go={};if(uo)go=new Error("ETIMEDOUT"),go.code="ETIMEDOUT";else try{go=JSON.parse(io.response)}catch(yo){}go.status=io.status,oo(go)}}},ao.body&&ao.body instanceof Blob?mt(ao.body,function(fo){io.send(fo)}):io.send(ao.body),{abort:function(){io.abort()}}}function On(ao,oo){return Ia||ao.xhr?In(ao,oo):jn(ao,oo)}function Nn(){return""}function Rn(ao,oo){function io(uo,po,ho){if(!ao.binary&&ao.json&&"string"==typeof uo)try{uo=JSON.parse(uo)}catch(_o){return ho(_o)}Array.isArray(uo)&&(uo=uo.map(function(_o){return _o.error||_o.missing?ae(_o):_o})),ao.binary&&Da(uo,po),ho(null,uo,po)}ao=B(ao);return ao=Zs.extend({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},ao),ao.json&&(!ao.binary&&(ao.headers.Accept="application/json"),ao.headers["Content-Type"]=ao.headers["Content-Type"]||"application/json"),ao.binary&&(ao.encoding=null,ao.json=!1),ao.processData||(ao.json=!1),On(ao,function(uo,po,ho){if(uo)return oo(ae(uo));var fo=po.headers&&po.headers["content-type"],mo=ho||Nn(),_o;if(!ao.binary&&(ao.json||!ao.processData)&&"object"!==("undefined"==typeof mo?"undefined":_typeof(mo))&&(/json/.test(fo)||/^[\s]*\{/.test(mo)&&/\}[\s]*$/.test(mo)))try{mo=JSON.parse(mo.toString())}catch(go){}200<=po.statusCode&&300>po.statusCode?io(mo,po,oo):(_o=ae(mo),_o.status=po.statusCode,oo(_o))})}function Pn(ao,oo){var io=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",co=-1!==io.indexOf("safari")&&-1===io.indexOf("chrome"),uo=-1!==io.indexOf("msie"),po=-1!==io.indexOf("edge"),ho=co||(uo||po)&&"GET"===ao.method,_o=!("cache"in ao)||ao.cache,fo=/^blob:/.test(ao.url);if(!fo&&(ho||!_o)){var mo=-1!==ao.url.indexOf("?");ao.url+=(mo?"&":"?")+"_nonce="+Date.now()}return Rn(ao,oo)}function Fn(ao){var oo=ao.doc&&ao.doc._attachments;oo&&Object.keys(oo).forEach(function(io){var co=oo[io];co.data=ut(co.data,co.content_type)})}function Mn(ao){return /^_design/.test(ao)?"_design/"+encodeURIComponent(ao.slice(8)):/^_local/.test(ao)?"_local/"+encodeURIComponent(ao.slice(7)):encodeURIComponent(ao)}function Bn(ao){return ao._attachments&&Object.keys(ao._attachments)?pr.all(Object.keys(ao._attachments).map(function(oo){var io=ao._attachments[oo];if(io.data&&"string"!=typeof io.data)return new pr(function(co){ft(io.data,co)}).then(function(co){io.data=co})})):pr.resolve()}function Un(ao){var oo=he(ao);(oo.user||oo.password)&&(oo.auth={username:oo.user,password:oo.password});var io=oo.path.replace(/(^\/|\/$)/g,"").split("/");return oo.db=io.pop(),-1===oo.db.indexOf("%")&&(oo.db=encodeURIComponent(oo.db)),oo.path=io.join("/"),oo}function Hn(ao,oo){return Wn(ao,ao.db+"/"+oo)}function Wn(ao,oo){var io=ao.path?"/":"";return ao.protocol+"://"+ao.host+(ao.port?":"+ao.port:"")+"/"+ao.path+io+oo}function zn(ao){return"?"+Object.keys(ao).map(function(oo){return oo+"="+encodeURIComponent(ao[oo])}).join("&")}function Kn(ao,oo){function io(So,qo,xo){var wo=So.ajax||{},To=Zs.extend(B(yo),wo,qo);return Fa(To.method+" "+To.url),_o._ajax(To,xo)}function co(So,qo){return new pr(function(xo,wo){io(So,qo,function(To,Ao){return To?wo(To):void xo(Ao)})})}function uo(So,qo){return W(So,ar(function(xo){po().then(function(){return qo.apply(this,xo)})["catch"](function(wo){var To=xo.pop();To(wo)})}))}function po(){if(ao.skipSetup||ao.skip_setup)return pr.resolve();if(ko)return ko;return ko=co({},{method:"GET",url:go})["catch"](function(qo){return qo&&qo.status&&404===qo.status?(ne(404,"PouchDB is just detecting if the remote exists."),co({},{method:"PUT",url:go})):pr.reject(qo)})["catch"](function(qo){return qo&&qo.status&&412===qo.status||pr.reject(qo)}),ko["catch"](function(){ko=null}),ko}function ho(So){return So.split("/").map(encodeURIComponent).join("/")}var _o=this,fo=Un;ao.getHost&&(fo=ao.getHost);var mo=fo(ao.name,ao),go=Hn(mo,"");ao=B(ao);var yo=ao.ajax||{};if(_o.getUrl=function(){return go},_o.getHeaders=function(){return yo.headers||{}},ao.auth||mo.auth){var vo=ao.auth||mo.auth,bo=vo.username+":"+vo.password,Eo=$r(unescape(encodeURIComponent(bo)));yo.headers=yo.headers||{},yo.headers.Authorization="Basic "+Eo}_o._ajax=Pn;var ko;setTimeout(function(){oo(null,_o)}),_o.type=function(){return"http"},_o.id=uo("id",function(So){io({},{method:"GET",url:Wn(mo,"")},function(qo,xo){var wo=xo&&xo.uuid?xo.uuid+mo.db:Hn(mo,"");So(null,wo)})}),_o.request=uo("request",function(So,qo){So.url=Hn(mo,So.url),io({},So,qo)}),_o.compact=uo("compact",function(So,qo){"function"==typeof So&&(qo=So,So={}),So=B(So),io(So,{url:Hn(mo,"_compact"),method:"POST"},function(){function xo(){_o.info(function(wo,To){To&&!To.compact_running?qo(null,{ok:!0}):setTimeout(xo,So.interval||200)})}xo()})}),_o.bulkGet=W("bulkGet",function(So,qo){function xo(Co){var jo={};So.revs&&(jo.revs=!0),So.attachments&&(jo.attachments=!0),io({},{url:Hn(mo,"_bulk_get"+zn(jo)),method:"POST",body:{docs:So.docs}},Co)}function wo(){function Co(Po){return function(Fo,Mo){Oo[Po]=Mo.results,++Do===Io&&qo(null,{results:de(Oo)})}}for(var jo=Na,Io=Math.ceil(So.docs.length/jo),Do=0,Oo=Array(Io),No=0,Ro;No<Io;No++)Ro=z(So,["revs","attachments"]),Ro.ajax=yo,Ro.docs=So.docs.slice(No*jo,Math.min(So.docs.length,(No+1)*jo)),G(To,Ro,Co(No))}var To=this,Ao=Wn(mo,""),Lo=Ra[Ao];"boolean"==typeof Lo?Lo?xo(qo):wo():xo(function(Co,jo){if(Co){var Io=Math.floor(Co.status/100);4===Io||5===Io?(Ra[Ao]=!1,ne(Co.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),wo()):qo(Co)}else Ra[Ao]=!0,qo(null,jo)})}),_o._info=function(So){po().then(function(){io({},{method:"GET",url:Hn(mo,"")},function(qo,xo){return qo?So(qo):void(xo.host=Hn(mo,""),So(null,xo))})})["catch"](So)},_o.get=uo("get",function(So,qo,xo){function wo(Co){var Io=Co._attachments,Do=Io&&Object.keys(Io);return Io&&Do.length?new lr(function(){if(!Do.length)return null;var Oo=Do.pop(),No=Io[Oo],Ro=Mn(Co._id)+"/"+ho(Oo)+"?rev="+Co._rev;return co(qo,{method:"GET",url:Hn(mo,Ro),binary:!0}).then(function(Po){return qo.binary?Po:new pr(function(Fo){ft(Po,Fo)})}).then(function(Po){delete No.stub,delete No.length,No.data=Po})},5,{promise:pr}).start():void 0}function To(Co){return Array.isArray(Co)?pr.all(Co.map(function(jo){if(jo.ok)return wo(jo.ok)})):wo(Co)}"function"==typeof qo&&(xo=qo,qo={}),qo=B(qo);var Ao={};qo.revs&&(Ao.revs=!0),qo.revs_info&&(Ao.revs_info=!0),qo.open_revs&&("all"!==qo.open_revs&&(qo.open_revs=JSON.stringify(qo.open_revs)),Ao.open_revs=qo.open_revs),qo.rev&&(Ao.rev=qo.rev),qo.conflicts&&(Ao.conflicts=qo.conflicts),So=Mn(So);var Lo={method:"GET",url:Hn(mo,So+zn(Ao))};co(qo,Lo).then(function(Co){return pr.resolve().then(function(){if(qo.attachments)return To(Co)}).then(function(){xo(null,Co)})})["catch"](xo)}),_o.remove=uo("remove",function(So,qo,xo,wo){var To;"string"==typeof qo?(To={_id:So,_rev:qo},"function"==typeof xo&&(wo=xo,xo={})):(To=So,"function"==typeof qo?(wo=qo,xo={}):(wo=xo,xo=qo));var Ao=To._rev||xo.rev;io(xo,{method:"DELETE",url:Hn(mo,Mn(To._id))+"?rev="+Ao},wo)}),_o.getAttachment=uo("getAttachment",function(So,qo,xo,wo){"function"==typeof xo&&(wo=xo,xo={});var To=xo.rev?"?rev="+xo.rev:"",Ao=Hn(mo,Mn(So))+"/"+ho(qo)+To;io(xo,{method:"GET",url:Ao,binary:!0},wo)}),_o.removeAttachment=uo("removeAttachment",function(So,qo,xo,wo){var To=Hn(mo,Mn(So)+"/"+ho(qo))+"?rev="+xo;io({},{method:"DELETE",url:To},wo)}),_o.putAttachment=uo("putAttachment",function(So,qo,xo,wo,To,Ao){"function"==typeof To&&(Ao=To,To=wo,wo=xo,xo=null);var Lo=Mn(So)+"/"+ho(qo),Co=Hn(mo,Lo);if(xo&&(Co+="?rev="+xo),"string"==typeof wo){var jo;try{jo=Jr(wo)}catch(Do){return Ao(re(Tr,"Attachment is not a valid base64 string"))}wo=jo?lt(jo,To):""}var Io={headers:{"Content-Type":To},method:"PUT",url:Co,processData:!1,body:wo,timeout:yo.timeout||6e4};io({},Io,Ao)}),_o._bulkDocs=function(So,qo,xo){So.new_edits=qo.new_edits,po().then(function(){return pr.all(So.docs.map(Bn))}).then(function(){io(qo,{method:"POST",url:Hn(mo,"_bulk_docs"),body:So},function(wo,To){return wo?xo(wo):void(To.forEach(function(Ao){Ao.ok=!0}),xo(null,To))})})["catch"](xo)},_o.allDocs=uo("allDocs",function(So,qo){"function"==typeof So&&(qo=So,So={}),So=B(So);var xo={},To="GET",wo;So.conflicts&&(xo.conflicts=!0),So.descending&&(xo.descending=!0),So.include_docs&&(xo.include_docs=!0),So.attachments&&(xo.attachments=!0),So.key&&(xo.key=JSON.stringify(So.key)),So.start_key&&(So.startkey=So.start_key),So.startkey&&(xo.startkey=JSON.stringify(So.startkey)),So.end_key&&(So.endkey=So.end_key),So.endkey&&(xo.endkey=JSON.stringify(So.endkey)),"undefined"!=typeof So.inclusive_end&&(xo.inclusive_end=!!So.inclusive_end),"undefined"!=typeof So.limit&&(xo.limit=So.limit),"undefined"!=typeof So.skip&&(xo.skip=So.skip);var Ao=zn(xo);if("undefined"!=typeof So.keys){var Lo="keys="+encodeURIComponent(JSON.stringify(So.keys));Lo.length+Ao.length+1<=Pa?Ao+="&"+Lo:(To="POST",wo={keys:So.keys})}co(So,{method:To,url:Hn(mo,"_all_docs"+Ao),body:wo}).then(function(Co){So.include_docs&&So.attachments&&So.binary&&Co.rows.forEach(Fn),qo(null,Co)})["catch"](qo)}),_o._changes=function(So){var qo="batch_size"in So?So.batch_size:Oa;So=B(So),So.timeout="timeout"in So?So.timeout:"timeout"in yo?yo.timeout:30000;var xo=So.timeout?{timeout:So.timeout-5000}:{},wo="undefined"!=typeof So.limit&&So.limit,To;To="return_docs"in So?So.return_docs:!("returnDocs"in So)||So.returnDocs;var Ao=wo;if(So.style&&(xo.style=So.style),(So.include_docs||So.filter&&"function"==typeof So.filter)&&(xo.include_docs=!0),So.attachments&&(xo.attachments=!0),So.continuous&&(xo.feed="longpoll"),So.conflicts&&(xo.conflicts=!0),So.descending&&(xo.descending=!0),"heartbeat"in So?So.heartbeat&&(xo.heartbeat=So.heartbeat):xo.heartbeat=1e4,So.filter&&"string"==typeof So.filter&&(xo.filter=So.filter),So.view&&"string"==typeof So.view&&(xo.filter="_view",xo.view=So.view),So.query_params&&"object"===_typeof(So.query_params))for(var Lo in So.query_params)So.query_params.hasOwnProperty(Lo)&&(xo[Lo]=So.query_params[Lo]);var Co="GET",jo;if(So.doc_ids){xo.filter="_doc_ids";var Io=JSON.stringify(So.doc_ids);Io.length<Pa?xo.doc_ids=Io:(Co="POST",jo={doc_ids:So.doc_ids})}var No=function(Mo,Bo){if(!So.aborted){xo.since=Mo,"object"===_typeof(xo.since)&&(xo.since=JSON.stringify(xo.since)),So.descending?wo&&(xo.limit=Ao):xo.limit=!wo||Ao>qo?qo:Ao;var Uo={method:Co,url:Hn(mo,"_changes"+zn(xo)),timeout:So.timeout,body:jo};Oo=Mo,So.aborted||po().then(function(){Do=io(So,Uo,Bo)})["catch"](Bo)}},Ro={results:[]},Do,Oo;return No(So.since||0,function Fo(Mo,Bo){if(!So.aborted){var Uo=0;if(Bo&&Bo.results){Uo=Bo.results.length,Ro.last_seq=Bo.last_seq;({}).query=So.query_params,Bo.results=Bo.results.filter(function(zo){Ao--;var Ko=ie(So)(zo);return Ko&&(So.include_docs&&So.attachments&&So.binary&&Fn(zo),To&&Ro.results.push(zo),So.onChange(zo)),Ko})}else if(Mo)return So.aborted=!0,void So.complete(Mo);Bo&&Bo.last_seq&&(Oo=Bo.last_seq);var Wo=wo&&0>=Ao||Bo&&Uo<qo||So.descending;(!So.continuous||wo&&0>=Ao)&&Wo?So.complete(null,Ro):setTimeout(function(){No(Oo,Fo)},0)}}),{cancel:function(){So.aborted=!0,Do&&Do.abort()}}},_o.revsDiff=uo("revsDiff",function(So,qo,xo){"function"==typeof qo&&(xo=qo,qo={}),io(qo,{method:"POST",url:Hn(mo,"_revs_diff"),body:So},xo)}),_o._close=function(So){So()},_o._destroy=function(So,qo){io(So,{url:Hn(mo,""),method:"DELETE"},function(xo,wo){return xo&&xo.status&&404!==xo.status?qo(xo):void qo(null,wo)})}}function Gn(){this.promise=new pr(function(ao){ao()})}function Vn(ao){var oo=ao.db,io=ao.viewName,co=ao.map,uo=ao.reduce,po=ao.temporary,ho=co.toString()+(uo&&uo.toString())+"undefined",_o;if(!po&&(_o=oo._cachedViews=oo._cachedViews||{},_o[ho]))return _o[ho];var fo=oo.info().then(function(mo){var yo=mo.db_name+"-mrview-"+(po?"temp":kt(ho));return _e(oo,"_local/mrviews",function(vo){vo.views=vo.views||{};var bo=io;-1===bo.indexOf("/")&&(bo=io+"/"+io);var Eo=vo.views[bo]=vo.views[bo]||{};if(!Eo[yo])return Eo[yo]=!0,vo}).then(function(){return oo.registerDependentDatabase(yo).then(function(vo){var bo=vo.db;bo.auto_compaction=!0;var Eo={name:yo,db:bo,sourceDB:oo,adapter:oo.adapter,mapFun:co,reduceFun:uo};return Eo.db.get("_local/lastSeq")["catch"](function(ko){if(404!==ko.status)throw ko}).then(function(ko){return Eo.seq=ko?ko.seq:0,_o&&Eo.db.once("destroyed",function(){delete _o[ho]}),Eo})})})});return _o&&(_o[ho]=fo),fo}function Qn(ao,oo,io,co,uo,po){return ir("return ("+ao.replace(/;\s*$/,"")+");",{emit:oo,sum:io,log:co,isArray:uo,toJSON:po})}function Yn(ao){return-1===ao.indexOf("/")?[ao,ao]:ao.split("/")}function Jn(ao){return 1===ao.length&&/^1-/.test(ao[0].rev)}function $n(ao,oo){try{ao.emit("error",oo)}catch(io){$("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),$("error",oo)}}function Zn(ao,oo,io){try{return{output:oo.apply(null,io)}}catch(co){return $n(ao,co),{error:co}}}function es(ao,oo){var io=ur.collate(ao.key,oo.key);return 0===io?ur.collate(ao.value,oo.value):io}function ts(ao,oo,io){return(io=io||0,"number"==typeof oo)?ao.slice(io,oo+io):0<io?ao.slice(io):ao}function ns(ao){var oo=ao.value,io=oo&&"object"===("undefined"==typeof oo?"undefined":_typeof(oo))&&oo._id||ao.id;return io}function ss(ao){ao.rows.forEach(function(oo){var io=oo.doc&&oo.doc._attachments;io&&Object.keys(io).forEach(function(co){var uo=io[co];io[co].data=ut(uo.data,uo.content_type)})})}function rs(ao){return function(oo){return ao.include_docs&&ao.attachments&&ao.binary&&ss(oo),oo}}function as(ao){return new Cs("builtin "+ao+" function requires map values to be numbers or number arrays")}function os(ao){for(var oo=0,io=0,co=ao.length,uo;io<co;io++)if(uo=ao[io],"number"==typeof uo)"number"==typeof oo?oo+=uo:oo[0]+=uo;else if(Array.isArray(uo)){oo="number"==typeof oo?[oo]:oo;for(var po=0,ho=uo.length,_o;po<ho;po++)if(_o=uo[po],"number"!=typeof _o)throw as("_sum");else"undefined"==typeof oo[po]?oo.push(_o):oo[po]+=_o}else throw as("_sum");return oo}function is(ao,oo,io,co){var uo=oo[ao];"undefined"!=typeof uo&&(co&&(uo=encodeURIComponent(JSON.stringify(uo))),io.push(ao+"="+uo))}function ds(ao){if("undefined"!=typeof ao){var oo=+ao;return isNaN(oo)||oo!==parseInt(ao,10)?ao:oo}}function cs(ao){return ao.group_level=ds(ao.group_level),ao.limit=ds(ao.limit),ao.skip=ds(ao.skip),ao}function ls(ao){if(ao){if("number"!=typeof ao)return new As("Invalid value for integer: \""+ao+"\"");if(0>ao)return new As("Invalid value for positive integer: \""+ao+"\"")}}function us(ao,oo){var io=ao.descending?"endkey":"startkey",co=ao.descending?"startkey":"endkey";if("undefined"!=typeof ao[io]&&"undefined"!=typeof ao[co]&&0<ur.collate(ao[io],ao[co]))throw new As("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");else if(oo.reduce&&!1!==ao.reduce)if(ao.include_docs)throw new As("{include_docs:true} is invalid for reduce");else if(ao.keys&&1<ao.keys.length&&!ao.group&&!ao.group_level)throw new As("Multi-key fetches for reduce views must use {group: true}");["group_level","limit","skip"].forEach(function(uo){var po=ls(ao[uo]);if(po)throw po})}function ps(ao,oo,io){var co=[],po="GET",uo;if(is("reduce",io,co),is("include_docs",io,co),is("attachments",io,co),is("limit",io,co),is("descending",io,co),is("group",io,co),is("group_level",io,co),is("skip",io,co),is("stale",io,co),is("conflicts",io,co),is("startkey",io,co,!0),is("start_key",io,co,!0),is("endkey",io,co,!0),is("end_key",io,co,!0),is("inclusive_end",io,co),is("key",io,co,!0),co=co.join("&"),co=""===co?"":"?"+co,"undefined"!=typeof io.keys){var _o="keys="+encodeURIComponent(JSON.stringify(io.keys));_o.length+co.length+1<=2e3?co+=("?"===co[0]?"&":"?")+_o:(po="POST","string"==typeof oo?uo={keys:io.keys}:oo.keys=io.keys)}if("string"==typeof oo){var fo=Yn(oo);return ao.request({method:po,url:"_design/"+fo[0]+"/_view/"+fo[1]+co,body:uo}).then(rs(io))}return uo=uo||{},Object.keys(oo).forEach(function(mo){uo[mo]=Array.isArray(oo[mo])?oo[mo]:oo[mo].toString()}),ao.request({method:"POST",url:"_temp_view"+co,body:uo}).then(rs(io))}function hs(ao,oo,io){return new pr(function(co,uo){ao._query(oo,io,function(po,ho){return po?uo(po):void co(ho)})})}function _s(ao){return new pr(function(oo,io){ao._viewCleanup(function(co,uo){return co?io(co):void oo(uo)})})}function fs(ao){return function(oo){if(404===oo.status)return ao;throw oo}}function gs(ao,oo,io){function uo(yo){return yo.keys.length?oo.db.allDocs({keys:yo.keys,include_docs:!0}):pr.resolve({rows:[]})}function po(yo,vo){for(var bo=[],Eo={},ko=0,So=vo.rows.length;ko<So;ko++){var qo=vo.rows[ko],xo=qo.doc;if(xo&&(bo.push(xo),Eo[xo._id]=!0,xo._deleted=!mo[xo._id],!xo._deleted)){var wo=mo[xo._id];"value"in wo&&(xo.value=wo.value)}}var To=Object.keys(mo);return To.forEach(function(Ao){if(!Eo[Ao]){var Lo={_id:Ao},Co=mo[Ao];"value"in Co&&(Lo.value=Co.value),bo.push(Lo)}}),yo.keys=Wa(To.concat(yo.keys)),bo.push(yo),bo}var ho="_local/doc_"+ao,_o={_id:ho,keys:[]},fo=io[ao],mo=fo.indexableKeysToKeyValues,go=fo.changes;return function(){return Jn(go)?pr.resolve(_o):oo.db.get(ho)["catch"](fs(_o))}().then(function(yo){return uo(yo).then(function(vo){return po(yo,vo)})})}function ys(ao,oo,io){var co="_local/lastSeq";return ao.db.get(co)["catch"](fs({_id:co,seq:0})).then(function(uo){var po=Object.keys(oo);return pr.all(po.map(function(ho){return gs(ho,ao,oo)})).then(function(ho){var _o=de(ho);return uo.seq=io,_o.push(uo),ao.db.bulkDocs({docs:_o})})})}function vs(ao){var oo="string"==typeof ao?ao:ao.name,io=za[oo];return io||(io=za[oo]=new Gn),io}function bs(ao){return Ha(vs(ao),function(){return Es(ao)})()}function Es(ao){function oo(mo,go){var yo={id:uo._id,key:ur.normalizeKey(mo)};"undefined"!=typeof go&&null!==go&&(yo.value=ur.normalizeKey(go)),co.push(yo)}function io(mo,go){return function(){return ys(ao,mo,go)}}var co,uo,po;if("function"==typeof ao.mapFun&&2===ao.mapFun.length){var ho=ao.mapFun;po=function(go){return ho(go,oo)}}else po=Qn(ao.mapFun.toString(),oo,os,Ga,Array.isArray,JSON.parse);var _o=ao.seq||0,fo=new Gn;return new pr(function(mo,go){function yo(){fo.finish().then(function(){ao.seq=_o,mo()})}function vo(){ao.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:_o,limit:Xa}).on("complete",function(Eo){var ko=Eo.results;if(!ko.length)return yo();for(var So={},qo=0,xo=ko.length,wo;qo<xo;qo++){if(wo=ko[qo],"_"!==wo.doc._id[0]){co=[],uo=wo.doc,uo._deleted||Zn(ao.sourceDB,po,[uo]),co.sort(es);for(var To={},Lo=0,Co=co.length,Ao;Lo<Co;Lo++){var jo=co[Lo],Io=[jo.key,jo.id];0===ur.collate(jo.key,Ao)&&Io.push(Lo);var Do=ur.toIndexableString(Io);To[Do]=jo,Ao=jo.key}So[wo.doc._id]={indexableKeysToKeyValues:To,changes:wo.changes}}_o=wo.seq}return fo.add(io(So,_o)),ko.length<Xa?yo():vo()}).on("error",function(Eo){go(Eo)})}vo()})}function ks(ao,oo,io){0===io.group_level&&delete io.group_level;var co=io.group||io.group_level,uo;uo=Va[ao.reduceFun]?Va[ao.reduceFun]:Qn(ao.reduceFun.toString(),null,os,Ga,Array.isArray,JSON.parse);var po=[],ho=isNaN(io.group_level)?Number.POSITIVE_INFINITY:io.group_level;oo.forEach(function(yo){var vo=po[po.length-1],bo=co?yo.key:null;return co&&Array.isArray(bo)&&(bo=bo.slice(0,ho)),vo&&0===ur.collate(vo.groupKey,bo)?(vo.keys.push([yo.key,yo.id]),void vo.values.push(yo.value)):void po.push({keys:[[yo.key,yo.id]],values:[yo.value],groupKey:bo})}),oo=[];for(var _o=0,fo=po.length;_o<fo;_o++){var mo=po[_o],go=Zn(ao.sourceDB,uo,[mo.keys,mo.values,!1]);if(go.error&&go.error instanceof Cs)throw go.error;oo.push({value:go.error?null:go.output,key:mo.groupKey})}return{rows:ts(oo,io.limit,io.skip)}}function Ss(ao,oo){return Ha(vs(ao),function(){return qs(ao,oo)})()}function qs(ao,oo){function io(bo){return bo.include_docs=!0,ao.db.allDocs(bo).then(function(Eo){return uo=Eo.total_rows,Eo.rows.map(function(ko){if("value"in ko.doc&&"object"===_typeof(ko.doc.value)&&null!==ko.doc.value){var So=Object.keys(ko.doc.value).sort(),qo=["id","key","value"];if(!(So<qo||So>qo))return ko.doc.value}var xo=ur.parseIndexableString(ko.doc._id);return{key:xo[0],id:xo[1],value:"value"in ko.doc?ko.doc.value:null}})})}function co(bo){var Eo;if(Eo=po?ks(ao,bo,oo):{total_rows:uo,offset:ho,rows:bo},oo.include_docs){var ko=Wa(bo.map(ns));return ao.sourceDB.allDocs({keys:ko,include_docs:!0,conflicts:oo.conflicts,attachments:oo.attachments,binary:oo.binary}).then(function(So){var qo={};return So.rows.forEach(function(xo){xo.doc&&(qo["$"+xo.id]=xo.doc)}),bo.forEach(function(xo){var wo=ns(xo),To=qo["$"+wo];To&&(xo.doc=To)}),Eo})}return Eo}var po=ao.reduceFun&&!1!==oo.reduce,ho=oo.skip||0,uo;if("undefined"==typeof oo.keys||oo.keys.length||(oo.limit=0,delete oo.keys),"undefined"!=typeof oo.keys){var _o=oo.keys,fo=_o.map(function(bo){var Eo={startkey:ur.toIndexableString([bo]),endkey:ur.toIndexableString([bo,{}])};return io(Eo)});return pr.all(fo).then(de).then(co)}var mo={descending:oo.descending};if(oo.start_key&&(oo.startkey=oo.start_key),oo.end_key&&(oo.endkey=oo.end_key),"undefined"!=typeof oo.startkey&&(mo.startkey=oo.descending?ur.toIndexableString([oo.startkey,{}]):ur.toIndexableString([oo.startkey])),"undefined"!=typeof oo.endkey){var go=!1!==oo.inclusive_end;oo.descending&&(go=!go),mo.endkey=ur.toIndexableString(go?[oo.endkey,{}]:[oo.endkey])}if("undefined"!=typeof oo.key){var yo=ur.toIndexableString([oo.key]),vo=ur.toIndexableString([oo.key,{}]);mo.descending?(mo.endkey=yo,mo.startkey=vo):(mo.startkey=yo,mo.endkey=vo)}return po||("number"==typeof oo.limit&&(mo.limit=oo.limit),mo.skip=ho),io(mo).then(co)}function xs(ao){return ao.request({method:"POST",url:"_view_cleanup"})}function ws(ao){return ao.get("_local/mrviews").then(function(oo){var io={};Object.keys(oo.views).forEach(function(uo){var po=Yn(uo),ho="_design/"+po[0],_o=po[1];io[ho]=io[ho]||{},io[ho][_o]=!0});var co={keys:Object.keys(io),include_docs:!0};return ao.allDocs(co).then(function(uo){var po={};uo.rows.forEach(function(fo){var mo=fo.key.substring(8);Object.keys(io[fo.key]).forEach(function(go){var yo=mo+"/"+go;oo.views[yo]||(yo=go);var vo=Object.keys(oo.views[yo]),bo=fo.doc&&fo.doc.views&&fo.doc.views[go];vo.forEach(function(Eo){po[Eo]=po[Eo]||bo})})});var ho=Object.keys(po).filter(function(fo){return!po[fo]}),_o=ho.map(function(fo){return Ha(vs(fo),function(){return new ao.constructor(fo,ao.__opts).destroy()})()});return pr.all(_o).then(function(){return{ok:!0}})})},fs({ok:!0}))}function Ts(ao,oo,io){if("http"===ao.type())return ps(ao,oo,io);if("function"==typeof ao._query)return hs(ao,oo,io);if("string"!=typeof oo){us(io,oo);var co={db:ao,viewName:"temp_view/temp_view",map:oo.map,reduce:oo.reduce,temporary:!0};return Ka.add(function(){return Vn(co).then(function(fo){return Ua(bs(fo).then(function(){return Ss(fo,io)}),function(){return fo.db.destroy()})})}),Ka.finish()}var uo=oo,po=Yn(uo),ho=po[0],_o=po[1];return ao.get("_design/"+ho).then(function(fo){var mo=fo.views&&fo.views[_o];if(!mo||"string"!=typeof mo.map)throw new Ls("ddoc "+ho+" has no view named "+_o);us(io,mo);var go={db:ao,viewName:uo,map:mo.map,reduce:mo.reduce};return Vn(go).then(function(yo){return"ok"===io.stale||"update_after"===io.stale?("update_after"===io.stale&&D.nextTick(function(){bs(yo)}),Ss(yo,io)):bs(yo).then(function(){return Ss(yo,io)})})})}function As(ao){this.status=400,this.name="query_parse_error",this.message=ao,this.error=!0;try{Error.captureStackTrace(this,As)}catch(oo){}}function Ls(ao){this.status=404,this.name="not_found",this.message=ao,this.error=!0;try{Error.captureStackTrace(this,Ls)}catch(oo){}}function Cs(ao){this.status=500,this.name="invalid_value",this.message=ao,this.error=!0;try{Error.captureStackTrace(this,Cs)}catch(oo){}}function js(ao){return /^1-/.test(ao)}function Is(ao,oo,io){return!ao._attachments||!ao._attachments[io]||ao._attachments[io].digest!==oo._attachments[io].digest}function Ds(ao,oo){var io=Object.keys(oo._attachments);return pr.all(io.map(function(co){return ao.getAttachment(oo._id,co,{rev:oo._rev})}))}function Os(ao,oo,io){var co="http"===oo.type()&&"http"!==ao.type(),uo=Object.keys(io._attachments);return co?ao.get(io._id).then(function(po){return pr.all(uo.map(function(ho){return Is(po,io,ho)?oo.getAttachment(io._id,ho):ao.getAttachment(po._id,ho)}))})["catch"](function(po){if(404!==po.status)throw po;return Ds(oo,io)}):Ds(oo,io)}function Ns(ao){var oo=[];return Object.keys(ao).forEach(function(io){var co=ao[io].missing;co.forEach(function(uo){oo.push({id:io,rev:uo})})}),{docs:oo,revs:!0}}function Rs(ao,oo,io,co){function po(yo){return yo._attachments&&0<Object.keys(yo._attachments).length}function ho(yo){return ao.allDocs({keys:yo,include_docs:!0}).then(function(vo){if(co.cancelled)throw new Error("cancelled");vo.rows.forEach(function(bo){bo.deleted||!bo.doc||!js(bo.value.rev)||po(bo.doc)||(mo.push(bo.doc),delete io[bo.id])})})}io=B(io);var mo=[],go=!0;return pr.resolve().then(function(){var yo=Object.keys(io).filter(function(vo){var bo=io[vo].missing;return 1===bo.length&&js(bo[0])});if(0<yo.length)return ho(yo)}).then(function(){var yo=Ns(io);return yo.docs.length?ao.bulkGet(yo).then(function(vo){if(co.cancelled)throw new Error("cancelled");return pr.all(vo.results.map(function(bo){return pr.all(bo.docs.map(function(Eo){var ko=Eo.ok;return Eo.error&&(go=!1),ko&&ko._attachments?Os(oo,ao,ko).then(function(So){var qo=Object.keys(ko._attachments);return So.forEach(function(xo,wo){var To=ko._attachments[qo[wo]];delete To.stub,delete To.length,To.data=xo}),ko}):ko}))})).then(function(bo){mo=mo.concat(de(bo).filter(Boolean))})}):void 0}).then(function(){return{ok:go,docs:mo}})}function Ps(ao,oo,io,co,uo){return ao.get(oo)["catch"](function(po){if(404===po.status)return"http"===ao.type()&&ne(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:co,_id:oo,history:[],replicator:Za,version:$a};throw po}).then(function(po){if(!uo.cancelled)return po.history=(po.history||[]).filter(function(ho){return ho.session_id!==co}),po.history.unshift({last_seq:io,session_id:co}),po.history=po.history.slice(0,eo),po.version=$a,po.replicator=Za,po.session_id=co,po.last_seq=io,ao.put(po)["catch"](function(ho){if(409===ho.status)return Ps(ao,oo,io,co,uo);throw ho})})}function Fs(ao,oo,io,co){this.src=ao,this.target=oo,this.id=io,this.returnValue=co}function Ms(ao,oo){return ao.session_id===oo.session_id?{last_seq:ao.last_seq,history:ao.history}:Bs(ao.history,oo.history)}function Bs(ao,oo){var io=ao[0],co=ao.slice(1),uo=oo[0],po=oo.slice(1);if(!io||0===oo.length)return{last_seq:no,history:[]};var ho=io.session_id;if(Us(ho,oo))return{last_seq:io.last_seq,history:ao};var _o=uo.session_id;return Us(_o,co)?{last_seq:uo.last_seq,history:po}:Bs(co,po)}function Us(ao,oo){var io=oo[0],co=oo.slice(1);return ao&&0!==oo.length&&(!(ao!==io.session_id)||Us(ao,co))}function Hs(ao){return"number"==typeof ao.status&&4===Math.floor(ao.status/100)}function Ws(ao,oo,io,co){if(!1===ao.retry)return oo.emit("error",io),void oo.removeAllListeners();if("function"!=typeof ao.back_off_function&&(ao.back_off_function=te),oo.emit("requestError",io),"active"===oo.state||"pending"===oo.state){oo.emit("paused",io),oo.state="stopped";var uo=function(){ao.current_back_off=ro},po=function(){oo.removeListener("active",uo)};oo.once("paused",po),oo.once("active",uo)}ao.current_back_off=ao.current_back_off||ro,ao.current_back_off=ao.back_off_function(ao.current_back_off),setTimeout(co,ao.current_back_off)}function zs(ao){return Object.keys(ao).sort(ur.collate).reduce(function(oo,io){return oo[io]=ao[io],oo},{})}function Ks(ao,oo,io){var co=io.doc_ids?io.doc_ids.sort(ur.collate):"",uo=io.filter?io.filter.toString():"",po="",ho="";return io.filter&&io.query_params&&(po=JSON.stringify(zs(io.query_params))),io.filter&&"_view"===io.filter&&(ho=io.view.toString()),pr.all([ao.id(),oo.id()]).then(function(_o){var fo=_o[0]+_o[1]+uo+ho+po+co;return new pr(function(mo){Et(fo,mo)})}).then(function(_o){return _o=_o.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+_o})}function Xs(ao,oo,io,co,uo){function po(){return Bo?pr.resolve():Ks(ao,oo,io).then(function(Ko){Mo=Ko,Bo=new Fs(ao,oo,Mo,co)})}function ho(){if(Ho=[],0!==Ao.docs.length){var Ko=Ao.docs;return oo.bulkDocs({docs:Ko,new_edits:!1}).then(function(Xo){if(co.cancelled)throw bo(),new Error("cancelled");var Go=[],Vo={};Xo.forEach(function(Jo){Jo.error&&(uo.doc_write_failures++,Go.push(Jo),Vo[Jo.id]=Jo)}),Uo=Uo.concat(Go),uo.docs_written+=Ao.docs.length-Go.length;var Qo=Go.filter(function(Jo){return"unauthorized"!==Jo.name&&"forbidden"!==Jo.name});if(Ko.forEach(function(Jo){var $o=Vo[Jo._id];$o?co.emit("denied",B($o)):Ho.push(Jo)}),0<Qo.length){var Yo=new Error("bulkDocs error");throw Yo.other_errors=Go,vo("target.bulkDocs failed to write docs",Yo),new Error("bulkWrite partial failure")}},function(Xo){throw uo.doc_write_failures+=Ko.length,Xo})}}function _o(){if(Ao.error)throw new Error("There was a problem getting docs.");uo.last_seq=Do=Ao.seq;var Ko=B(uo);return Ho.length&&(Ko.docs=Ho,co.emit("change",Ko)),Co=!0,Bo.writeCheckpoint(Ao.seq,Wo).then(function(){if(Co=!1,co.cancelled)throw bo(),new Error("cancelled");Ao=void 0,qo()})["catch"](wo)}function fo(){var Ko={};return Ao.changes.forEach(function(Xo){"_user/"===Xo.id||(Ko[Xo.id]=Xo.changes.map(function(Go){return Go.rev}))}),oo.revsDiff(Ko).then(function(Xo){if(co.cancelled)throw bo(),new Error("cancelled");Ao.diffs=Xo})}function mo(){return Rs(ao,oo,Ao.diffs,co).then(function(Ko){Ao.error=!Ko.ok,Ko.docs.forEach(function(Xo){delete Ao.diffs[Xo._id],uo.docs_read++,Ao.docs.push(Xo)})})}function go(){return co.cancelled||Ao?void 0:0===To.length?void yo(!0):void(Ao=To.shift(),fo().then(mo).then(ho).then(_o).then(go)["catch"](function(Ko){vo("batch processing terminated with error",Ko)}))}function yo(Ko){return 0===Lo.changes.length?void(0!==To.length||Ao||((Oo&&zo.live||jo)&&(co.state="pending",co.emit("paused")),jo&&bo())):void((Ko||jo||Lo.changes.length>=No)&&(To.push(Lo),Lo={seq:0,changes:[],docs:[]},("pending"===co.state||"stopped"===co.state)&&(co.state="active",co.emit("active")),go()))}function vo(Ko,Xo){Io||(!Xo.message&&(Xo.message=Ko),uo.ok=!1,uo.status="aborting",uo.errors.push(Xo),Uo=Uo.concat(Xo),To=[],Lo={seq:0,changes:[],docs:[]},bo())}function bo(){if(!Io&&!(co.cancelled&&(uo.status="cancelled",Co))){uo.status=uo.status||"complete",uo.end_time=new Date,uo.last_seq=Do,Io=!0;var Ko=Uo.filter(function(Go){return"unauthorized"!==Go.name&&"forbidden"!==Go.name});if(0<Ko.length){var Xo=Uo.pop();0<Uo.length&&(Xo.other_errors=Uo),Xo.result=uo,Ws(io,co,Xo,function(){Xs(ao,oo,io,co)})}else uo.errors=Uo,co.emit("complete",uo),co.removeAllListeners()}}function Eo(Ko){if(co.cancelled)return bo();var Xo=ie(io)(Ko);Xo&&(Lo.seq=Ko.seq,Lo.changes.push(Ko),yo(0===To.length&&zo.live))}function ko(Ko){if(Po=!1,co.cancelled)return bo();if(0<Ko.results.length)zo.since=Ko.last_seq,qo(),yo(!0);else{var Xo=function(){Oo?(zo.live=!0,qo()):jo=!0,yo(!0)};Ao||0!==Ko.results.length?Xo():(Co=!0,Bo.writeCheckpoint(Ko.last_seq,Wo).then(function(){Co=!1,uo.last_seq=Do=Ko.last_seq,Xo()})["catch"](wo))}}function So(Ko){return Po=!1,co.cancelled?bo():void vo("changes rejected",Ko)}function qo(){function Ko(){Go.cancel()}function Xo(){co.removeListener("cancel",Ko)}if(!(Po||jo||!(To.length<Ro))){Po=!0,co._changes&&(co.removeListener("cancel",co._abortChanges),co._changes.cancel()),co.once("cancel",Ko);var Go=ao.changes(zo).on("change",Eo);Go.then(Xo,Xo),Go.then(ko)["catch"](So),io.retry&&(co._changes=Go,co._abortChanges=Ko)}}function xo(){po().then(function(){return co.cancelled?void bo():Bo.getCheckpoint().then(function(Ko){Do=Ko,zo={since:Do,limit:No,batch_size:No,style:"all_docs",doc_ids:Fo,return_docs:!0},io.filter&&("string"==typeof io.filter?zo.filter=io.filter:zo.include_docs=!0),"heartbeat"in io&&(zo.heartbeat=io.heartbeat),"timeout"in io&&(zo.timeout=io.timeout),io.query_params&&(zo.query_params=io.query_params),io.view&&(zo.view=io.view),qo()})})["catch"](function(Ko){vo("getCheckpoint rejected with ",Ko)})}function wo(Ko){throw Co=!1,vo("writeCheckpoint completed with error",Ko),Ko}var To=[],Lo={seq:0,changes:[],docs:[]},Co=!1,jo=!1,Io=!1,Do=0,Oo=io.continuous||io.live||!1,No=io.batch_size||100,Ro=io.batches_limit||10,Po=!1,Fo=io.doc_ids,Uo=[],Ho=[],Wo=ge(),Ao,Mo,Bo;uo=uo||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var zo={};return co.ready(ao,oo),co.cancelled?void bo():void(!co._addedListeners&&(co.once("cancel",bo),"function"==typeof io.complete&&(co.once("error",io.complete),co.once("complete",function(Ko){io.complete(null,Ko)})),co._addedListeners=!0),"undefined"==typeof io.since?xo():po().then(function(){return Co=!0,Bo.writeCheckpoint(io.since,Wo)}).then(function(){return Co=!1,co.cancelled?void bo():void(Do=io.since,xo())})["catch"](wo))}function Gs(){or.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var ao=this,oo=new pr(function(io,co){ao.once("complete",io),ao.once("error",co)});ao.then=function(io,co){return oo.then(io,co)},ao["catch"]=function(io){return oo["catch"](io)},ao["catch"](function(){})}function Vs(ao,oo){var io=oo.PouchConstructor;return"string"==typeof ao?new io(ao,oo):ao}function Qs(ao,oo,io,co){if("function"==typeof io&&(co=io,io={}),"undefined"==typeof io&&(io={}),io.doc_ids&&!Array.isArray(io.doc_ids))throw re(jr,"`doc_ids` filter parameter is not a list.");io.complete=co,io=B(io),io.continuous=io.continuous||io.live,io.retry=!!("retry"in io)&&io.retry,io.PouchConstructor=io.PouchConstructor||this;var uo=new Gs(io),po=Vs(ao,io),ho=Vs(oo,io);return Xs(po,ho,io,uo),uo}function Ys(ao,oo,io,co){return"function"==typeof io&&(co=io,io={}),"undefined"==typeof io&&(io={}),io=B(io),io.PouchConstructor=io.PouchConstructor||this,ao=Vs(ao,io),oo=Vs(oo,io),new Js(ao,oo,io,co)}function Js(ao,oo,io,co){function uo(xo){bo.emit("change",{direction:"pull",change:xo})}function po(xo){bo.emit("change",{direction:"push",change:xo})}function ho(xo){bo.emit("denied",{direction:"push",doc:xo})}function _o(xo){bo.emit("denied",{direction:"pull",doc:xo})}function fo(){bo.pushPaused=!0,bo.pullPaused&&bo.emit("paused")}function mo(){bo.pullPaused=!0,bo.pushPaused&&bo.emit("paused")}function go(){bo.pushPaused=!1,bo.pullPaused&&bo.emit("active",{direction:"push"})}function yo(){bo.pullPaused=!1,bo.pushPaused&&bo.emit("active",{direction:"pull"})}function vo(xo){return function(wo,To){("change"===wo&&(To===uo||To===po)||"denied"===wo&&(To===_o||To===ho)||"paused"===wo&&(To===mo||To===fo)||"active"===wo&&(To===yo||To===go))&&(!(wo in So)&&(So[wo]={}),So[wo][xo]=!0,2===Object.keys(So[wo]).length&&bo.removeAllListeners(wo))}}var bo=this;this.canceled=!1;var Eo=io.push?Zs.extend({},io,io.push):io,ko=io.pull?Zs.extend({},io,io.pull):io;this.push=Qs(ao,oo,Eo),this.pull=Qs(oo,ao,ko),this.pushPaused=!0,this.pullPaused=!0;var So={};io.live&&(this.push.on("complete",bo.pull.cancel.bind(bo.pull)),this.pull.on("complete",bo.push.cancel.bind(bo.push))),this.on("newListener",function(xo){"change"===xo?(bo.pull.on("change",uo),bo.push.on("change",po)):"denied"===xo?(bo.pull.on("denied",_o),bo.push.on("denied",ho)):"active"===xo?(bo.pull.on("active",yo),bo.push.on("active",go)):"paused"==xo&&(bo.pull.on("paused",mo),bo.push.on("paused",fo))}),this.on("removeListener",function(xo){"change"===xo?(bo.pull.removeListener("change",uo),bo.push.removeListener("change",po)):"denied"===xo?(bo.pull.removeListener("denied",_o),bo.push.removeListener("denied",ho)):"active"===xo?(bo.pull.removeListener("active",yo),bo.push.removeListener("active",go)):"paused"==xo&&(bo.pull.removeListener("paused",mo),bo.push.removeListener("paused",fo))}),this.pull.on("removeListener",vo("pull")),this.push.on("removeListener",vo("push"));var qo=pr.all([this.push,this.pull]).then(function(xo){var wo={push:xo[0],pull:xo[1]};return bo.emit("complete",wo),co&&co(null,wo),bo.removeAllListeners(),wo},function(xo){if(bo.cancel(),co?co(xo):bo.emit("error",xo),bo.removeAllListeners(),co)throw xo});this.then=function(xo,wo){return qo.then(xo,wo)},this["catch"]=function(xo){return qo["catch"](xo)}}var Zs=L(10),tr=N(L(5)),nr=N(L(9)),sr=N(L(11)),rr=L(15),ar=N(L(4)),or=L(1),ir=N(L(16)),dr=N(L(17)),cr=N(L(18)),lr=N(L(7)),ur=L(13),pr="function"==typeof Promise?Promise:sr,hr=Function.prototype.toString,_r=hr.call(Object),fr=tr("pouchdb:api"),mr=6,gr;if(V())gr=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),gr=!!localStorage.getItem("_pouch_check_localstorage")}catch(ao){gr=!1}nr(J,or.EventEmitter),J.prototype.addListener=function(ao,oo,io,co){function uo(){function _o(){ho=!1}if(po._listeners[oo]){if(ho)return void(ho="waiting");ho=!0;var fo=z(co,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);io.changes(fo).on("change",function(mo){mo.seq>co.since&&!co.cancelled&&(co.since=mo.seq,co.onChange(mo))}).on("complete",function(){"waiting"===ho&&setTimeout(function(){uo()},0),ho=!1}).on("error",_o)}}if(!this._listeners[oo]){var po=this,ho=!1;this._listeners[oo]=uo,this.on(ao,uo)}},J.prototype.removeListener=function(ao,oo){oo in this._listeners&&or.EventEmitter.prototype.removeListener.call(this,ao,this._listeners[oo])},J.prototype.notifyLocalWindows=function(ao){V()?chrome.storage.local.set({dbName:ao}):Q()&&(localStorage[ao]="a"===localStorage[ao]?"b":"a")},J.prototype.notify=function(ao){this.emit(ao),this.notifyLocalWindows(ao)},nr(se,Error),se.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var yr=new se({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),vr=new se({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),br=new se({status:404,error:"not_found",reason:"missing"}),Er=new se({status:409,error:"conflict",reason:"Document update conflict"}),kr=new se({status:400,error:"bad_request",reason:"_id field must contain a string"}),Sr=new se({status:412,error:"missing_id",reason:"_id is required for puts"}),qr=new se({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),xr=new se({status:412,error:"precondition_failed",reason:"Database not open"}),wr=new se({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),Tr=new se({status:500,error:"badarg",reason:"Some query argument is invalid"}),Ar=new se({status:400,error:"invalid_request",reason:"Request was invalid"}),Lr=new se({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),Cr=new se({status:500,error:"doc_validation",reason:"Bad special document member"}),jr=new se({status:400,error:"bad_request",reason:"Something wrong with the request"}),Ir=new se({status:400,error:"bad_request",reason:"Document must be a JSON object"}),Dr=new se({status:404,error:"not_found",reason:"Database not found"}),Or=new se({status:500,error:"indexed_db_went_bad",reason:"unknown"}),Nr=new se({status:500,error:"web_sql_went_bad",reason:"unknown"}),Rr=new se({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),Pr=new se({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),Fr=new se({status:400,error:"bad_request",reason:"Invalid rev format"}),Mr=new se({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),Br=new se({status:412,error:"missing_stub"}),Ur=new se({status:413,error:"invalid_url",reason:"Provided URL is invalid"}),Hr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Wr="queryKey",zr=/(?:^|&)([^&=]*)=?([^&]*)/g,Kr=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Xr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");nr(Ue,or.EventEmitter),Ue.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Ue.prototype.doChanges=function(ao){var oo=this,io=ao.complete;if(ao=B(ao),"live"in ao&&!("continuous"in ao)&&(ao.continuous=ao.live),ao.processChange=He,"latest"===ao.since&&(ao.since="now"),ao.since||(ao.since=0),"now"===ao.since)return void this.db.info().then(function(po){return oo.isCancelled?void io(null,{status:"cancelled"}):void(ao.since=po.update_seq,oo.doChanges(ao))},io);if(ao.continuous&&"now"!==ao.since&&this.db.info().then(function(po){oo.startSeq=po.update_seq},function(po){if("idbNull"!==po.id)throw po}),ao.view&&!ao.filter&&(ao.filter="_view"),ao.filter&&"string"==typeof ao.filter&&("_view"===ao.filter?ao.view=pe(ao.view):ao.filter=pe(ao.filter),"http"!==this.db.type()&&!ao.doc_ids))return this.filterChanges(ao);"descending"in ao||(ao.descending=!1),ao.limit=0===ao.limit?1:ao.limit,ao.complete=io;var co=this.db._changes(ao);if(co&&"function"==typeof co.cancel){var uo=oo.cancel;oo.cancel=ar(function(po){co.cancel(),uo.apply(this,po)})}},Ue.prototype.filterChanges=function(ao){var oo=this,io=ao.complete;if("_view"===ao.filter){if(!ao.view||"string"!=typeof ao.view){var co=re(jr,"`view` filter parameter not found or invalid.");return io(co)}var uo=ue(ao.view);this.db.get("_design/"+uo[0],function(ho,_o){if(oo.isCancelled)return io(null,{status:"cancelled"});if(ho)return io(ae(ho));var fo=_o&&_o.views&&_o.views[uo[1]]&&_o.views[uo[1]].map;return fo?void(ao.filter=Me(fo),oo.doChanges(ao)):io(re(br,_o.views?"missing json key: "+uo[1]:"missing json key: views"))})}else{var po=ue(ao.filter);if(!po)return oo.doChanges(ao);this.db.get("_design/"+po[0],function(ho,_o){if(oo.isCancelled)return io(null,{status:"cancelled"});if(ho)return io(ae(ho));var fo=_o&&_o.filters&&_o.filters[po[1]];return fo?void(ao.filter=Fe(fo),oo.doChanges(ao)):io(re(br,_o&&_o.filters?"missing json key: "+po[1]:"missing json key: filters"))})}},nr($e,or.EventEmitter),$e.prototype.post=W("post",function(ao,oo,io){return"function"==typeof oo&&(io=oo,oo={}),"object"!==("undefined"==typeof ao?"undefined":_typeof(ao))||Array.isArray(ao)?io(re(Ir)):void this.bulkDocs({docs:[ao]},oo,Ke(io))}),$e.prototype.put=W("put",ar(function(ao){function oo(){ho||($("warn","db.put(doc, id, rev) has been deprecated and will be removed in a future release, please use db.put({_id: id, _rev: rev}) instead"),ho=!0)}var ho=!1,_o=ao.shift(),fo="_id"in _o,io,co,uo,po;if("object"!==("undefined"==typeof _o?"undefined":_typeof(_o))||Array.isArray(_o))return po=ao.pop(),po(re(Ir));for(;io=ao.shift(),co="undefined"==typeof io?"undefined":_typeof(io),"string"!==co||fo?"string"===co&&fo&&!("_rev"in _o)?(oo(),_o._rev=io):"object"===co?uo=io:"function"==co&&(po=io):(oo(),_o._id=io,fo=!0),!!ao.length;);return uo=uo||{},ce(_o._id),Pe(_o._id)&&"function"==typeof this._putLocal?_o._deleted?this._removeLocal(_o,po):this._putLocal(_o,po):void this.bulkDocs({docs:[_o]},uo,Ke(po))})),$e.prototype.putAttachment=W("putAttachment",function(ao,oo,io,co,uo){function po(_o){var fo="_rev"in _o?parseInt(_o._rev,10):0;return _o._attachments=_o._attachments||{},_o._attachments[oo]={content_type:uo,data:co,revpos:++fo},ho.put(_o)}var ho=this;return"function"==typeof uo&&(uo=co,co=io,io=null),"undefined"==typeof uo&&(uo=co,co=io,io=null),ho.get(ao).then(function(_o){if(_o._rev!==io)throw re(Er);return po(_o)},function(_o){if(_o.reason===br.message)return po({_id:ao});throw _o})}),$e.prototype.removeAttachment=W("removeAttachment",function(ao,oo,io,co){var uo=this;uo.get(ao,function(po,ho){return po?void co(po):ho._rev===io?ho._attachments?void(delete ho._attachments[oo],0===Object.keys(ho._attachments).length&&delete ho._attachments,uo.put(ho,co)):co():void co(re(Er))})}),$e.prototype.remove=W("remove",function(ao,oo,io,co){var uo;"string"==typeof oo?(uo={_id:ao,_rev:oo},"function"==typeof io&&(co=io,io={})):(uo=ao,"function"==typeof oo?(co=oo,io={}):(co=io,io=oo)),io=io||{},io.was_delete=!0;var po={_id:uo._id,_rev:uo._rev||io.rev,_deleted:!0};return Pe(po._id)&&"function"==typeof this._removeLocal?this._removeLocal(uo,co):void this.bulkDocs({docs:[po]},io,Ke(co))}),$e.prototype.revsDiff=W("revsDiff",function(ao,oo,io){function co(fo,mo){_o.has(fo)||_o.set(fo,{missing:[]}),_o.get(fo).missing.push(mo)}function uo(fo,mo){var go=ao[fo].slice(0);ve(mo,function(yo,vo,bo,Eo,ko){var So=vo+"-"+bo,qo=go.indexOf(So);-1===qo||(go.splice(qo,1),"available"!==ko.status&&co(fo,So))}),go.forEach(function(yo){co(fo,yo)})}"function"==typeof oo&&(io=oo,oo={});var po=Object.keys(ao);if(!po.length)return io(null,{});var ho=0,_o=new rr.Map;po.map(function(fo){this._getRevisionTree(fo,function(mo,go){if(mo&&404===mo.status&&"missing"===mo.message)_o.set(fo,{missing:ao[fo]});else{if(mo)return io(mo);uo(fo,go)}if(++ho===po.length){var yo={};return _o.forEach(function(vo,bo){yo[bo]=vo}),io(null,yo)}})},this)}),$e.prototype.bulkGet=W("bulkGet",function(ao,oo){G(this,ao,oo)}),$e.prototype.compactDocument=W("compactDocument",function(ao,oo,io){var co=this;this._getRevisionTree(ao,function(uo,po){if(uo)return io(uo);var ho=Ve(po),_o=[],fo=[];Object.keys(ho).forEach(function(mo){ho[mo]>oo&&_o.push(mo)}),ve(po,function(mo,go,yo,vo,bo){var Eo=go+"-"+yo;"available"===bo.status&&-1!==_o.indexOf(Eo)&&fo.push(Eo)}),co._doCompaction(ao,fo,io)})}),$e.prototype.compact=W("compact",function(ao,oo){"function"==typeof ao&&(oo=ao,ao={});var io=this;ao=ao||{},io._compactionQueue=io._compactionQueue||[],io._compactionQueue.push({opts:ao,callback:oo}),1===io._compactionQueue.length&&Ye(io)}),$e.prototype._compact=function(ao,oo){var uo=this,po={return_docs:!1,last_seq:ao.last_seq||0},ho=[];uo.changes(po).on("change",function(_o){ho.push(uo.compactDocument(_o.id,0))}).on("complete",function(_o){var fo=_o.last_seq;pr.all(ho).then(function(){return _e(uo,"_local/compaction",function(go){return(!go.last_seq||go.last_seq<fo)&&(go.last_seq=fo,go)})}).then(function(){oo(null,{ok:!0})})["catch"](oo)}).on("error",oo)},$e.prototype.get=W("get",function(ao,oo,io){function co(){var fo=[],mo=uo.length;return mo?void uo.forEach(function(go){po.get(ao,{rev:go,revs:oo.revs,attachments:oo.attachments},function(yo,vo){yo?fo.push({missing:go}):fo.push({ok:vo}),mo--,mo||io(null,fo)})}):io(null,fo)}if("function"==typeof oo&&(io=oo,oo={}),"string"!=typeof ao)return io(re(kr));if(Pe(ao)&&"function"==typeof this._getLocal)return this._getLocal(ao,io);var uo=[],po=this;if(oo.open_revs){if("all"===oo.open_revs)this._getRevisionTree(ao,function(fo,mo){return fo?io(fo):void(uo=Ee(mo).map(function(go){return go.rev}),co())});else if(Array.isArray(oo.open_revs)){uo=oo.open_revs;for(var ho=0,_o;ho<uo.length;ho++)if(_o=uo[ho],!("string"==typeof _o&&/^\d+-/.test(_o)))return io(re(Fr));co()}else return io(re(wr,"function_clause"));return}return this._get(ao,oo,function(fo,mo){if(fo)return io(fo);var go=mo.doc,yo=mo.metadata,vo=mo.ctx;if(oo.conflicts){var bo=ke(yo);bo.length&&(go._conflicts=bo)}if(Re(yo,go._rev)&&(go._deleted=!0),oo.revs||oo.revs_info){var Eo=qe(yo.rev_tree),ko=ze(Eo,function(Lo){return-1!==Lo.ids.map(function(Co){return Co.id}).indexOf(go._rev.split("-")[1])}),So=ko.ids.map(function(Lo){return Lo.id}).indexOf(go._rev.split("-")[1])+1,qo=ko.ids.length-So;if(ko.ids.splice(So,qo),ko.ids.reverse(),oo.revs&&(go._revisions={start:ko.pos+ko.ids.length-1,ids:ko.ids.map(function(Lo){return Lo.id})}),oo.revs_info){var xo=ko.pos+ko.ids.length;go._revs_info=ko.ids.map(function(Lo){return xo--,{rev:xo+"-"+Lo.id,status:Lo.opts.status}})}}if(oo.attachments&&go._attachments){var wo=go._attachments,To=Object.keys(wo).length;if(0===To)return io(null,go);Object.keys(wo).forEach(function(Lo){this._getAttachment(go._id,Lo,wo[Lo],{rev:go._rev,binary:oo.binary,ctx:vo},function(Co,jo){var Io=go._attachments[Lo];Io.data=jo,delete Io.stub,delete Io.length,--To||io(null,go)})},po)}else{if(go._attachments)for(var Ao in go._attachments)go._attachments.hasOwnProperty(Ao)&&(go._attachments[Ao].stub=!0);io(null,go)}})}),$e.prototype.getAttachment=W("getAttachment",function(ao,oo,io,co){var uo=this;io instanceof Function&&(co=io,io={}),this._get(ao,io,function(po,ho){return po?co(po):ho.doc._attachments&&ho.doc._attachments[oo]?void(io.ctx=ho.ctx,io.binary=!0,uo._getAttachment(ao,oo,ho.doc._attachments[oo],io,co)):co(re(br))})}),$e.prototype.allDocs=W("allDocs",function(ao,oo){if("function"==typeof ao&&(oo=ao,ao={}),ao.skip="undefined"==typeof ao.skip?0:ao.skip,ao.start_key&&(ao.startkey=ao.start_key),ao.end_key&&(ao.endkey=ao.end_key),"keys"in ao){if(!Array.isArray(ao.keys))return oo(new TypeError("options.keys must be an array"));var io=["startkey","endkey","key"].filter(function(co){return co in ao})[0];if(io)return void oo(re(Lr,"Query parameter `"+io+"` is not compatible with multi-get"));if("http"!==this.type())return Qe(this,ao,oo)}return this._allDocs(ao,oo)}),$e.prototype.changes=function(ao,oo){return"function"==typeof ao&&(oo=ao,ao={}),new Ue(this,ao,oo)},$e.prototype.close=W("close",function(ao){return this._closed=!0,this._close(ao)}),$e.prototype.info=W("info",function(ao){var oo=this;this._info(function(io,co){return io?ao(io):void(co.db_name=co.db_name||oo._db_name,co.auto_compaction=!!(oo.auto_compaction&&"http"!==oo.type()),co.adapter=oo.type(),ao(null,co))})}),$e.prototype.id=W("id",function(ao){return this._id(ao)}),$e.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},$e.prototype.bulkDocs=W("bulkDocs",function(ao,oo,io){if("function"==typeof oo&&(io=oo,oo={}),oo=oo||{},Array.isArray(ao)&&(ao={docs:ao}),!ao||!ao.docs||!Array.isArray(ao.docs))return io(re(vr));for(var co=0;co<ao.docs.length;++co)if("object"!==_typeof(ao.docs[co])||Array.isArray(ao.docs[co]))return io(re(Ir));var uo;return(ao.docs.forEach(function(po){po._attachments&&Object.keys(po._attachments).forEach(function(ho){uo=uo||Je(ho)})}),uo)?io(re(jr,uo)):("new_edits"in oo||("new_edits"in ao?oo.new_edits=ao.new_edits:oo.new_edits=!0),oo.new_edits||"http"===this.type()||ao.docs.sort(Ge),Xe(ao.docs),this._bulkDocs(ao,oo,function(po,ho){return po?io(po):void(!oo.new_edits&&(ho=ho.filter(function(_o){return _o.error})),io(null,ho))}))}),$e.prototype.registerDependentDatabase=W("registerDependentDatabase",function(ao,oo){var co=new this.constructor(ao,this.__opts);_e(this,"_local/_pouch_dependentDbs",function(uo){return(uo.dependentDbs=uo.dependentDbs||{},!uo.dependentDbs[ao])&&(uo.dependentDbs[ao]=!0,uo)}).then(function(){oo(null,{db:co})})["catch"](oo)}),$e.prototype.destroy=W("destroy",function(ao,oo){function io(){co._destroy(ao,function(po,ho){return po?oo(po):void(co._destroyed=!0,co.emit("destroyed"),oo(null,ho||{ok:!0}))})}"function"==typeof ao&&(oo=ao,ao={});var co=this,uo=!("use_prefix"in co)||co.use_prefix;return"http"===co.type()?io():void co.get("_local/_pouch_dependentDbs",function(po,ho){if(po)return 404===po.status?io():oo(po);var _o=ho.dependentDbs,fo=co.constructor,mo=Object.keys(_o).map(function(go){var yo=uo?go.replace(new RegExp("^"+fo.prefix),""):go;return new fo(yo,co.__opts).destroy()});pr.all(mo).then(io,oo)})}),Ze.prototype.execute=function(){var ao;if(this.failed)for(;ao=this.queue.shift();)ao(this.failed);else for(;ao=this.queue.shift();)ao()},Ze.prototype.fail=function(ao){this.failed=ao,this.execute()},Ze.prototype.ready=function(ao){this.isReady=!0,this.db=ao,this.execute()},Ze.prototype.addTask=function(ao){this.queue.push(ao),this.failed&&this.execute()},nr(nt,$e),nt.debug=tr,nt.adapters={},nt.preferredAdapters=[],nt.prefix="_pouch_";var Gr=new or.EventEmitter;(function(ao){Object.keys(or.EventEmitter.prototype).forEach(function(io){"function"==typeof or.EventEmitter.prototype[io]&&(ao[io]=Gr[io].bind(Gr))});var oo=ao._destructionListeners=new rr.Map;ao.on("destroyed",function(co){oo.get(co).forEach(function(uo){uo()}),oo["delete"](co)})})(nt),nt.parseAdapter=function(ao,oo){var io=ao.match(/([a-z\-]*):\/\/(.*)/),co,uo;if(io){if(ao=/http(s?)/.test(io[1])?io[1]+"://"+io[2]:io[2],co=io[1],!nt.adapters[co].valid())throw"Invalid adapter";return{name:ao,adapter:io[1]}}var po="idb"in nt.adapters&&"websql"in nt.adapters&&Q()&&localStorage["_pouch__websqldb_"+nt.prefix+ao];if(oo.adapter)uo=oo.adapter;else if("undefined"!=typeof oo&&oo.db)uo="leveldb";else for(var ho=0;ho<nt.preferredAdapters.length;++ho)if(uo=nt.preferredAdapters[ho],uo in nt.adapters){if(po&&"idb"===uo){$("log","PouchDB is downgrading \""+ao+"\" to WebSQL to avoid data loss, because it was already opened with WebSQL.");continue}break}co=nt.adapters[uo];var _o=co&&"use_prefix"in co?co.use_prefix:!0;return{name:_o?nt.prefix+ao:ao,adapter:uo}},nt.adapter=function(ao,oo,io){oo.valid()&&(nt.adapters[ao]=oo,io&&nt.preferredAdapters.push(ao))},nt.plugin=function(ao){return"function"==typeof ao?ao(nt):Object.keys(ao).forEach(function(oo){nt.prototype[oo]=ao[oo]}),nt},nt.defaults=function(ao){function oo(io,co,uo){return this instanceof oo?void(("function"==typeof co||"undefined"==typeof co)&&(uo=co,co={}),io&&"object"===("undefined"==typeof io?"undefined":_typeof(io))&&(co=io,io=void 0),co=Zs.extend({},ao,co),nt.call(this,io,co,uo)):new oo(io,co,uo)}return nr(oo,nt),oo.preferredAdapters=nt.preferredAdapters.slice(),Object.keys(nt).forEach(function(io){io in oo||(oo[io]=nt[io])}),oo};nt.version="5.4.5";var Qr=rt(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Yr=rt(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),Jr=function(oo){return atob(oo)},$r=function(oo){return btoa(oo)},Zr=O.setImmediate||O.setTimeout,ea=32768,ta=5,na="document-store",sa="by-sequence",ra="attach-store",aa="attach-seq-store",oa="meta-store",ia="local-store",da="detect-blob-support",ca={running:!1,queue:[]},la=new rr.Map,pa,ha=new J,_a=new rr.Map;Yt.valid=function(){var ao="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!ao&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var fa=7,ma=an("document-store"),ga=an("by-sequence"),ya=an("attach-store"),va=an("local-store"),ba=an("metadata-store"),Ea=an("attach-seq-store"),ka=new rr.Map,Sa=new J,qa=1,xa="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+ga+" (seq, deleted)",wa="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+ga+" (doc_id, rev)",Ta="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+ma+" (winningseq)",Aa="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Ea+" (seq)",La="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Ea+" (digest, seq)",Ca=ga+".seq = "+ma+".winningseq",ja=ga+".seq AS seq, "+ga+".deleted AS deleted, "+ga+".json AS data, "+ga+".rev AS rev, "+ma+".json AS metadata";An.valid=function(){return"undefined"!=typeof cordova||xn()},An.use_prefix=!0;var Ia=function(){try{return new XMLHttpRequest,!0}catch(ao){return!1}}(),Da=function(){},Oa=25,Na=50,Ra={},Pa=1800,Fa=tr("pouchdb:http");Kn.valid=function(){return!0},Gn.prototype.add=function(ao){return this.promise=this.promise["catch"](function(){}).then(function(){return ao()}),this.promise},Gn.prototype.finish=function(){return this.promise};var Ma=function(oo,io){return io&&oo.then(function(co){D.nextTick(function(){io(null,co)})},function(co){D.nextTick(function(){io(co)})}),oo},Ua=function(oo,io){return oo.then(function(co){return io().then(function(){return co})},function(co){return io().then(function(){throw co})})},Ha=function(oo,io){return function(){var co=arguments,uo=this;return oo.add(function(){return io.apply(uo,co)})}},Wa=function(oo){for(var io={},co=0,uo=oo.length;co<uo;co++)io["$"+oo[co]]=!0;var po=Object.keys(io),ho=Array(po.length);for(co=0,uo=po.length;co<uo;co++)ho[co]=po[co].substring(1);return ho},za={},Ka=new Gn,Xa=50,Ga=$.bind(null,"log"),Va={_sum:function(oo,io){return os(io)},_count:function(oo,io){return io.length},_stats:function(oo,io){return{sum:os(io),min:Math.min.apply(null,io),max:Math.max.apply(null,io),count:io.length,sumsqr:function(uo){for(var po=0,ho=0,_o=uo.length,fo;ho<_o;ho++)fo=uo[ho],po+=fo*fo;return po}(io)}}},Qa=function(oo){return ar(function(io){var co=io.pop(),uo=oo.apply(this,io);return"function"==typeof co&&Ma(uo,co),uo})}(function(){var ao=this;return"http"===ao.type()?xs(ao):"function"==typeof ao._viewCleanup?_s(ao):ws(ao)});nr(As,Error),nr(Ls,Error),nr(Cs,Error);var $a=1,Za="pouchdb",eo=5,no=0;Fs.prototype.writeCheckpoint=function(ao,oo){var io=this;return this.updateTarget(ao,oo).then(function(){return io.updateSource(ao,oo)})},Fs.prototype.updateTarget=function(ao,oo){return Ps(this.target,this.id,ao,oo,this.returnValue)},Fs.prototype.updateSource=function(ao,oo){var io=this;return this.readOnlySource?pr.resolve(!0):Ps(this.src,this.id,ao,oo,this.returnValue)["catch"](function(co){if(Hs(co))return io.readOnlySource=!0,!0;throw co})};var so={undefined:function(oo,io){return 0===ur.collate(oo.last_seq,io.last_seq)?io.last_seq:0},1:function(oo,io){return Ms(io,oo).last_seq}};Fs.prototype.getCheckpoint=function(){var ao=this;return ao.target.get(ao.id).then(function(oo){return ao.readOnlySource?pr.resolve(oo.last_seq):ao.src.get(ao.id).then(function(io){if(oo.version!==io.version)return no;var co;return co=oo.version?oo.version.toString():"undefined",co in so?so[co](oo,io):no},function(io){if(404===io.status&&oo.last_seq)return ao.src.put({_id:ao.id,last_seq:no}).then(function(){return no},function(co){return Hs(co)?(ao.readOnlySource=!0,oo.last_seq):no});throw io})})["catch"](function(oo){if(404!==oo.status)throw oo;return no})};var ro=0;nr(Gs,or.EventEmitter),Gs.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Gs.prototype.ready=function(ao,oo){function io(){uo.cancel()}var uo=this;uo._readyCalled||(uo._readyCalled=!0,ao.once("destroyed",io),oo.once("destroyed",io),uo.once("complete",function(){ao.removeListener("destroyed",io),oo.removeListener("destroyed",io)}))},nr(Js,or.EventEmitter),Js.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},nt.plugin(function(ao){ao.adapter("idb",Yt,!0)}).plugin(function(ao){ao.adapter("websql",An,!0)}).plugin(function(ao){ao.adapter("http",Kn,!1),ao.adapter("https",Kn,!1)}).plugin({query:function(oo,io,co){"function"==typeof io&&(co=io,io={}),io=io?cs(io):{},"function"==typeof oo&&(oo={map:oo});var uo=this,po=pr.resolve().then(function(){return Ts(uo,oo,io)});return Ma(po,co),po},viewCleanup:Qa}).plugin(function(ao){ao.replicate=Qs,ao.sync=Ys}),C.exports=nt}).call(this,L(2),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{1:1,2:2,4:4,5:5,7:7,9:9,10:10,11:11,13:13,15:15,16:16,17:17,18:18}],4:[function(L,C){"use strict";C.exports=function(O){return function(){var N=arguments.length;if(N){for(var R=[],P=-1;++P<N;)R[P]=arguments[P];return O.call(this,R)}return O.call(this,[])}}},{}],5:[function(L,C,I){function P(){var M;try{M=I.storage.debug}catch(B){}return M}I=C.exports=L(6),I.log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},I.formatArgs=function(){var M=arguments,B=this.useColors;if(M[0]=(B?"%c":"")+this.namespace+(B?" %c":" ")+M[0]+(B?"%c ":" ")+"+"+I.humanize(this.diff),!B)return M;var U="color: "+this.color;M=[M[0],U,"color: inherit"].concat(Array.prototype.slice.call(M,1));var H=0,W=0;return M[0].replace(/%[a-z%]/g,function(z){"%%"===z||(H++,"%c"===z&&(W=H))}),M.splice(W,0,U),M},I.save=function(M){try{null==M?I.storage.removeItem("debug"):I.storage.debug=M}catch(B){}},I.load=P,I.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},I.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(M){}}(),I.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],I.formatters.j=function(M){return JSON.stringify(M)},I.enable(P())},{6:6}],6:[function(L,C,I){function D(){return I.colors[M++%I.colors.length]}I=C.exports=function(U){function H(){}function W(){var K=W,X=+new Date,G=X-(B||X);K.diff=G,K.prev=B,K.curr=X,B=X,null==K.useColors&&(K.useColors=I.useColors()),null==K.color&&K.useColors&&(K.color=D());var V=Array.prototype.slice.call(arguments);V[0]=I.coerce(V[0]),"string"!=typeof V[0]&&(V=["%o"].concat(V));var Q=0;V[0]=V[0].replace(/%([a-z%])/g,function(J,$){if("%%"===J)return J;Q++;var Z=I.formatters[$];if("function"==typeof Z){var te=V[Q];J=Z.call(K,te),V.splice(Q,1),Q--}return J}),"function"==typeof I.formatArgs&&(V=I.formatArgs.apply(K,V));var Y=W.log||I.log||console.log.bind(console);Y.apply(K,V)}H.enabled=!1,W.enabled=!0;var z=I.enabled(U)?W:H;return z.namespace=U,z},I.coerce=function(U){return U instanceof Error?U.stack||U.message:U},I.disable=function(){I.enable("")},I.enable=function(U){I.save(U);for(var H=(U||"").split(/[\s,]+/),W=H.length,z=0;z<W;z++)H[z]&&(U=H[z].replace(/\*/g,".*?"),"-"===U[0]?I.skips.push(new RegExp("^"+U.substr(1)+"$")):I.names.push(new RegExp("^"+U+"$")))},I.enabled=function(U){var H,W;for(H=0,W=I.skips.length;H<W;H++)if(I.skips[H].test(U))return!1;for(H=0,W=I.names.length;H<W;H++)if(I.names[H].test(U))return!0;return!1},I.humanize=L(12),I.names=[],I.skips=[],I.formatters={};var M=0,B},{12:12}],7:[function(L,C,I){(function(D,O){"function"==typeof E&&E.amd?E([],O):"object"===("undefined"==typeof I?"undefined":_typeof(I))?C.exports=O():(D.PromisePool=O(),D.promisePool=D.PromisePool)})(this,function(){"use strict";var D=function(){this._listeners={}};D.prototype.addEventListener=function(B,U){this._listeners[B]=this._listeners[B]||[],0>this._listeners[B].indexOf(U)&&this._listeners[B].push(U)},D.prototype.removeEventListener=function(B,U){if(this._listeners[B]){var H=this._listeners[B].indexOf(U);0<=H&&this._listeners[B].splice(H,1)}},D.prototype.dispatchEvent=function(B){if(this._listeners[B.type]&&this._listeners[B.type].length)for(var U=this._listeners[B.type].slice(),H=0,W=U.length;H<W;++H)U[H].call(this,B)};var O=function(U){return"function"==typeof U.constructor&&"GeneratorFunction"===U.constructor.name},N=function(U){return{next:function(){var W=U();return W?{value:W}:{done:!0}}}},R=function(U){var H=!1;return{next:function(){return H?{done:!0}:(H=!0,{value:U})}}},P=function(U,H){var W="undefined"==typeof U?"undefined":_typeof(U);if("object"===W){if("function"==typeof U.next)return U;if("function"==typeof U.then)return R(U)}return"function"===W?O(U)?U():N(U):R(H.resolve(U))},F=function(U,H,W){this.target=U,this.type=H,this.data=W},M=function(U,H,W){if(D.call(this),"number"!=typeof H||Math.floor(H)!==H||1>H)throw new Error("Invalid concurrency");this._concurrency=H,this._options=W||{},this._options.promise=this._options.promise||Promise,this._iterator=P(U,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return M.prototype=new D,M.prototype.constructor=M,M.prototype.concurrency=function(B){return"undefined"!=typeof B&&(this._concurrency=B,this.active()&&this._proceed()),this._concurrency},M.prototype.size=function(){return this._size},M.prototype.active=function(){return!!this._promise},M.prototype.promise=function(){return this._promise},M.prototype.start=function(){var B=this,U=this._options.promise;return this._promise=new U(function(H,W){B._callbacks={reject:W,resolve:H},B._proceed()}),this._promise},M.prototype._fireEvent=function(B,U){this.dispatchEvent(new F(this,B,U))},M.prototype._settle=function(B){B?this._callbacks.reject(B):this._callbacks.resolve(),this._promise=null,this._callbacks=null},M.prototype._onPooledPromiseFulfilled=function(B,U){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:B,result:U}),this._proceed())},M.prototype._onPooledPromiseRejected=function(B,U){this._size--,this.active()&&(this._fireEvent("rejected",{promise:B,error:U}),this._settle(U||new Error("Unknown error")))},M.prototype._trackPromise=function(B){var U=this;B.then(function(H){U._onPooledPromiseFulfilled(B,H)},function(H){U._onPooledPromiseRejected(B,H)})["catch"](function(H){U._settle(new Error("Promise processing failed: "+H))})},M.prototype._proceed=function(){if(!this._done){for(var B=null;this._size<this._concurrency&&!(B=this._iterator.next()).done;)this._size++,this._trackPromise(B.value);this._done=null===B||!!B.done}this._done&&0===this._size&&this._settle()},M.PromisePoolEvent=F,M.PromisePool=M,M})},{}],8:[function(L,C){(function(D){"use strict";function O(){H=!0;for(var X=W.length,z,K;X;){for(K=W,W=[],z=-1;++z<X;)K[z]();X=W.length}H=!1}var R=D.MutationObserver||D.WebKitMutationObserver,P;if(R){var F=0,M=new R(O),B=D.document.createTextNode("");M.observe(B,{characterData:!0}),P=function(){B.data=F=++F%2}}else if(!D.setImmediate&&"undefined"!=typeof D.MessageChannel){var U=new D.MessageChannel;U.port1.onmessage=O,P=function(){U.port2.postMessage(0)}}else P="document"in D&&"onreadystatechange"in D.document.createElement("script")?function(){var K=D.document.createElement("script");K.onreadystatechange=function(){O(),K.onreadystatechange=null,K.parentNode.removeChild(K),K=null},D.document.documentElement.appendChild(K)}:function(){setTimeout(O,0)};var H,W=[];C.exports=function(z){1!==W.push(z)||H||P()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],9:[function(L,C){C.exports="function"==typeof Object.create?function(O,N){O.super_=N,O.prototype=Object.create(N.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}})}:function(O,N){O.super_=N;var R=function(){};R.prototype=N.prototype,O.prototype=new R,O.prototype.constructor=O}},{}],10:[function(){(function(){var D=Array.prototype.slice,O=Array.prototype.forEach;this.extend=function R(P){if("object"!==("undefined"==typeof P?"undefined":_typeof(P)))throw P+" is not an object";var F=D.call(arguments,1);return O.call(F,function(M){if(M)for(var B in M)"object"===_typeof(M[B])&&P[B]?R.call(P,P[B],M[B]):P[B]=M[B]}),P}}).call(this)},{}],11:[function(L,C){"use strict";function D(){}function O(Q){if("function"!=typeof Q)throw new TypeError("resolver must be a function");this.state=V,this.queue=[],this.outcome=void 0,Q!==D&&F(this,Q)}function N(Q,Y,J){this.promise=Q,"function"==typeof Y&&(this.onFulfilled=Y,this.callFulfilled=this.otherCallFulfilled),"function"==typeof J&&(this.onRejected=J,this.callRejected=this.otherCallRejected)}function R(Q,Y,J){z(function(){var $;try{$=Y(J)}catch(Z){return K.reject(Q,Z)}$===Q?K.reject(Q,new TypeError("Cannot resolve promise with itself")):K.resolve(Q,$)})}function P(Q){var Y=Q&&Q.then;if(Q&&"object"===("undefined"==typeof Q?"undefined":_typeof(Q))&&"function"==typeof Y)return function(){Y.apply(Q,arguments)}}function F(Q,Y){function J(se){te||(te=!0,K.reject(Q,se))}function $(se){te||(te=!0,K.resolve(Q,se))}var te=!1,ne=M(function(){Y($,J)});"error"===ne.status&&J(ne.value)}function M(Q,Y){var J={};try{J.value=Q(Y),J.status="success"}catch($){J.status="error",J.value=$}return J}var z=L(8),K={},X=["REJECTED"],G=["FULFILLED"],V=["PENDING"];C.exports=O,O.prototype["catch"]=function(Q){return this.then(null,Q)},O.prototype.then=function(Q,Y){if("function"!=typeof Q&&this.state===G||"function"!=typeof Y&&this.state===X)return this;var J=new this.constructor(D);if(this.state!==V){var $=this.state===G?Q:Y;R(J,$,this.outcome)}else this.queue.push(new N(J,Q,Y));return J},N.prototype.callFulfilled=function(Q){K.resolve(this.promise,Q)},N.prototype.otherCallFulfilled=function(Q){R(this.promise,this.onFulfilled,Q)},N.prototype.callRejected=function(Q){K.reject(this.promise,Q)},N.prototype.otherCallRejected=function(Q){R(this.promise,this.onRejected,Q)},K.resolve=function(Q,Y){var J=M(P,Y);if("error"===J.status)return K.reject(Q,J.value);var $=J.value;if($)F(Q,$);else{Q.state=G,Q.outcome=Y;for(var Z=-1,te=Q.queue.length;++Z<te;)Q.queue[Z].callFulfilled(Y)}return Q},K.reject=function(Q,Y){Q.state=X,Q.outcome=Y;for(var J=-1,$=Q.queue.length;++J<$;)Q.queue[J].callRejected(Y);return Q},O.resolve=function(Q){return Q instanceof this?Q:K.resolve(new this(D),Q)},O.reject=function(Q){var Y=new this(D);return K.reject(Y,Q)},O.all=function(Q){function Y(ae,oe){J.resolve(ae).then(function(de){te[oe]=de,++ne!==$||Z||(Z=!0,K.resolve(re,te))},function(de){Z||(Z=!0,K.reject(re,de))})}var J=this;if("[object Array]"!==Object.prototype.toString.call(Q))return this.reject(new TypeError("must be an array"));var $=Q.length,Z=!1;if(!$)return this.resolve([]);for(var te=Array($),ne=0,se=-1,re=new this(D);++se<$;)Y(Q[se],se);return re},O.race=function(Q){function Y(se){J.resolve(se).then(function(re){Z||(Z=!0,K.resolve(ne,re))},function(re){Z||(Z=!0,K.reject(ne,re))})}var J=this;if("[object Array]"!==Object.prototype.toString.call(Q))return this.reject(new TypeError("must be an array"));var $=Q.length,Z=!1;if(!$)return this.resolve([]);for(var te=-1,ne=new this(D);++te<$;)Y(Q[te]);return ne}},{8:8}],12:[function(L,C){function D(H){if(H=""+H,!(1e4<H.length)){var W=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(H);if(W){var z=parseFloat(W[1]),K=(W[2]||"ms").toLowerCase();return"years"===K||"year"===K||"yrs"===K||"yr"===K||"y"===K?z*U:"days"===K||"day"===K||"d"===K?z*B:"hours"===K||"hour"===K||"hrs"===K||"hr"===K||"h"===K?z*M:"minutes"===K||"minute"===K||"mins"===K||"min"===K||"m"===K?z*F:"seconds"===K||"second"===K||"secs"===K||"sec"===K||"s"===K?z*P:"milliseconds"===K||"millisecond"===K||"msecs"===K||"msec"===K||"ms"===K?z:void 0}}}function O(H){return H>=B?Math.round(H/B)+"d":H>=M?Math.round(H/M)+"h":H>=F?Math.round(H/F)+"m":H>=P?Math.round(H/P)+"s":H+"ms"}function N(H){return R(H,B,"day")||R(H,M,"hour")||R(H,F,"minute")||R(H,P,"second")||H+" ms"}function R(H,W,z){return H<W?void 0:H<1.5*W?Math.floor(H/W)+" "+z:Math.ceil(H/W)+" "+z+"s"}var P=1e3,F=60*P,M=60*F,B=24*M,U=365.25*B;C.exports=function(H,W){return W=W||{},"string"==typeof H?D(H):W.long?N(H):O(H)}},{}],13:[function(L,C,I){"use strict";function D(K){if(null!==K)switch("undefined"==typeof K?"undefined":_typeof(K)){case"boolean":return K?1:0;case"number":return B(K);case"string":return K.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01");case"object":var X=Array.isArray(K),G=X?K:Object.keys(K),V=-1,Q=G.length,Y="";if(X)for(;++V<Q;)Y+=I.toIndexableString(G[V]);else for(;++V<Q;){var J=G[V];Y+=I.toIndexableString(J)+I.toIndexableString(K[J])}return Y;}return""}function O(K,X){var G=X,V,Q="1"===K[X];if(Q)V=0,X++;else{var Y="0"===K[X];X++;var J="",$=K.substring(X,X+H),Z=parseInt($,10)+U;for(Y&&(Z=-Z),X+=H;;){var te=K[X];if("\0"===te)break;else J+=te;X++}J=J.split("."),V=1===J.length?parseInt(J,10):parseFloat(J[0]+"."+J[1]),Y&&(V-=10),0!==Z&&(V=parseFloat(V+"e"+Z))}return{num:V,length:X-G}}function N(K,X){var G=K.pop();if(X.length){var V=X[X.length-1];G===V.element&&(X.pop(),V=X[X.length-1]);var Q=V.element,Y=V.index;if(Array.isArray(Q))Q.push(G);else if(Y===K.length-2){var J=K.pop();Q[J]=G}else K.push(G)}}function R(K,X){for(var G=Math.min(K.length,X.length),V=0,Q;V<G;V++)if(Q=I.collate(K[V],X[V]),0!==Q)return Q;return K.length===X.length?0:K.length>X.length?1:-1}function P(K,X){return K===X?0:K>X?1:-1}function F(K,X){for(var G=Object.keys(K),V=Object.keys(X),Q=Math.min(G.length,V.length),Y=0,J;Y<Q;Y++){if(J=I.collate(G[Y],V[Y]),0!==J)return J;if(J=I.collate(K[G[Y]],X[V[Y]]),0!==J)return J}return G.length===V.length?0:G.length>V.length?1:-1}function M(K){var G=["boolean","number","string","object"].indexOf("undefined"==typeof K?"undefined":_typeof(K));return~G?null===K?1:Array.isArray(K)?5:3>G?G+2:G+3:Array.isArray(K)?5:void 0}function B(K){if(0===K)return"1";var X=K.toExponential().split(/e\+?/),G=parseInt(X[1],10),V=0>K,Q=V?"0":"2",Y=(V?-G:G)-U,J=z.padLeft(Y.toString(),"0",H);Q+=W+J;var $=Math.abs(parseFloat(X[0]));V&&($=10-$);var Z=$.toFixed(20);return Z=Z.replace(/\.?0+$/,""),Q+=W+Z,Q}var U=-324,H=3,W="",z=L(14);I.collate=function(K,X){if(K===X)return 0;K=I.normalizeKey(K),X=I.normalizeKey(X);var G=M(K),V=M(X);if(0!=G-V)return G-V;if(null===K)return 0;switch("undefined"==typeof K?"undefined":_typeof(K)){case"number":return K-X;case"boolean":return K===X?0:K<X?-1:1;case"string":return P(K,X);}return Array.isArray(K)?R(K,X):F(K,X)},I.normalizeKey=function(K){switch("undefined"==typeof K?"undefined":_typeof(K)){case"undefined":return null;case"number":return K===Infinity||K===-Infinity||isNaN(K)?null:K;case"object":var X=K;if(Array.isArray(K)){var G=K.length;K=Array(G);for(var V=0;V<G;V++)K[V]=I.normalizeKey(X[V])}else{if(K instanceof Date)return K.toJSON();if(null!==K)for(var Q in K={},X)if(X.hasOwnProperty(Q)){var Y=X[Q];"undefined"!=typeof Y&&(K[Q]=I.normalizeKey(Y))}}}return K},I.toIndexableString=function(K){return K=I.normalizeKey(K),M(K)+W+D(K)+"\0"},I.parseIndexableString=function(K){for(var X=[],G=[],V=0,Q;;){if(Q=K[V++],"\0"===Q){if(1===X.length)return X.pop();N(X,G);continue}switch(Q){case"1":X.push(null);break;case"2":X.push("1"===K[V]),V++;break;case"3":var Y=O(K,V);X.push(Y.num),V+=Y.length;break;case"4":for(var J="",$;$=K[V],"\0"!==$;)J+=$,V++;J=J.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02"),X.push(J);break;case"5":var Z={element:[],index:X.length};X.push(Z.element),G.push(Z);break;case"6":var te={element:{},index:X.length};X.push(te.element),G.push(te);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+Q);}}}},{14:14}],14:[function(L,C,I){"use strict";function D(O,N,R){for(var P="",F=R-O.length;P.length<F;)P+=N;return P}I.padLeft=function(O,N,R){var P=D(O,N,R);return P+O},I.padRight=function(O,N,R){var P=D(O,N,R);return O+P},I.stringLexCompare=function(O,N){var R=O.length,P=N.length,F;for(F=0;F<R;F++){if(F===P)return 1;var M=O.charAt(F),B=N.charAt(F);if(M!==B)return M<B?-1:1}return R<P?-1:0},I.intToDecimalForm=function(O){var N=0>O,R="";do{var P=N?-Math.ceil(O%10):Math.floor(O%10);R=P+R,O=N?Math.ceil(O/10):Math.floor(O/10)}while(O);return N&&"0"!=R&&(R="-"+R),R}},{}],15:[function(L,C,I){"use strict";function D(){this.store={}}function O(N){if(this.store=new D,N&&Array.isArray(N))for(var R=0,P=N.length;R<P;R++)this.add(N[R])}I.Map=D,I.Set=O,D.prototype.mangle=function(N){if("string"!=typeof N)throw new TypeError("key must be a string but Got "+N);return"$"+N},D.prototype.unmangle=function(N){return N.substring(1)},D.prototype.get=function(N){var R=this.mangle(N);return R in this.store?this.store[R]:void 0},D.prototype.set=function(N,R){var P=this.mangle(N);return this.store[P]=R,!0},D.prototype.has=function(N){var R=this.mangle(N);return R in this.store},D.prototype.delete=function(N){var R=this.mangle(N);return!!(R in this.store)&&(delete this.store[R],!0)},D.prototype.forEach=function(N){for(var R=Object.keys(this.store),P=0,F=R.length;P<F;P++){var M=R[P],B=this.store[M];M=this.unmangle(M),N(B,M)}},O.prototype.add=function(N){return this.store.set(N,!0)},O.prototype.has=function(N){return this.store.has(N)},O.prototype.delete=function(N){return this.store.delete(N)}},{}],16:[function(L,C){(function(){var D={}.hasOwnProperty,O=[].slice;C.exports=function(N,R){var P,F,M,B;for(P in F=[],B=[],R)if(D.call(R,P)){if(M=R[P],"this"===P)continue;F.push(P),B.push(M)}return Function.apply(null,O.call(F).concat([N])).apply(R["this"],B)}}).call(this)},{}],17:[function(L,C,I){(function(D){if("object"===("undefined"==typeof I?"undefined":_typeof(I)))C.exports=D();else if("function"==typeof E&&E.amd)E(D);else{var O;try{O=window}catch(N){O=self}O.SparkMD5=D()}})(function(D){"use strict";function O(te,ne,se,re,ae,oe){return ne=$($(ne,te),$(re,oe)),$(ne<<ae|ne>>>32-ae,se)}function N(te,ne,se,re,ae,oe,ie){return O(ne&se|~ne&re,te,ne,ae,oe,ie)}function R(te,ne,se,re,ae,oe,ie){return O(ne&re|se&~re,te,ne,ae,oe,ie)}function P(te,ne,se,re,ae,oe,ie){return O(ne^se^re,te,ne,ae,oe,ie)}function F(te,ne,se,re,ae,oe,ie){return O(se^(ne|~re),te,ne,ae,oe,ie)}function M(te,ne){var se=te[0],re=te[1],ae=te[2],oe=te[3];se=N(se,re,ae,oe,ne[0],7,-680876936),oe=N(oe,se,re,ae,ne[1],12,-389564586),ae=N(ae,oe,se,re,ne[2],17,606105819),re=N(re,ae,oe,se,ne[3],22,-1044525330),se=N(se,re,ae,oe,ne[4],7,-176418897),oe=N(oe,se,re,ae,ne[5],12,1200080426),ae=N(ae,oe,se,re,ne[6],17,-1473231341),re=N(re,ae,oe,se,ne[7],22,-45705983),se=N(se,re,ae,oe,ne[8],7,1770035416),oe=N(oe,se,re,ae,ne[9],12,-1958414417),ae=N(ae,oe,se,re,ne[10],17,-42063),re=N(re,ae,oe,se,ne[11],22,-1990404162),se=N(se,re,ae,oe,ne[12],7,1804603682),oe=N(oe,se,re,ae,ne[13],12,-40341101),ae=N(ae,oe,se,re,ne[14],17,-1502002290),re=N(re,ae,oe,se,ne[15],22,1236535329),se=R(se,re,ae,oe,ne[1],5,-165796510),oe=R(oe,se,re,ae,ne[6],9,-1069501632),ae=R(ae,oe,se,re,ne[11],14,643717713),re=R(re,ae,oe,se,ne[0],20,-373897302),se=R(se,re,ae,oe,ne[5],5,-701558691),oe=R(oe,se,re,ae,ne[10],9,38016083),ae=R(ae,oe,se,re,ne[15],14,-660478335),re=R(re,ae,oe,se,ne[4],20,-405537848),se=R(se,re,ae,oe,ne[9],5,568446438),oe=R(oe,se,re,ae,ne[14],9,-1019803690),ae=R(ae,oe,se,re,ne[3],14,-187363961),re=R(re,ae,oe,se,ne[8],20,1163531501),se=R(se,re,ae,oe,ne[13],5,-1444681467),oe=R(oe,se,re,ae,ne[2],9,-51403784),ae=R(ae,oe,se,re,ne[7],14,1735328473),re=R(re,ae,oe,se,ne[12],20,-1926607734),se=P(se,re,ae,oe,ne[5],4,-378558),oe=P(oe,se,re,ae,ne[8],11,-2022574463),ae=P(ae,oe,se,re,ne[11],16,1839030562),re=P(re,ae,oe,se,ne[14],23,-35309556),se=P(se,re,ae,oe,ne[1],4,-1530992060),oe=P(oe,se,re,ae,ne[4],11,1272893353),ae=P(ae,oe,se,re,ne[7],16,-155497632),re=P(re,ae,oe,se,ne[10],23,-1094730640),se=P(se,re,ae,oe,ne[13],4,681279174),oe=P(oe,se,re,ae,ne[0],11,-358537222),ae=P(ae,oe,se,re,ne[3],16,-722521979),re=P(re,ae,oe,se,ne[6],23,76029189),se=P(se,re,ae,oe,ne[9],4,-640364487),oe=P(oe,se,re,ae,ne[12],11,-421815835),ae=P(ae,oe,se,re,ne[15],16,530742520),re=P(re,ae,oe,se,ne[2],23,-995338651),se=F(se,re,ae,oe,ne[0],6,-198630844),oe=F(oe,se,re,ae,ne[7],10,1126891415),ae=F(ae,oe,se,re,ne[14],15,-1416354905),re=F(re,ae,oe,se,ne[5],21,-57434055),se=F(se,re,ae,oe,ne[12],6,1700485571),oe=F(oe,se,re,ae,ne[3],10,-1894986606),ae=F(ae,oe,se,re,ne[10],15,-1051523),re=F(re,ae,oe,se,ne[1],21,-2054922799),se=F(se,re,ae,oe,ne[8],6,1873313359),oe=F(oe,se,re,ae,ne[15],10,-30611744),ae=F(ae,oe,se,re,ne[6],15,-1560198380),re=F(re,ae,oe,se,ne[13],21,1309151649),se=F(se,re,ae,oe,ne[4],6,-145523070),oe=F(oe,se,re,ae,ne[11],10,-1120210379),ae=F(ae,oe,se,re,ne[2],15,718787259),re=F(re,ae,oe,se,ne[9],21,-343485551),te[0]=$(se,te[0]),te[1]=$(re,te[1]),te[2]=$(ae,te[2]),te[3]=$(oe,te[3])}function B(te){var ne=[],se;for(se=0;64>se;se+=4)ne[se>>2]=te.charCodeAt(se)+(te.charCodeAt(se+1)<<8)+(te.charCodeAt(se+2)<<16)+(te.charCodeAt(se+3)<<24);return ne}function U(te){var ne=[],se;for(se=0;64>se;se+=4)ne[se>>2]=te[se]+(te[se+1]<<8)+(te[se+2]<<16)+(te[se+3]<<24);return ne}function H(te){var ne=te.length,se=[1732584193,-271733879,-1732584194,271733878],re,ae,oe,ie,de,ce;for(re=64;re<=ne;re+=64)M(se,B(te.substring(re-64,re)));for(te=te.substring(re-64),ae=te.length,oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re=0;re<ae;re+=1)oe[re>>2]|=te.charCodeAt(re)<<(re%4<<3);if(oe[re>>2]|=128<<(re%4<<3),55<re)for(M(se,oe),re=0;16>re;re+=1)oe[re]=0;return ie=8*ne,ie=ie.toString(16).match(/(.*?)(.{0,8})$/),de=parseInt(ie[2],16),ce=parseInt(ie[1],16)||0,oe[14]=de,oe[15]=ce,M(se,oe),se}function W(te){var ne=te.length,se=[1732584193,-271733879,-1732584194,271733878],re,ae,oe,ie,de,ce;for(re=64;re<=ne;re+=64)M(se,U(te.subarray(re-64,re)));for(te=re-64<ne?te.subarray(re-64):new Uint8Array(0),ae=te.length,oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re=0;re<ae;re+=1)oe[re>>2]|=te[re]<<(re%4<<3);if(oe[re>>2]|=128<<(re%4<<3),55<re)for(M(se,oe),re=0;16>re;re+=1)oe[re]=0;return ie=8*ne,ie=ie.toString(16).match(/(.*?)(.{0,8})$/),de=parseInt(ie[2],16),ce=parseInt(ie[1],16)||0,oe[14]=de,oe[15]=ce,M(se,oe),se}function z(te){var ne="",se;for(se=0;4>se;se+=1)ne+=Z[15&te>>8*se+4]+Z[15&te>>8*se];return ne}function K(te){var ne;for(ne=0;ne<te.length;ne+=1)te[ne]=z(te[ne]);return te.join("")}function X(te){return /[\u0080-\uFFFF]/.test(te)&&(te=unescape(encodeURIComponent(te))),te}function G(te,ne){var se=te.length,re=new ArrayBuffer(se),ae=new Uint8Array(re),oe;for(oe=0;oe<se;oe+=1)ae[oe]=te.charCodeAt(oe);return ne?ae:re}function V(te){return String.fromCharCode.apply(null,new Uint8Array(te))}function Q(te,ne,se){var re=new Uint8Array(te.byteLength+ne.byteLength);return re.set(new Uint8Array(te)),re.set(new Uint8Array(ne),te.byteLength),se?re:re.buffer}function Y(te){var ne=[],se=te.length,re;for(re=0;re<se-1;re+=2)ne.push(parseInt(te.substr(re,2),16));return String.fromCharCode.apply(String,ne)}function J(){this.reset()}var $=function(ne,se){return 4294967295&ne+se},Z=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==K(H("hello"))&&($=function(ne,se){var re=(65535&ne)+(65535&se);return(ne>>16)+(se>>16)+(re>>16)<<16|65535&re}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function te(ne,se){return ne=0|ne||0,0>ne?Math.max(ne+se,0):Math.min(ne,se)}ArrayBuffer.prototype.slice=function(ne,se){var re=this.byteLength,ae=te(ne,re),oe=re,ie,de,ce,le;return(se!==D&&(oe=te(se,re)),ae>oe)?new ArrayBuffer(0):(ie=oe-ae,de=new ArrayBuffer(ie),ce=new Uint8Array(de),le=new Uint8Array(this,ae,ie),ce.set(le),de)}}(),J.prototype.append=function(te){return this.appendBinary(X(te)),this},J.prototype.appendBinary=function(te){this._buff+=te,this._length+=te.length;var ne=this._buff.length,se;for(se=64;se<=ne;se+=64)M(this._hash,B(this._buff.substring(se-64,se)));return this._buff=this._buff.substring(se-64),this},J.prototype.end=function(te){var ne=this._buff,se=ne.length,ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re,oe;for(re=0;re<se;re+=1)ae[re>>2]|=ne.charCodeAt(re)<<(re%4<<3);return this._finish(ae,se),oe=K(this._hash),te&&(oe=Y(oe)),this.reset(),oe},J.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},J.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},J.prototype.setState=function(te){return this._buff=te.buff,this._length=te.length,this._hash=te.hash,this},J.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},J.prototype._finish=function(te,ne){var se=ne,re,ae,oe;if(te[se>>2]|=128<<(se%4<<3),55<se)for(M(this._hash,te),se=0;16>se;se+=1)te[se]=0;re=8*this._length,re=re.toString(16).match(/(.*?)(.{0,8})$/),ae=parseInt(re[2],16),oe=parseInt(re[1],16)||0,te[14]=ae,te[15]=oe,M(this._hash,te)},J.hash=function(te,ne){return J.hashBinary(X(te),ne)},J.hashBinary=function(te,ne){var se=H(te),re=K(se);return ne?Y(re):re},J.ArrayBuffer=function(){this.reset()},J.ArrayBuffer.prototype.append=function(te){var ne=Q(this._buff.buffer,te,!0),se=ne.length,re;for(this._length+=te.byteLength,re=64;re<=se;re+=64)M(this._hash,U(ne.subarray(re-64,re)));return this._buff=re-64<se?new Uint8Array(ne.buffer.slice(re-64)):new Uint8Array(0),this},J.ArrayBuffer.prototype.end=function(te){var ne=this._buff,se=ne.length,re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ae,oe;for(ae=0;ae<se;ae+=1)re[ae>>2]|=ne[ae]<<(ae%4<<3);return this._finish(re,se),oe=K(this._hash),te&&(oe=Y(oe)),this.reset(),oe},J.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},J.ArrayBuffer.prototype.getState=function(){var te=J.prototype.getState.call(this);return te.buff=V(te.buff),te},J.ArrayBuffer.prototype.setState=function(te){return te.buff=G(te.buff,!0),J.prototype.setState.call(this,te)},J.ArrayBuffer.prototype.destroy=J.prototype.destroy,J.ArrayBuffer.prototype._finish=J.prototype._finish,J.ArrayBuffer.hash=function(te,ne){var se=W(new Uint8Array(te)),re=K(se);return ne?Y(re):re},J})},{}],18:[function(L,C,I){"use strict";function D(O,N,R){var P=R[R.length-1];O===P.element&&(R.pop(),P=R[R.length-1]);var F=P.element,M=P.index;if(Array.isArray(F))F.push(O);else if(M===N.length-2){var B=N.pop();F[B]=O}else N.push(O)}I.stringify=function(N){for(var R=[{obj:N}],P="",F,M,B,U,H,W,z,K,X,G,V;F=R.pop();)if(M=F.obj,B=F.prefix||"",U=F.val||"",P+=B,U)P+=U;else if("object"!==("undefined"==typeof M?"undefined":_typeof(M)))P+="undefined"==typeof M?null:JSON.stringify(M);else if(null===M)P+="null";else if(Array.isArray(M)){for(R.push({val:"]"}),H=M.length-1;0<=H;H--)W=0===H?"":",",R.push({obj:M[H],prefix:W});R.push({val:"["})}else{for(K in z=[],M)M.hasOwnProperty(K)&&z.push(K);for(R.push({val:"}"}),H=z.length-1;0<=H;H--)X=z[H],G=M[X],V=0<H?",":"",V+=JSON.stringify(X)+":",R.push({obj:G,prefix:V});R.push({val:"{"})}return P},I.parse=function(O){for(var N=[],R=[],P=0,F,M,B,U,H,W,z,K,X;;){if(F=O[P++],"}"===F||"]"===F||"undefined"==typeof F){if(1===N.length)return N.pop();D(N.pop(),N,R);continue}switch(F){case" ":case"\t":case"\n":case":":case",":break;case"n":P+=3,D(null,N,R);break;case"t":P+=3,D(!0,N,R);break;case"f":P+=4,D(!1,N,R);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(M="",P--;;)if(B=O[P++],/[\d\.\-e\+]/.test(B))M+=B;else{P--;break}D(parseFloat(M),N,R);break;case"\"":for(U="",H=void 0,W=0;z=O[P++],"\""!==z||"\\"===H&&1==W%2;)U+=z,H=z,"\\"===H?W++:W=0;D(JSON.parse("\""+U+"\""),N,R);break;case"[":K={element:[],index:N.length},N.push(K.element),R.push(K);break;case"{":X={element:{},index:N.length},N.push(X.element),R.push(X);break;default:throw new Error("unexpectedly reached end of input: "+F);}}}},{}]},{},[3])(3)});